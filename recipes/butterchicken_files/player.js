/*! News Corp RE-Player - stable-3  - v1.6.0 - 2022-7-21 14:30:11 */
!function(a){function o(t){if(e[t])return e[t].exports;var n=e[t]={i:t,l:!1,exports:{}};return a[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}var e={};o.m=a,o.c=e,o.d=function(n,e,t){o.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:t})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(n,a){if(1&a&&(n=o(n)),8&a)return n;if(4&a&&"object"==typeof n&&n&&n.__esModule)return n;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:n}),2&a&&"string"!=typeof n)for(var i in n)o.d(t,i,function(e){return n[e]}.bind(null,i));return t},o.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return o.d(e,"a",e),e},o.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},o.p="",o(o.s=6)}([function(t){var a=Math.round,o=Math.floor;t.exports=function(){"use strict";var S="millisecond",T="second",I="minute",N="hour",b="day",w="week",P="month",L="quarter",O="year",R="date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,D=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=function(a,e,t){var n=a+"";return!n||n.length>=e?a:""+Array(e+1-n.length).join(t)+a},m="en",u={};u[m]={name:"en",weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]};var v=function(t){return t instanceof _},y=function(a,o,t){var s;if(!a)return m;if("string"==typeof a)u[a]&&(s=a),o&&(u[a]=o,s=a);else{var i=a.name;u[i]=a,s=i}return!t&&s&&(m=s),s||!t&&m},g=function(a,e){if(v(a))return a.clone();var i="object"==typeof e?e:{};return i.date=a,i.args=arguments,new _(i)},M={s:d,z:function(a){var e=-a.utcOffset(),t=Math.abs(e),n=o(t/60);return(0>=e?"+":"-")+d(n,2,"0")+":"+d(t%60,2,"0")},m:function a(e,t){if(e.date()<t.date())return-a(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(n,P),r=0>t-i,o=e.clone().add(n+(r?-1:1),P);return+(-(n+(t-i)/(r?i-o:o-i))||0)},a:function(t){return 0>t?Math.ceil(t)||0:o(t)},p:function(d){return{M:P,y:O,w:w,d:b,D:R,h:N,m:I,s:T,ms:S,Q:L}[d]||((d||"")+"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}};M.l=y,M.i=v,M.w=function(n,e){return g(n,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function e(t){this.$L=y(t.locale,null,!0),this.parse(t)}var t=e.prototype;return t.parse=function(t){this.$d=function(a){var e=a.date,s=a.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var i=n[2]-1||0,r=(n[7]||"0").substring(0,3);return s?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},t.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},t.$utils=function(){return M},t.isValid=function(){return"Invalid Date"!==this.$d.toString()},t.isSame=function(a,e){var t=g(a);return this.startOf(e)<=t&&t<=this.endOf(e)},t.isAfter=function(n,e){return g(n)<this.startOf(e)},t.isBefore=function(n,e){return this.endOf(e)<g(n)},t.$g=function(a,e,t){return M.u(a)?this[e]:this.set(t,a)},t.unix=function(){return o(this.valueOf()/1e3)},t.valueOf=function(){return this.$d.getTime()},t.startOf=function(t,e){var a=this,i=!!M.u(e)||e,n=M.p(t),o=function(o,e){var t=M.w(a.$u?Date.UTC(a.$y,e,o):new Date(a.$y,e,o),a);return i?t:t.endOf(b)},r=function(n,e){return M.w(a.toDate()[n].apply(a.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(e)),a)},s=this.$W,l=this.$M,d=this.$D,c="set"+(this.$u?"UTC":"");switch(n){case O:return i?o(1,0):o(31,11);case P:return i?o(1,l):o(0,l+1);case w:var p=this.$locale().weekStart||0,m=(s<p?s+7:s)-p;return o(i?d-m:d+(6-m),l);case b:case R:return r(c+"Hours",0);case N:return r(c+"Minutes",1);case I:return r(c+"Seconds",2);case T:return r(c+"Milliseconds",3);default:return this.clone();}},t.endOf=function(t){return this.startOf(t,!1)},t.$set=function(e,t){var n=M.p(e),a="set"+(this.$u?"UTC":""),i=(r={},r[b]=a+"Date",r[R]=a+"Date",r[P]=a+"Month",r[O]=a+"FullYear",r[N]=a+"Hours",r[I]=a+"Minutes",r[T]=a+"Seconds",r[S]=a+"Milliseconds",r)[n],o=n===b?this.$D+(t-this.$W):t,r;if(n===P||n===O){var s=this.clone().set(R,1);s.$d[i](o),s.init(),this.$d=s.set(R,Math.min(this.$D,s.daysInMonth())).$d}else i&&this.$d[i](o);return this.init(),this},t.set=function(n,e){return this.clone().$set(n,e)},t.get=function(t){return this[M.p(t)]()},t.add=function(i,t){var o=this,n;i=+i;var r=M.p(t),s=function(e){var t=g(o);return M.w(t.date(t.date()+a(e*i)),o)};if(r===P)return this.set(P,this.$M+i);if(r===O)return this.set(O,this.$y+i);if(r===b)return s(1);if(r===w)return s(7);var l=(n={},n[I]=6e4,n[N]=36e5,n[T]=1e3,n)[r]||1,d=this.$d.getTime()+i*l;return M.w(d,this)},t.subtract=function(n,e){return this.add(-1*n,e)},t.format=function(d){var g=this;if(!this.isValid())return"Invalid Date";var t=d||"YYYY-MM-DDTHH:mm:ssZ",n=M.z(this),e=this.$locale(),r=this.$H,o=this.$m,a=this.$M,s=e.weekdays,c=e.months,l=function(n,e,a,i){return n&&(n[e]||n(g,t))||a[e].substr(0,i)},u=function(t){return M.s(r%12||12,t,"0")},p=e.meridiem||function(a,e,t){var n=12>a?"AM":"PM";return t?n.toLowerCase():n},_={YY:(this.$y+"").slice(-2),YYYY:this.$y,M:a+1,MM:M.s(a+1,2,"0"),MMM:l(e.monthsShort,a,c,3),MMMM:l(c,a),D:this.$D,DD:M.s(this.$D,2,"0"),d:this.$W+"",dd:l(e.weekdaysMin,this.$W,s,2),ddd:l(e.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:r+"",HH:M.s(r,2,"0"),h:u(1),hh:u(2),a:p(r,o,!0),A:p(r,o,!1),m:o+"",mm:M.s(o,2,"0"),s:this.$s+"",ss:M.s(this.$s,2,"0"),SSS:M.s(this.$ms,3,"0"),Z:n};return t.replace(D,function(a,e){return e||_[a]||n.replace(":","")})},t.utcOffset=function(){return 15*-a(this.$d.getTimezoneOffset()/15)},t.diff=function(t,e,n){var a=M.p(e),i=g(t),o=6e4*(i.utcOffset()-this.utcOffset()),r=this-i,s=M.m(this,i),l;return s=(l={},l[O]=s/12,l[P]=s,l[L]=s/3,l[w]=(r-o)/6048e5,l[b]=(r-o)/864e5,l[N]=r/36e5,l[I]=r/6e4,l[T]=r/1e3,l)[a]||r,n?s:M.a(s)},t.daysInMonth=function(){return this.endOf(P).$D},t.$locale=function(){return u[this.$L]},t.locale=function(a,o){if(!a)return this.$L;var t=this.clone(),n=y(a,o,!0);return n&&(t.$L=n),t},t.clone=function(){return M.w(this.$d,this)},t.toDate=function(){return new Date(this.valueOf())},t.toJSON=function(){return this.isValid()?this.toISOString():null},t.toISOString=function(){return this.$d.toISOString()},t.toString=function(){return this.$d.toUTCString()},e}(),E=_.prototype;return g.prototype=E,[["$ms",S],["$s",T],["$m",I],["$H",N],["$W",b],["$M",P],["$y",O],["$D",R]].forEach(function(n){E[n[1]]=function(e){return this.$g(e,n[0],n[1])}}),g.extend=function(n,e){return n.$i||(n(e,_,g),n.$i=!0),g},g.locale=y,g.isDayjs=v,g.unix=function(t){return g(1e3*t)},g.en=u[m],g.Ls=u,g.p={},g}()},function(g,e,t){"use strict";function _(n){var e=i.indexOf(n);0<=e&&(i.splice(e,1),A())}function s(n,e){return void 0===e?"Failed to execute '"+n+"' on 'ResizeObserver': 1 argument required, but only 0 present.":e&&e.nodeType===window.Node.ELEMENT_NODE?void 0:"Failed to execute '"+n+"' on 'ResizeObserver': parameter 1 is not of type 'Element'."}function c(a,e){for(var t=0;t<a.length;t+=1)if(a[t].target===e)return t;return-1}Object.defineProperty(e,"__esModule",{value:!0});var l=t(7),E=t(8),i=[],n=function(){function t(n){this.$$observationTargets=[],this.$$activeTargets=[],this.$$skippedTargets=[];var a=function(t){return void 0===t?"Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.":"function"==typeof t?void 0:"Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function."}(n);if(a)throw TypeError(a);this.$$callback=n}return t.prototype.observe=function(a){var e=s("observe",a),n;if(e)throw TypeError(e);0<=c(this.$$observationTargets,a)||(this.$$observationTargets.push(new l.ResizeObservation(a)),n=this,0>i.indexOf(n)&&(i.push(n),p()))},t.prototype.unobserve=function(a){var e=s("unobserve",a);if(e)throw TypeError(e);var t=c(this.$$observationTargets,a);0>t||(this.$$observationTargets.splice(t,1),0===this.$$observationTargets.length&&_(this))},t.prototype.disconnect=function(){this.$$observationTargets=[],this.$$activeTargets=[],_(this)},t}();e.ResizeObserver=n;var a=function(a){i.forEach(function(e){e.$$activeTargets=[],e.$$skippedTargets=[],e.$$observationTargets.forEach(function(t){t.isActive()&&(r(t.target)>a?e.$$activeTargets.push(t):e.$$skippedTargets.push(t))})})},o=function(){var a=1/0;return i.forEach(function(e){if(e.$$activeTargets.length){var s=[];e.$$activeTargets.forEach(function(e){var t=new E.ResizeObserverEntry(e.target);s.push(t),e.$$broadcastWidth=t.contentRect.width,e.$$broadcastHeight=t.contentRect.height;var n=r(e.target);n<a&&(a=n)}),e.$$callback(s,e),e.$$activeTargets=[]}}),a},r=function(n){for(var e=0;n.parentNode;)n=n.parentNode,e+=1;return e},d=function(){var n=0,t;for(a(n);i.some(function(t){return!!t.$$activeTargets.length});)n=o(),a(n);i.some(function(t){return!!t.$$skippedTargets.length})&&(t=new window.ErrorEvent("ResizeLoopError",{message:"ResizeObserver loop completed with undelivered notifications."}),window.dispatchEvent(t))},p=function(){y||m()},m=function(){y=window.requestAnimationFrame(function(){d(),m()})},A=function(){y&&!i.some(function(t){return!!t.$$observationTargets.length})&&(window.cancelAnimationFrame(y),y=void 0)},y;e.install=function(){return window.ResizeObserver=n}},function(n,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContentRect=function(a){if("getBBox"in a){var e=a.getBBox();return Object.freeze({height:e.height,left:0,top:0,width:e.width})}var t=window.getComputedStyle(a);return Object.freeze({height:parseFloat(t.height||"0"),left:parseFloat(t.paddingLeft||"0"),top:parseFloat(t.paddingTop||"0"),width:parseFloat(t.width||"0")})}},,function(t){t.exports=function(){"use strict";return function(g,e,_){function n(a,e,t,n){return o.fromToBase(a,e,t,n)}g=g||{};var o=e.prototype,E={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};_.en.relativeTime=E,o.fromToBase=function(e,t,n,i,a){for(var o=n.$locale().relativeTime||E,r=g.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],s=r.length,d=0,p,c,l,m;d<s;d+=1){m=r[d],m.d&&(p=i?_(e).diff(n,m.d,!0):n.diff(e,m.d,!0));var u=(g.rounding||Math.round)(Math.abs(p));if(l=0<p,u<=m.r||!m.r){1>=u&&0<d&&(m=r[d-1]);var A=o[m.l];a&&(u=a(""+u)),c="string"==typeof A?A.replace("%d",u):A(u,t,m.l,l);break}}if(t)return c;var v=l?o.future:o.past;return"function"==typeof v?v(c):v.replace("%s",c)},o.to=function(a,e){return n(a,e,this,!0)},o.from=function(a,e){return n(a,e,this)};var t=function(t){return t.$u?_.utc():_()};o.toNow=function(n){return this.to(t(this),n)},o.fromNow=function(n){return this.from(t(this),n)}}}()},,function(a,e,t){t(22),t(9),t(10),a.exports=t(11)},function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(2),i=function(){function t(t){this.target=t,this.$$broadcastWidth=this.$$broadcastHeight=0}return Object.defineProperty(t.prototype,"broadcastWidth",{get:function(){return this.$$broadcastWidth},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"broadcastHeight",{get:function(){return this.$$broadcastHeight},enumerable:!0,configurable:!0}),t.prototype.isActive=function(){var t=n.ContentRect(this.target);return!!t&&(t.width!==this.broadcastWidth||t.height!==this.broadcastHeight)},t}();e.ResizeObservation=i},function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t(2);e.ResizeObserverEntry=function(t){this.target=t,this.contentRect=n.ContentRect(t)}},function(){},function(){},function(){},,,,,,,,,,,function(aa,e,t){"use strict";var oa=Math.PI,sa=Math.round,la=Math.min,da=Math.floor;t.r(e);var ca=function(){function a(){}return a.getDomain=function(e){void 0===e&&(e="");var t=window.location.hostname;if(e){var n=document.createElement("a");n.href=e,n.hostname&&(t=n.hostname)}return a.cleanHostname(t)},a.getIFrameURL=function(){var e=a.getSearchParams(),t=window.location.hostname;return(e.amp&&"1"===e.amp||window.location!=window.parent.location)&&(t=document.referrer),a.cleanHostname(t)},a.cleanHostname=function(e){void 0===e&&(e="");var t=/^(\bamp-\b)|(\bwww\.\b)|(\bamp\.\b)|(\b-com-au\.cdn\.ampproject\.org\b)/gi;return e=e.replace(t,function(e){return e===a.AMP_URL_IDENTIFIER?".com.au":""})},a.isAmp=function(){var e=a.getSearchParams();return e.amp&&"1"===e.amp},a.getSearchUrl=function(){return location.search},a.getSearchParams=function(){for(var a={},e=0,t=this.getSearchUrl().substr(1).split("&"),n;e<t.length;e++)if(n=t[e],""!==n){var i=n.split("=");2===i.length&&(a[i[0]]=i[1])}return a},a.AMP_URL_IDENTIFIER="-com-au.cdn.ampproject.org",a}(),n=function(){function t(t){this.navigator=t}return t.prototype.isIphone=function(){return /iPhone/i.test(this.navigator.userAgent)},t.prototype.isAndroid=function(){return /android/i.test(this.navigator.userAgent)},t.prototype.isIOS=function(){return /iPad|iPhone|iPod/i.test(this.navigator.userAgent)},t.prototype.isMobile=function(){return /Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(this.navigator.userAgent)},t.prototype.isDesktop=function(){return!this.isIOS()&&!this.isMobile()},t.prototype.isIE11=function(){return!!window.MSInputMethodContext&&!!document.documentMode},t.prototype.isIpad=function(){return /iPad/i.test(this.navigator.userAgent)},t.prototype.isPortrait=function(){return window&&window.innerHeight>window.innerWidth||screen&&screen.availHeight>screen.availWidth},t.prototype.isLandscapeMode=function(){return!this.isPortrait()},t}(),pa=function(){function t(){}return t.newsSites=function(){return t.PLNN_SITES.concat(t.NCA).concat(t.PRESTIGE).concat(t.FOOD_TRAVEL).concat(t.SKY_SITES).concat([t.CODESPORTS])},t.DAILY_TELEGRAPH="dailytelegraph",t.THE_CHRONICLE="thechronicle",t.THE_AUSTRALIAN="theaustralian",t.HERALD_SUN="heraldsun",t.THE_ADVERTISER="adelaidenow",t.GEELONG_ADVERTISER="geelongadvertiser",t.TOWNSVILLE_BULLETIN="townsvillebulletin",t.GOLDCOAST_BULLETIN="goldcoastbulletin",t.CAIRNS_POST="cairnspost",t.THE_MERCURY="themercury",t.NT_NEWS="ntnews",t.BEST_RECIPES="bestrecipes",t.BODY_SOUL="bodyandsoul",t.DELICIOUS="delicious",t.GQ="gq",t.KIDSPOT="kidspot",t.VOGUE="vogue",t.TASTE="taste",t.WHIMN="whimn",t.COURIER_MAIL="couriermail",t.NEWS="news",t.WEEKLY_TIMES_NOW="weeklytimesnow",t.ESCAPE="escape",t.CODESPORTS="codesports",t.KIDSNEWS="kidsnews",t.SKY_NON_PROD="sn",t.SKY="skynews",t.PLNN_SITES=[t.DAILY_TELEGRAPH,t.THE_CHRONICLE,t.HERALD_SUN,t.COURIER_MAIL,t.THE_ADVERTISER,t.TOWNSVILLE_BULLETIN,t.GOLDCOAST_BULLETIN,t.NT_NEWS,t.THE_MERCURY,t.CAIRNS_POST,t.GEELONG_ADVERTISER,t.WEEKLY_TIMES_NOW],t.BETA_SITES=[t.NT_NEWS,t.GOLDCOAST_BULLETIN,t.BEST_RECIPES],t.NCA=[t.NEWS,t.WHIMN,t.BODY_SOUL,t.KIDSPOT,t.KIDSNEWS],t.PRESTIGE=[t.THE_AUSTRALIAN,t.VOGUE,t.GQ],t.FOOD_TRAVEL=[t.TASTE,t.DELICIOUS,t.BEST_RECIPES,t.ESCAPE],t.VIDORA_DISABLED_SITES=[t.KIDSPOT,t.TASTE,t.DELICIOUS,t.BEST_RECIPES,t.SKY_NON_PROD,t.SKY],t.AB_TEST_DISABLED_SITES=[t.KIDSPOT,t.TASTE,t.BEST_RECIPES],t.PREMIUM_VIDEO_SITES=[t.THE_ADVERTISER,t.COURIER_MAIL,t.DAILY_TELEGRAPH,t.HERALD_SUN,t.CAIRNS_POST,t.GEELONG_ADVERTISER,t.GOLDCOAST_BULLETIN,t.NT_NEWS,t.THE_CHRONICLE,t.TOWNSVILLE_BULLETIN,t.WEEKLY_TIMES_NOW,t.THE_MERCURY,t.THE_AUSTRALIAN,t.CODESPORTS],t.PROJECT0_SITES=[t.NEWS],t.ADS_DISABLED_SITES=["supercoach.adelaidenow.com.au","supercoach.cairnspost.com.au","supercoach.couriermail.com.au","supercoach.dailytelegraph.com.au","supercoach.foxsports.com.au","supercoach.geelongadvertiser.com.au","supercoach.goldcoastbulletin.com.au","supercoach.heraldsun.com.au","supercoach.themercury.com.au","supercoach.ntnews.com.au","supercoach.townsvillebulletin.com.au"],t.SKY_SITES=[t.SKY_NON_PROD,t.SKY],t}(),a=function(){function t(){}return t.get=function(){var n="",e=document.getElementsByName("keywords");return 0<e.length&&(n=e[0].content),n},t}(),ma=function(){function t(){}return t.addClass=function(n,e){-1===n.className.indexOf(e)&&(n.className+=(0<n.className.length?" ":"")+e)},t.removeClass=function(n,e){-1<n.className.indexOf(e)&&(-1<n.className.indexOf(" "+e)&&(e=" "+e),n.className=n.className.replace(e,""))},t.hasClass=function(n,e){return n&&n.classList.contains(e)},t.toggleClass=function(n,e){return-1<n.className.indexOf(e)?this.removeClass(n,e):this.addClass(n,e),this.hasClass(n,e)},t.onClick=function(n,e){n.onclick=function(){e()},n.ontouchstart=function(){e()}},t.onClickOnly=function(n,e){n.onclick=function(){e()}},t.onTouch=function(n,e){n.ontouchstart=function(){e()}},t.onFutureClick=function(n,e){n.addEventListener("click",function(){e()})},t}(),o=function(){function t(t){this.name=t.name,this.type=t.type,this.time=t.time,this.metadata=this.getMetadata(t.metadata)}return t.prototype.getMetadata=function(t){if(t)try{t=JSON.parse(t)}catch(t){}return t},t}(),l=function(){function t(){this.categories=[],this.keywords=[],this.cuePoints=[],this.fetched=!0}return t.prototype.categoriesExtended=function(){return this.categories.concat(this.keywords)},t.prototype.setCuePoints=function(a){for(var e=0,t=a,n;e<t.length;e++)n=t[e],this.cuePoints.push(new o(n))},t.ACCESS_TYPE_FREE="free",t.ACCESS_TYPE_PREMIUM="premium",t.SOURCE_KTV="News Corp Sports Live Streams",t}(),ua=function(){function t(){}return t.removeDuplicates=function(n){var a=[];return n.filter(function(t){var e=!1;return-1===a.indexOf(t.id)&&(a.push(t.id),e=!0),e})},t.removePremiumVideos=function(t){return t.filter(function(t){return t.accessType===l.ACCESS_TYPE_FREE||!1===t.fetched})},t.getDomain=function(n){var e=ca.getSearchParams().domain||n.getDomain();return /\.com\.au$/.test(e)?e:e+".com.au"},t}(),r=function(){function a(){}return a.getInstance=function(e){return a.instance||(a.instance=new a),ca.getSearchParams().abCookieValue&&(a.activeTest=!0),a.activeTest&&a.instance.getCookie(e),a.instance},a.prototype.getCookie=function(e){if("undefined"==typeof localStorage||!a.activeTest)return"";var t=ca.getSearchParams(),n=da(Math.random()*a.abValues.length),i=e||a.getItem()||a.abValues[n];return a.setItem(i),t.abCookieValue||a.getItem()},a.prototype.getCreationDate=function(){return localStorage.getItem(a.cookieDateName)},a.prototype.getIdentifier=function(){return"undefined"!=typeof localStorage&&a.activeTest?localStorage.getItem(a.cookieIdentifier):""},a.getItem=function(){return localStorage.getItem(a.cookieName)},a.prototype.getHeartbeatLabel=function(){return(a.instance.getCookie()?a.instance.getCookie()+"-":"")+a.instance.getIdentifier()},a.setCreationDate=function(){localStorage.setItem(a.cookieDateName,JSON.stringify(new Date))},a.setIdentifier=function(e){e&&"a"===e?localStorage.setItem(a.cookieIdentifier,a.identifierA):localStorage.setItem(a.cookieIdentifier,a.identifierB)},a.setItem=function(e){a.setCreationDate(),a.setIdentifier(e),localStorage.setItem(a.cookieName,e)},a.cookieName="vms.ab.testing",a.cookieDateName="vms.ab.testing.date",a.cookieIdentifier="vms.ab.testing.identifier",a.identifierA="Variation - A",a.identifierB="Variation - B",a.abValues=["a","b"],a.activeTest=!1,a}(),ga=function(){function t(){}return t.config="CONFIG",t.capi="CAPI",t.capiDecorate="CAPI_DECORATOR",t.eventManager="EVENT_MANAGER",t.analytics="ANALYTICS",t.nielsen="NIELSEN",t.environment="ENVIRONMENT",t.context="CONTEXT",t.pageManager="PAGE_MANAGER",t.utag="UTAG",t.vidora="vidora",t.headerBidding="ad_header_bidding",t.abCookie="AB_COOKIE",t}(),c=function(){function d(){this.isHubPage=!1,this.pageKeywords="",this.adsDisabled=!1,this.tabLoaded=!1,this.search=ca.getSearchParams(),this.name=this.getEnvName(),this.pageUrl=window.location.href,this.domain=this.getDomain(),this.isHubPage=this.setIsHubPage(),this.pageKeywords=a.get(),this.browser=this.getBrowser(),this.adsDisabled=this.search.ads&&-1<this.search.ads.indexOf("disable")||!1,-1<ca.getDomain().indexOf(pa.KIDSNEWS)&&(this.adsDisabled=!0),this.abCookie=r.getInstance()}return d.prototype.visitorId=function(){return window.metrics&&window.metrics.s&&window.metrics.s.visitorID||""},d.prototype.brand=function(){return window.metrics&&window.metrics.s&&window.metrics.s.eVar2||""},d.prototype.getNewscorpauBrand=function(){var a=null===(t=window.newscorpau)||void 0===t?void 0:t.brand,t;if(void 0===a){var e=this.getDomain();(-1<pa.PLNN_SITES.indexOf(e)&&(a="metro"),-1<pa.BETA_SITES.indexOf(e)&&(a="metro"),-1<pa.SKY_SITES.indexOf(e)&&(a="skynews"),void 0===a)&&(a=e===pa.BODY_SOUL?"bodyandsoul":e===pa.KIDSPOT?"kidspot":e===pa.ESCAPE?"escape":e===pa.THE_AUSTRALIAN?"taus":"news")}return a},d.prototype.site=function(){return window.metrics&&window.metrics.s&&window.metrics.s.eVar3||""},d.prototype.network=function(){return window.metrics&&window.metrics.s&&window.metrics.s.eVar2||""},d.prototype.getDomain=function(){var a=(this.search.domain||window.location.hostname).replace(/(^(www|m|video|w|mobile|extra|beta|supercoach)\.|\.com(\.au)?$)/gi,"");a=(a=(a=(a=a.match(/^[\d\.]+$/)||"localhost"===a?"news":a).replace(/^sit|sit$/i,"").replace(/^\.|\.$/i,"")).replace(/^uat|uat$/i,"").replace(/^\.|\.$/i,"")).replace(/^pat|pat$/i,"").replace(/^\.|\.$/i,"");for(var e=pa.newsSites(),t=0;t<e.length;t++)if(0<=a.indexOf("."+e[t]+".")){a=e[t];break}return 0>e.indexOf(a)&&(a="news"),-1<pa.SKY_SITES.indexOf(a)&&(a="skynews"),a},d.prototype.setIsHubPage=function(){return ma.hasClass(document.body,"video")&&null!==window.location.href.match(/https:\/\/(.*)\.com\.au\/video\/id-(.*)(\/)?.*/)},d.prototype.isNewsHub=function(){return"news.com.au"===ua.getDomain(this)&&ma.hasClass(document.body,d.NEWS_VIDEO_TEMPLATE)},d.prototype.getPageType=function(e,t){var n=ca.getSearchParams(),a=t.view.element.getAttribute("vms-page-type")||(null==e?void 0:e.get("ad_pagetype"))||"";return a&&(a.toLowerCase().includes("story")||a.toLowerCase().includes("article")||a.toLowerCase().includes("amp")||a.toLowerCase().includes("comments"))?d.ARTICLE_PAGE_TYPE:a&&(a.toLowerCase().includes("homepage")||a.toLowerCase().includes("section")||a.toLowerCase().includes("gallery")||a.toLowerCase().includes("content")||a.toLowerCase().includes("digitaleditions")||a.toLowerCase().includes("searchresult")||a.toLowerCase().includes("product")||a.toLowerCase().includes("index")||a.toLowerCase().includes("home"))?d.INDEX_PAGE_TYPE:a&&a.toLowerCase().includes("video")?d.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE:(n.amp&&n.amp,d.ARTICLE_PAGE_TYPE)},d.prototype.isVaafca=function(e){var t=e.getService(ga.utag);return this.getPageType(t,e)===d.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE},d.prototype.isSky=function(){var t=this.getDomain();return-1<pa.SKY_SITES.indexOf(t)},d.prototype.isProd=function(){return-1<["prod","beta"].indexOf(this.name)},d.prototype.getEnvName=function(){var e="prod";-1<ca.getDomain().indexOf("news")&&-1<location.pathname.indexOf("/technology/gadgets")&&(e="beta");for(var t=0,n=pa.BETA_SITES,a;t<n.length;t++)if(a=n[t],-1<ca.getDomain().indexOf(a)){e="beta";break}for(var i=0,o=["dev","sit","pat","uat"],r;i<o.length;i++)if(r=o[i],-1<ca.getDomain().indexOf(r)){e=r;break}if(-1<ca.getDomain().indexOf("localhost")&&(e="dev"),-1<ca.getDomain().indexOf(d.SIT_URL_PREFIX)&&(e="sit"),this.search.env)switch(this.search.env){case"dev":case"sit":case"pat":case"uat":case"beta":e=this.search.env;break;default:e="prod";}return e},d.prototype.getBrowser=function(){return new n(window.navigator)},d.NEWS_VIDEO_TEMPLATE="video-template",d.SIT_URL_PREFIX="dev.resourcesssl.newscdn",d.ARTICLE_PAGE_TYPE="article",d.INDEX_PAGE_TYPE="index",d.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE="vaafca",d}(),s=function(){function t(){this.services={}}return t.prototype.get=function(t){return this.services[t]},t.prototype.register=function(n,e){this.services[n]=e},t}(),d=function(){function t(t){this.serviceProvider=t||new s}return t.prototype.getProvider=function(){return this.serviceProvider},t.prototype.getService=function(t){return this.serviceProvider.get(t)},t}(),p=(ia=function(n,e){return(ia=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(n,e)},function(a,e){function t(){this.constructor=a}ia(a,e),a.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}),m=function(a){function e(e){var i=a.call(this,e.getProvider())||this;return i.container=e,i}return p(e,a),e}(d),u=function(){function t(r){var m=this;this.utag_data=r;var t=ca.getSearchParams(),n=decodeURIComponent(t.utag)||null,i={};if(t.utag&&n)try{i=JSON.parse(n)}catch(t){console.log(t)}for(var o=function(t){a[t]=function(){return m.utag_data[t]}},a=this,s=0,c=Object.keys(r);s<c.length;s++)o(c[s]);for(var l=function(t){u[t]=function(){return i[t]}},u=this,d=0,p=Object.keys(i);d<p.length;d++)l(p[d])}return t.prototype.get=function(t){return"function"==typeof this[t]?this[t]():"string"==typeof this[t]?this[t]:void 0},t}(),g=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_=function(a){function e(e){var i=a.call(this,e)||this;return i.interval=500,i.limit=500,i.checkUtag(),i}return g(e,a),e.prototype.checkUtag=function(){var t=this;"object"==typeof window.utag_data?this.ready():(this.limit--,0<this.limit&&setTimeout(function(){t.checkUtag()},this.interval))},e.prototype.ready=function(){var t=new u(window.utag_data);this.container.getProvider().register(ga.utag,t),this.getService(ga.eventManager).trigger(this.container,"utag_ready")},e}(m),E=function(){function t(){}return t.parseEmbedCode=function(t){return /([0-9]{13})-([0-9]+)/g.test(t)?t.split(this.embedSplitter):[t]},t.embedSplitter="-",t}(),A=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),y=function(a){function e(e,o){var n=a.call(this,e)||this;return o&&(n.pluginName=o),n}return A(e,a),e}(m),v=function(){function t(){this.anId=t.anId}return t.anId=928981,t}(),C=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),S=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.init=!1,n}return C(e,a),e.prototype.getConfig=function(a){var e=new v,t=a.ima3&&a.ima3.adsRequest;return e.campId=(t?t.linearAdSlotWidth:"427")+"x"+(t?t.linearAdSlotHeight:"240"),e.chanId=window.ads_api&&window.ads_api.uname,e},e.prototype.setTrackingEvent=function(){var n=this,e=this.getService(ga.eventManager);e.addListener(this.container,"ima3-ads-manager-loaded",function(){!function(){if(!n.init&&!n.getService(ga.context).ssai){var e=n.container.bcPlayer();window.googleImaVansAdapter&&(window.googleImaVansAdapter.init(window.google,e.ima3.adsManager,e.el(),n.getConfig(e)),n.init=!0)}}()})},e.jsPath="//static.adsafeprotected.com/vans-adapter-google-ima.js",e.pluginName="PLUGIN_IAS",e}(y),h=function(){function t(){}return t.getCookie=function(a){for(var e=a+"=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var i=t[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""},t}(),T=function(){function t(t){this.element=t}return t.prototype.getElement=function(){return this.element},t.prototype.show=function(){this.element.style.display="block"},t.prototype.hide=function(){this.element.style.display="none"},t.prototype.html=function(t){this.element.innerHTML=t},t}(),I=function(){function t(){}return t.AAP="AAP",t.AdelaideNow="Adelaide Now",t.Advertising="Advertising",t.AP="Associated Press",t.BestRecipes="Best Recipes",t.BlinkTV="Blink TV",t.BodySoul="Body & Soul",t.BusinessSpectator="Business Spectator",t.Cairns="Cairns Post",t.Carsales="Carsales",t.Carsguide="Carsguies",t.CourierMail="Courier Mail",t.DailyTelegraph="Daily Telegraph",t.Delicious="Delicious",t.Escape="Escape",t.FOXSPORTS="Foxsports",t.FoxSportsPulse="Foxsports",t.Geelong="Geelong",t.Getty="Getty",t.GoldCoastBulletin="Gold Coast Bulletin",t.GQ="GQ",t.HeraldSun="Herald Sun",t.Homelife="Homelife",t.InsideOut="Inside Out",t.KidSpot="Kidspot",t.Leader="The Leader",t.Mercury="The Mercury",t.News="News.com.au",t.NewsLocal="News Local",t.NND="NND",t.NSD="NSD",t.NTNews="NT News",t.OLD_FOXSPORTS="Foxsports",t.Oovvuu_antidote="Oovvuu",t.Oovvuu_bbc="Oovvuu",t.Oovvuu_beamafilm="Oovvuu",t.Oovvuu_beyond="Oovvuu",t.Oovvuu_bloomberg="Oovvuu",t.Oovvuu_cnn="Oovvuu",t.Oovvuu_contentfilm="Oovvuu",t.Oovvuu_curious="Oovvuu",t.Oovvuu_endemol="Oovvuu",t.Oovvuu_escapade="Oovvuu",t.Oovvuu_flame="Oovvuu",t.Oovvuu_flashback="Oovvuu",t.Oovvuu_invisible="Oovvuu",t.Oovvuu_jansonmedia="Oovvuu",t.Oovvuu_momedia="Oovvuu",t.Oovvuu_other="Oovvuu",t.Oovvuu_ovation="Oovvuu",t.Oovvuu_pinnacle="Oovvuu",t.Oovvuu_reel="Oovvuu",t.Oovvuu_ronin="Oovvuu",t.Oovvuu_sbs="Oovvuu",t.Oovvuu_thefullbox="Oovvuu",t.Oovvuu_umbrella="Oovvuu",t.Oovvuu_viavision="Oovvuu",t.Oovvuu_vice="Oovvuu",t.PerthNow="Perth Now",t.Quest="Quest",t.REUTERS="Reuters",t.Rightster_barcroft_media="Rightster",t.Rightster_celebrity_wire="Celebrity Wire",t.Rightster_future_tv="Rightster",t.Rightster_hollyscoop="Hollyscoop",t.Rightster_moda_mob="Rightster",t.Rightster_newsy="Rightster",t.Rightster_ruptly_tv="Rightster",t.Rightster_splash_news="Rightster",t.Rightster_the_savory="The Savory",t.Rightster_unscriptd="Rightster",t.Rightster_video_fashion="Rightster",t.Rightster_viral_spiral="Rightster",t.Rightster_wochit="Rightster",t.Rightster_wochit_uk="Rightster",t.SKY="Sky News",t.Splash="Splash",t.Storyful="Storyful",t.Taste="Taste",t.TEN="Ten",t.TheAustralian="The Australian",t.TheAdvertiser="The Advertiser",t.Townsville="Townsville Bulletin",t.Vogue="Vogue",t.WeeklyTimes="Weekly Times Now",t.Whimn="Whimn",t.Wibbitz="Wibbitz",t.Wochit="Wochit",t.WSJ="Wall Street Journal",t}(),N=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),b=function(a){function r(e,r){var d=a.call(this,document.createElement("div"))||this;d.manuallySwitchedOn=!1,d.container=r,d.view=e;var n=d.container.getService(ga.environment);if(r.getService(ga.environment).browser.isMobile()){if(!n.isSky())return d;ma.addClass(d.view.settingsContainer,"vms-mobile-autoplay")}var i=d.container.getService(ga.eventManager);i.addSingleCustomListener(d.container,Mo.BC_READY,function(){d.populateView()});var p=function(){ma.hasClass(d.element,"autoplay-toggle-hidden")||(ma.addClass(d.element.parentElement,"no-autoplay-toggle"),ma.addClass(d.element,"autoplay-toggle-hidden"))};return i.addCustomListener(d.container,Ke.EVENT_USER_STATUS,function(a){var e=d.container.getService(ga.environment),t=e.browser.isMobile()||e.browser.isIOS(),n=d.container.getService(ga.utag),i=e.getPageType(n,d.container);i!==c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE&&i!==c.INDEX_PAGE_TYPE||t||-1!==ca.getDomain().indexOf(pa.TASTE)?t&&!e.isSky()&&p():a!=Ke.USER_SUBSCRIBER&&a!=Ke.USER_REGISTERED||p()}),d}return N(r,a),r.prototype.populateView=function(){this.currentStatus=Ke.USER_ANONYMOUS,ma.addClass(this.view.settingsContainer,r.CSS_ANONYMOUS),this.label=document.createElement("div"),this.label.className="settings-label",this.label.innerHTML="Video Autoplay",this.switchContainer=document.createElement("div"),this.switchContainer.className="switch",this.switch=document.createElement("input"),this.switch.setAttribute("type","checkbox"),this.switch.className="vp_toggle",this.switchContainer.appendChild(this.switch);var t=We.get(this.container);this.switch.checked=t.autoplayEnabled,this.autoplayOff=document.createElement("div"),this.autoplayOff.className="rp-settings-premium-label",this.autoplayOff.innerHTML="Log in",this.switchLabel=document.createElement("label"),this.switchContainer.appendChild(this.switchLabel),this.element.appendChild(this.label),ma.addClass(this.element,"rp-autoplay-container"),this.element.appendChild(this.autoplayOff),this.element.appendChild(this.switchContainer),this.premiumContainer=document.createElement("div");var e=document.createElement("div");e.innerHTML="Premium Feature",e.className="rp-premium-title",this.container.getService(ga.environment).browser.isMobile()&&(this.backLink=document.createElement("div"),this.backLink.innerHTML="Video Autoplay",this.backLink.className="rp-show-premium-back",this.premiumContainer.appendChild(this.backLink));var n=document.createElement("div"),a=ca.getDomain(),i=a&&-1!==a.indexOf(pa.THE_ADVERTISER)?I.TheAdvertiser:a;n.innerHTML="Switching off the video autoplay is available only to "+i+" subscribers. If you are a subscriber, please log in and access the video settings again.",n.className="rp-premium-description",this.premiumContainer.appendChild(e),this.premiumContainer.appendChild(n),this.premiumContainer.style.display="none",this.element.appendChild(this.premiumContainer)},r.prototype.onRegistered=function(){var t=We.get(this.container);if(this.currentStatus!==Ke.USER_REGISTERED){this.view.hidePremium(),this.currentStatus=Ke.USER_REGISTERED,ma.removeClass(this.view.settingsContainer,r.CSS_ANONYMOUS),ma.removeClass(this.view.settingsContainer,r.CSS_SUBSCRIBED),ma.addClass(this.view.settingsContainer,r.CSS_REGISTERED);var e=t.autoplayDisabledExpiry;if(e)e<=new Date&&(this.switch.checked=!0,t.autoplayEnabled=!0);else{var n=new Date;n.setMonth(n.getMonth()+1),t.autoplayDisabledExpiry=n}!1===t.autoplayEnabled&&t.save(),this.switch.checked=t.autoplayEnabled}},r.prototype.onSubscribed=function(){if(this.currentStatus!==Ke.USER_SUBSCRIBER){this.view.hidePremium(),this.currentStatus=Ke.USER_SUBSCRIBER,ma.removeClass(this.view.settingsContainer,r.CSS_ANONYMOUS),ma.removeClass(this.view.settingsContainer,r.CSS_REGISTERED),ma.addClass(this.view.settingsContainer,r.CSS_SUBSCRIBED);var t=We.get(this.container);this.switch.checked=t.autoplayEnabled,t.autoplayDisabledExpiry=new Date("2119")}},r.prototype.onLoggedOut=function(){this.currentStatus!==Ke.USER_ANONYMOUS&&(this.view.hidePremium(),this.currentStatus=Ke.USER_ANONYMOUS,ma.removeClass(this.view.settingsContainer,r.CSS_SUBSCRIBED),ma.removeClass(this.view.settingsContainer,r.CSS_REGISTERED),ma.addClass(this.view.settingsContainer,r.CSS_ANONYMOUS))},r.CSS_ANONYMOUS="rp-autoplay-anonymous",r.CSS_REGISTERED="rp-autoplay-registered",r.CSS_SUBSCRIBED="rp-autoplay-subscribed",r}(T),w=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),P=function(a){function e(e,o){var n=a.call(this,document.createElement("div"))||this;n.plugin=o,n.label=document.createElement("div"),n.label.className="settings-label",n.label.innerHTML="Video Quality",n.element.appendChild(n.label),n.element.className="video-quality-container",n.currentQuality=document.createElement("div"),n.currentQuality.className="video-quality",n.currentQuality.innerHTML="Auto",n.element.appendChild(n.currentQuality),n.resolutionContainer=document.createElement("div"),n.resolutionContainer.className="vms-resolutions",n.backButton=document.createElement("button"),n.backButton.className="vms-resolution vms-resolution-back",n.backButton.innerHTML="Back",n.highButton=document.createElement("button"),n.highButton.className="vms-resolution vms-resolution-high",n.highButton.innerHTML="High",n.mediumButton=document.createElement("button"),n.mediumButton.className="vms-resolution vms-resolution-medium",n.mediumButton.innerHTML="Medium",n.lowButton=document.createElement("button"),n.lowButton.className="vms-resolution vms-resolution-low",n.lowButton.innerHTML="Low",n.resolutionContainer.appendChild(n.backButton),n.resolutionContainer.appendChild(n.highButton),n.resolutionContainer.appendChild(n.mediumButton),n.resolutionContainer.appendChild(n.lowButton);var i=document.createElement("div");return i.className="arrow",n.resolutionContainer.appendChild(i),n.container=e,n}return w(e,a),e.prototype.attachResolutions=function(t){t.appendChild(this.resolutionContainer)},e.prototype.refreshQualityLabel=function(){var t="Auto";ma.removeClass(this.plugin.view.highButton,"active"),ma.removeClass(this.plugin.view.mediumButton,"active"),ma.removeClass(this.plugin.view.lowButton,"active"),this.plugin.high.selected&&(t=this.plugin.high.label,ma.addClass(this.plugin.view.highButton,"active")),this.plugin.medium.selected&&(t=this.plugin.medium.label,ma.addClass(this.plugin.view.mediumButton,"active")),this.plugin.low.selected&&(t=this.plugin.low.label,ma.addClass(this.plugin.view.lowButton,"active")),this.currentQuality.innerHTML=""+t},e}(T),L=function(){function n(){}return n.get=function(){return localStorage.getItem(n.key)},n.set=function(e){localStorage.setItem(n.key,e)},n.key="vms.rp.quality",n}(),O=function(){function t(a,o,t,n){this.selected=!1,this.playlistIndex=a,this.width=o,this.height=t,this.bandwidth=n}return t.prototype.compare=function(t){return this.height>t.height?1:-1},t.prototype.select=function(){return this.selected=!0,L.set(this.label),this.playlistIndex},t}(),f=function(){function t(){}return t.AUTOPLAY="event35",t.CLICK_TO_PLAY="event36",t.MUTE="event37",t.FULLSCREEN_CHANGE="event38",t.ONSCROLL_HIDDEN="event39",t.COUNTDOWN_PAUSED="event41",t.BREACH_DISPLAYED="event292",t.COUNTDOWN_PAUSED_IN_PLAYLIST="event62",t.AUTOPLAY_TURNED_OFF="event42",t.AUTOPLAY_TURNED_ON="event43",t.SOCIAL_SHARING="event46",t.SELECT_PLAYLIST="event47",t.WATCH_AGAIN="event48",t.UNMUTE="event51",t.AUTOPLAY_ALLOWED="event52",t.AD_FAILED="event55",t.AUTOPLAY_BLOCKED="event54",t.ADBLOCK_DETECTION_MISMATCH="event57",t.STICKY_PLAYER_CLOSED="event58",t.AD_SKIPPED="event60",t.AD_FAILED_LOADING="event149",t.VIDEO_QUALITY_CHANGED="event59",t.CC_ON="event147",t.CC_OFF="event148",t.SHOW_PLAYLIST="event275",t.LIVEWORM_THUMBSUP="event293",t.LIVEWORM_THUMBSDOWN="event294",t}(),R=function(T,I){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(void 0===I||isNaN(I))throw Error("maxHeight is required");var n="string"==typeof T?document.querySelectorAll(T):T;if(n){var i=t.character||"&mldr;",r=t.classname||"js-shave",o="boolean"!=typeof t.spaces||t.spaces,a=t.charclassname||"js-shave-char",s="<span class=\"".concat(a,"\">").concat(i,"</span>");"length"in n||(n=[n]);for(var c=0;c<n.length;c+=1){var l=n[c],u=l.style,d=l.querySelector(".".concat(r)),p=void 0===l.textContent?"innerText":"textContent";d&&(l.removeChild(l.querySelector(".".concat(a))),l[p]=l[p]);var h=l[p],m=o?h.split(" "):h;if(!(2>m.length)){var v=u.height;u.height="auto";var N=u.maxHeight;if(u.maxHeight="none",l.offsetHeight<=I)u.height=v,u.maxHeight=N;else{for(var y=m.length-1,g=0,A=void 0;g<y;)A=g+y+1>>1,l[p]=o?m.slice(0,A).join(" "):m.slice(0,A),l.insertAdjacentHTML("beforeend",s),l.offsetHeight>I?y=A-1:g=A;l[p]=o?m.slice(0,y).join(" "):m.slice(0,y),l.insertAdjacentHTML("beforeend",s);var _=o?" ".concat(m.slice(y).join(" ")):m.slice(y),E=document.createTextNode(_),C=document.createElement("span");C.classList.add(r),C.style.display="none",C.appendChild(E),l.insertAdjacentElement("beforeend",C),u.height=v,u.maxHeight=N}}}}},D=function(){function t(){}return t.formatDuration=function(n){var e=da(n/3600),t=da(n%3600/60),a=da(n%60);return""+(e?e.toString().padStart(2,"0")+":":"")+t.toString().padStart(2,"0")+":"+a.toString().padStart(2,"0")},t.truncate=function(a,i){if(!a||""===a)return"";var t=a;return a.length>i&&(t=a.substring(0,i-5)+"..."),t},t.truncateDescription=function(a,e,t){void 0===t&&(t=!0),t?setTimeout(function(){return R(a,e)},0):R(a,e)},t}(),M=function(){function l(){this.trendingFetched=!1,this.relatedFetched=!1}return l.prototype.set=function(n,e){this.capiData=n,this.container=e},l.prototype.getPoster=function(){var a="",e=this.container.view.module.moduleContent.getElementsByClassName("poster");if(0<e.length){var t=e[0].getElementsByTagName("img");0<t.length&&(a=t[0].src)}return a||this.capiData.poster},l.prototype.decorateContainer=function(){var e=this,t=this.getPoster(),n=this.container.getService(ga.eventManager);this.container.view.element.style.background="black";var i=this.container.getService(ga.context);i.firstPlay?(this.container.view.element.style.background="url("+t+") no-repeat",this.container.view.element.style["background-size"]="contain"):(this.container.bcPlayer().el().style.display="none",n.addMultipleListener(this.container,["loadedmetadata","error","loadstart"],function(){e.container.bcPlayer().el().style.display="block"}));var r=this.container.getService(ga.environment);if(!r.isHubPage&&!r.isNewsHub()&&!i.forceHubStyle()){var o=document.createElement("h3");o.className="heading",o.innerHTML=this.capiData.title+"<span class=\"time\">"+D.formatDuration(this.capiData.duration/1e3)+"</span>",this.container.view.module.moduleHeader.innerHTML="";var a=document.createElement("div");a.className="description",a.innerHTML=this.capiData.caption}this.container.bcPlayer()?(this.container.bcPlayer().poster(t),this.container.view.element.style.background="url("+l.BLACK_BG+") no-repeat",this.container.view.element.style["background-size"]="contain"):n.addListener(this.container,"ready",function(){e.container.bcPlayer().poster(t),e.container.view.element.style.background="url("+l.BLACK_BG+") no-repeat",e.container.view.element.style["background-size"]="contain"}),n.trigger(this.container,l.CAPI_FETCHED,this.capiData),0<this.capiData.cuePoints.length&&this.container.view.module.moduleChapters&&this.container.view.module.moduleChapters.appendChild(this.getChapters())},l.prototype.getChapters=function(){var e=this,t=document.createElement("div");t.className=""+l.CHAPTERS_CSS;for(var s=document.createElement("ul"),n=function(t){if(t.type===l.CUEPOINT_CODE&&t.metadata.type===l.CUEPOINT_CHAPTER){var n=document.createElement("li"),a=document.createElement("a");a.innerHTML=t.name,ma.onClick(a,function(){e.container.bcPlayer().currentTime(t.time)}),n.appendChild(a),s.append(n)}},i=0,o=this.capiData.cuePoints;i<o.length;i++)n(o[i]);return t.appendChild(s),t},l.prototype.handleRelated=function(e){var t=this;this.relatedFetched=!0,e=e.filter(function(n){return n.platformId!=t.container.bcInfo.id});var n=this.container.getService(ga.eventManager);this.container.ready?(n.trigger(this.container,l.CAPI_RELATED_FETCHED,e),this.container.log("CAPI_RELATED_FETCHED-ready",e,this.container.ready)):n.addSingleCustomListener(this.container,Mo.BC_READY,function(){n.trigger(t.container,l.CAPI_RELATED_FETCHED,e),t.container.log("CAPI_RELATED_FETCHED-delayed",e)}),this.onRecommendationsFetched()},l.prototype.handleTrending=function(e){var t=this;this.trendingFetched=!0,e=e.filter(function(n){return n.platformId!=t.container.bcInfo.id});var n=this.container.getService(ga.eventManager);this.container.ready&&n.trigger(this.container,l.CAPI_TRENDING_FETCHED,e),this.onRecommendationsFetched()},l.prototype.onRecommendationsFetched=function(){this.trendingFetched&&this.relatedFetched&&this.container.getService(ga.eventManager).trigger(this.container,l.CAPI_RECOMMENDATIONS_FETCHED)},l.CAPI_FETCHED="CAPI_FETCHED",l.CAPI_RELATED_FETCHED="CAPI_RELATED_FETCHED",l.CAPI_TRENDING_FETCHED="CAPI_TRENDING_FETCHED",l.CAPI_RECOMMENDATIONS_FETCHED="CAPI_RECOMMENDATIONS_FETCHED",l.BLACK_BG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IiB2aWV3Qm94PSIwIDAgNjQ5IDM2NSIgd2lkdGg9IjY0OSIgaGVpZ2h0PSIzNjUiPjxkZWZzPjxwYXRoIGQ9Ik0wIDBMNjQ5IDBMNjQ5IDM2NUwwIDM2NUwwIDBaIiBpZD0iYXZrQlpaNGtDIj48L3BhdGg+PC9kZWZzPjxnPjxnPjxnPjx1c2UgeGxpbms6aHJlZj0iI2F2a0JaWjRrQyIgb3BhY2l0eT0iMSIgZmlsbD0iIzAwMDAwMCIgZmlsbC1vcGFjaXR5PSIxIj48L3VzZT48L2c+PC9nPjwvZz48L3N2Zz4=",l.CHAPTERS_CSS="vms-chapters",l.CHAPTERS_CONTAINER_ATTRIBUTE="vms-chapters-target",l.CUEPOINT_CODE="CODE",l.CUEPOINT_CHAPTER="chapter",l}(),k=function(){this.element=document.createElement("div"),this.element.className="vjs-playlist-control";var t=document.createElement("div");t.className="vjs-playlist-control-inner",this.element.appendChild(t)},B=function(){function a(){}return a.get=function(){for(var e=document.querySelectorAll("script[src$=\""+a.SCRIPT_NAME+"\"]"),t="",n=e.length-1,i;0<=n;--n)if(i=e[n].getAttribute("src").match("(^(.*)/)"+a.SCRIPT_NAME),i&&1<i.length){t=i[1];break}return t},a.SCRIPT_NAME="player.js",a}(),V=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),U=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.hasDurationMarker=!1,e.durationMarker=null,e}return V(e,n),e.prototype.generateDurationMarker=function(){this.durationMarker=document.createElement("span")},e.prototype.appendDurationMarker=function(n,e){0>=e?(this.durationMarker||this.generateDurationMarker(),n.appendChild(this.durationMarker)):n.innerHTML=D.formatDuration(e/1e3)},e}(T),H=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),x=function(a){function d(e,s,n){var i=a.call(this,document.createElement("li"))||this;if(i.visible=!1,i.type="related",i.recommendationsContainer=n,i.type=n.type,i.capiVideo=s,i.container=e,i.capiVideo.fetched)i.displayItem();else{i.image=document.createElement("div"),i.image.className="image",i.image.setAttribute("att","");var r=document.createElement("img");r.src=B.get()+"img/fallback.jpg",r.width=100,r.style.height="100% !important",i.image.appendChild(r),i.element.appendChild(i.image),i.title=document.createElement("div"),i.title.className="title",i.loader=document.createElement("p"),i.loader.innerHTML="...",i.recommendationsContainer.container.getService(ga.environment).browser.isMobile()?i.image.appendChild(i.loader):i.title.appendChild(i.loader),i.element.appendChild(i.title)}return i}return H(d,a),d.prototype.setLoading=function(){this.loader.className="img-loader",this.loader.innerHTML=""},d.prototype.displayItem=function(){var t=this.capiVideo;if(t&&t.title){this.element.innerHTML="",this.element.setAttribute("data-title",t.title),this.element.setAttribute("data-description",t.caption),this.element.setAttribute("data-platformid",t.platformId),this.element.setAttribute("data-capi-id",t.id),this.id=t.platformId;var e=document.createElement("div");e.className="border-gradient",this.image=document.createElement("div"),this.image.className="image",this.container.view.element.offsetWidth<=d.MEDIUM_VIDEO_CONTAINER?this.image.setAttribute("att","medium-scale"):this.image.setAttribute("att","");var n=document.createElement("img");n.src=t.thumbnail||"",n.onload=function(){n.naturalHeight>n.naturalWidth&&n.setAttribute("class","thumb-portrait")},n.style.height="100% !important",n.onerror=function(){n.getAttribute("data-errored")||(n.setAttribute("data-errored","errored"),n.className="img-error",n.src=B.get()+"img/fallback.jpg",n.width=100,n.style.height="100% !important")},this.img=n;var a=document.createElement("div");a.className="rp-play",this.image.appendChild(a),this.image.appendChild(n),this.play=a,this.title=document.createElement("div"),this.title.className="title";var i=document.createElement("p");i.innerHTML=D.truncate(t.title,d.TEXT_LIMIT),this.title.appendChild(i);var o=document.createElement("p");o.className="duration",this.appendDurationMarker(o,t.duration),this.cancel=document.createElement("div"),this.cancel.className="rp-cancel-mobile hidden-node",this.cancel.innerHTML="Cancel",this.image.appendChild(o),this.element.appendChild(this.image);var r=this.container.getService(ga.environment);-1<pa.PREMIUM_VIDEO_SITES.indexOf(r.getDomain())&&this.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM&&(this.premium=document.createElement("div"),this.premium.className="vms-premium-tag",this.premium.innerText="PREMIUM",this.element.appendChild(this.premium)),this.element.appendChild(this.title),this.element.appendChild(this.cancel),this.element.appendChild(e)}},d.MEDIUM_VIDEO_CONTAINER=472,d.TEXT_LIMIT=75,d}(U),Y=function(){function a(){}return a.getVisibilityRate=function(p,e){var t=e||document.documentElement||document.body.parentNode;if(p.getBoundingClientRect){var n=p.getBoundingClientRect(),i=n.left||-1,r=n.top||-1,o=n.width||p.offsetWidth||1,a=n.height||p.offsetHeight||1,s=window.innerWidth||t.offsetWidth,c=window.innerHeight||t.offsetHeight,l=(la(i-0,0)+la(0+s-(i+o),0)+o)/o;0>l?l=0:1<l&&(l=1);var m=(la(r-0,0)+la(0+c-(r+a),0)+a)/a;return 0>m?m=0:1<m&&(m=1),100*(l*m)}},a.isVisibleInElement=function(a,e){var t=e.getBoundingClientRect().height,n=e.getBoundingClientRect().top,i=a.getBoundingClientRect().height-10,r=a.getBoundingClientRect().top;return r>n&&r+i<n+t},a.isVisibleInHorizontalViewport=function(e,t){return a.getVisibilityRate(e,t)>a.MOBILE_VISIBILITY_RATE},a.MOBILE_VISIBILITY_RATE=10,a}(),G=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),W=function(a){function o(e){var o=a.call(this,document.createElement("div"))||this;o.visible=!0,o.type="related",o.container=e,o.element.className="list-wrapper",o.labelContainer=document.createElement("div"),o.labelContainer.className="upnext-label-container",o.labelContainer.id="vms-upnext-label-container";var n=document.createElement("label");n.innerHTML="Related content",o.label=n,o.labelContainer.appendChild(n);var i=document.createElement("div");return i.innerHTML="UP NEXT",i.className="rp-upnext-label",o.element.appendChild(i),o.subLabel=i,o.list=document.createElement("ul"),o.list.className="recommendations-list",o.htmlContainer=document.createElement("div"),o.htmlContainer.appendChild(o.list),o.element.appendChild(o.htmlContainer),o.items=[],o}return G(o,a),o.prototype.checkItemsVisibility=function(){for(var t=this.container.getService(ga.eventManager),e=0,n=this.items,a;e<n.length;e++)a=n[e],Y.isVisibleInElement(a.element,this.container.view.wrapper)?a.visible||(a.visible=!0,t.trigger(this.container,o.EVENT_ITEM_VIEWPORT_VISIBLE,a)):a.visible&&(a.visible=!1,t.trigger(this.container,o.EVENT_ITEM_VIEWPORT_NOT_VISIBLE,a.capiVideo))},o.prototype.setItems=function(t){for(var l=this,e=0,n=t;e<n.length;e++){var i=n[e],r=new x(this.container,i,this);this.items.push(r),this.list.appendChild(r.element)}if(0<this.items.length){var a=this.container.getService(ga.eventManager);this.element.onscroll=function(){if(l.checkItemsVisibility(),l.container.player.getBCPlayer().ended()&&l.items&&0<l.items.length){var t=l.items[0];Y.getVisibilityRate(t.element)<o.VISIBILITY_THRESHOLD?a.trigger(l.container,o.EVENT_ITEM_NOT_VISIBLE):a.trigger(l.container,o.EVENT_ITEM_VISIBLE)}}}this.htmlContainer.style.overflow="auto",this.htmlContainer.className="rp-recommendations-container"},o.prototype.refresh=function(t){this.label.innerHTML=t?"Also in "+t:"See also..."},o.prototype.toggleCurrent=function(n){var e=this.container.getService(ga.context);e.currentRecommendationItem&&(e.previousRecommendationItem=e.currentRecommendationItem),e.currentRecommendationItem=n},o.prototype.handleVisibility=function(){this.visible?(ma.removeClass(this.element,"disabled"),ma.removeClass(this.label,"disabled")):(ma.addClass(this.element,"disabled"),ma.addClass(this.label,"disabled"))},o.VISIBILITY_THRESHOLD=15,o.EVENT_ITEM_VISIBLE="EVENT_ITEM_VISIBLE",o.EVENT_ITEM_NOT_VISIBLE="EVENT_ITEM_NOT_VISIBLE",o.EVENT_ITEM_VIEWPORT_VISIBLE="EVENT_ITEM_VP_VISIBLE",o.EVENT_ITEM_VIEWPORT_NOT_VISIBLE="EVENT_ITEM_VP_NOT_VISIBLE",o}(T),F=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),K=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.visible=!1,e.type="trending",e}return F(e,n),e.prototype.setViewElements=function(){this.list.className="",this.list.className="trending-list",this.element.removeChild(this.subLabel);var t=document.createElement("label");t.innerHTML="Trending now",t.className="disabled",this.view.recommendations.trendingLabel=t,this.view.recommendations.labelContainer.appendChild(t),ma.addClass(this.element,"rp-trending-list"),this.view.element.appendChild(this.element),ma.addClass(this.element.parentElement,"rp-trending")},e.prototype.setViewEvents=function(){var t=this;this.view.recommendations.trendingLabel.onclick=function(){(t.visible=!0,t.view.recommendations.visible=!t.visible,t.handleVisibility(),t.view.recommendations.handleVisibility(),ma.removeClass(t.view.recommendations.trendingLabel,"disabled"),t.view.recommendations.items[0])&&t.container.getService(ga.eventManager).trigger(t.container,W.EVENT_ITEM_NOT_VISIBLE)},this.view.recommendations.label.onclick=function(){(t.visible=!1,t.view.recommendations.visible=!t.visible,t.handleVisibility(),t.view.recommendations.handleVisibility(),ma.addClass(t.view.recommendations.trendingLabel,"disabled"),t.view.recommendations.items[0])&&t.container.getService(ga.eventManager).trigger(t.container,W.EVENT_ITEM_VISIBLE)}},e}(W),j=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),X=function(a){function e(e){var i=a.call(this,document.createElement("div"))||this;return i.element.className="vjs-playlist",i.playlistControls=new k,i.element.appendChild(i.playlistControls.element),i.recommendations=new W(e),i.element.appendChild(i.recommendations.labelContainer),i.trending=new K(e),i.element.appendChild(i.recommendations.element),i.container=e,i}return j(e,a),e.prototype.showCTA=function(){ma.addClass(this.container.view.element,"vms-playlist-loaded"),this.show()},e.prototype.showList=function(){var t=this;setTimeout(function(){t.recommendations.checkItemsVisibility()},1),ma.addClass(this.element,"active"),ma.removeClass(this.recommendations.element,"hidden-node"),ma.removeClass(this.trending.element,"hidden-node"),this.recommendations.getElement().scrollTop=0},e.prototype.hideList=function(){-1<this.element.className.indexOf(" active")&&(this.element.className=this.element.className.replace(" active","")),this.recommendations.label.click()},e}(T),z=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Q=function(a){function e(){var t=a.call(this,document.createElement("ul"))||this;return t.element.className=e.MAIN_CSS_CLASS,t}return z(e,a),e.MAIN_CSS_CLASS="vms-playlist",e}(T),$=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z=function(a){function e(e){var i=a.call(this,document.createElement("div"))||this;return i.element.className="vms-centered-element",i.subElement=e,i.element.appendChild(i.subElement),i}return $(e,a),e.prototype.getElement=function(){return this.subElement},e.prototype.show=function(){this.element.style.display="block"},e.prototype.hide=function(){this.element.style.display="none"},e.prototype.html=function(t){this.subElement.innerHTML=t},e}(T),q=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),J=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.getElement().className=e.MAIN_CSS_CLASS,t.spinner=document.createElement("div"),t.spinner.className="spinner-icon",t.getElement().appendChild(t.spinner),t}return q(e,a),e.MAIN_CSS_CLASS="vms-playlist-spinner",e}(Z),ee=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),te=function(s){function e(t){var n=s.call(this,document.createElement("div"))||this;n.container=t,n.element.className=e.MAIN_CSS_CLASS;var i=document.createElement("div");i.className="container-header",n.titleContainer=document.createElement("div"),n.titleContainer.className="container-title";var r=document.createElement("span");r.className="header-title",r.innerHTML=e.TITLE_TEXT,n.titleContainer.appendChild(r);var o=document.createElement("div");return o.className="header-toggle toggle-down",n.titleContainer.appendChild(o),i.appendChild(n.titleContainer),n.body=document.createElement("div"),n.body.className="container-body",n.body.appendChild(new J().element),n.element.appendChild(i),n.element.appendChild(n.body),n}return ee(e,s),e.prototype.resize=function(){this.element.style.width=this.container.view.element.offsetWidth+"px"},e.MAIN_CSS_CLASS="vms-playlist-container playlist-inactive",e.TITLE_TEXT="View more related videos",e}(T),ne=t(1),ae=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ie=function(a){function i(e,o){var n=a.call(this,e)||this;return n.expanded=!1,n.view=o,n.setEvents(),n}return ae(i,a),i.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,Mo.BC_READY,function(){var e=a.container.getService(ga.environment);"json"===a.container.view.element.getAttribute(Ce.EXT_RECOMMENDATIONS_TYPE)||e.isNewsHub()||a.container.view.wrapper.appendChild(a.view.element)}),e.addListener(this.container,"timeupdate",function(){if(!a.expanded&&ma.hasClass(a.view.element,i.CLASS_INACTIVE)){var e=a.container.bcPlayer();e.duration()-e.currentTime()<i.TIME_LEFT_BEFORE_EXPAND&&(a.showPlaylist(),a.expanded=!0)}}),ma.onClickOnly(this.view.titleContainer,function(){a.showPlaylist()}),this.setResizeObserver()},i.prototype.showPlaylist=function(){(ma.toggleClass(this.view.element,i.CLASS_INACTIVE),ma.toggleClass(this.view.element,i.CLASS_ACTIVE))&&(this.getService(ga.analytics).omniture.track([f.SHOW_PLAYLIST]),this.getService(ga.eventManager).trigger(this.container,ge.MOBILE_PLAYLIST_SHOWN))},i.prototype.setResizeObserver=function(){var t=this;try{new ne.ResizeObserver(function(){t.view.resize()}).observe(this.container.view.element)}catch(e){window.addEventListener("orientationchange",function(){t.view.resize()}),window.addEventListener("resize",function(){t.view.resize()})}},i.TIME_LEFT_BEFORE_EXPAND=10,i.CLASS_INACTIVE="playlist-inactive",i.CLASS_ACTIVE="playlist-active",i}(m),oe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),re=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return oe(e,n),e.prototype.isApplicable=function(n){var e=this.getService(ga.environment).browser.isMobile();return n&&(e=e||null!==this.container.view.element.getAttribute("vms-sticky-target")),e},e}(y),se=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),le=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable()&&(n.view=new te(t),n.events=new ie(t,n.view)),n}return se(e,a),e.prototype.attach=function(t){this.view.getElement().appendChild(t)},e.prototype.setContent=function(t){this.view.body.innerHTML="",this.view.body.appendChild(t),this.getService(ga.eventManager).trigger(this.container,ge.CHECK_ITEM_VISIBILITY)},e.pluginName="MOBILE_PLAYLIST_CONTAINER",e}(re),de=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ce=function(n){function l(){var e=null!==n&&n.apply(this,arguments)||this;return e.getMoreRelated=!0,e}return de(l,n),l.prototype.onFetched=function(t,e){var n=this;t=t.slice(0,l.PAGE_SIZE);var i=this.getService(ga.capiDecorate),r=function(){n.container.log("unknown related type")},o=this.getService(ga.context);e===l.TYPE_RELATED?r=function(t){i.handleRelated(t),o.recommendationsType&&"similars"===o.recommendationsType?t.length-1<l.PAGE_SIZE&&(n.getMoreRelated=!1):t.length<l.PAGE_SIZE&&(n.getMoreRelated=!1)}:e===l.TYPE_TRENDING?r=function(t){i.handleTrending(t)}:void 0;r(t)},l.prototype.fetchRelated=function(t){var a=this,n=this.getService(ga.capi),d=this.getService(ga.environment);-1===this.container.view.cssClasses.indexOf("vms-no-playlist")?n.fetchRelatedVideos(t.sectionId,d.getDomain(),this.container).then(function(t){n.augment(t).then(function(e){var n=ua.removeDuplicates(e.concat(t)),i=d.getDomain();-1===pa.PREMIUM_VIDEO_SITES.indexOf(i)&&(n=ua.removePremiumVideos(n)),0<n.length&&a.onFetched(n,l.TYPE_RELATED)}).catch(function(){a.onFetched(t,l.TYPE_RELATED)})}).catch(function(){a.container.getService(ga.eventManager).trigger(a.container,l.NO_RECOMMENDATIONS_FOUND),a.getMoreRelated=!1,a.container.log("No results in Fetch Related")}):this.container.getService(ga.eventManager).trigger(this.container,l.NO_RECOMMENDATIONS_FOUND)},l.prototype.fetchTrendingVideos=function(t,e){var s=this,n=this.getService(ga.environment),i=this.getService(ga.vidora);if((n.browser.isDesktop()||n.browser.isIpad())&&i&&i.config.isEnabled()){var o=this.getService(ga.capi);-1===this.container.view.cssClasses.indexOf("vms-no-playlist")&&o.fetchTrendingVideos(t,e).then(function(t){o.augment(t,l.TYPE_TRENDING).then(function(e){s.container.log("[RELATED]","[TRENDING]",t,e),s.onFetched(e,l.TYPE_TRENDING)}).catch(function(){s.onFetched([],l.TYPE_TRENDING)})}).catch(function(){s.onFetched([],l.TYPE_TRENDING)})}},l.PAGE_SIZE=7,l.TYPE_RELATED="related",l.TYPE_TRENDING="trending",l.NO_RECOMMENDATIONS_FOUND="vms-no-recommendations",l}(m),pe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),me=function(a){function e(e,o){var n=a.call(this,e)||this;return n.playlistItems=[],n.view=o,n.setEvents(),n}return pe(e,a),e.prototype.setEvents=function(){var s=this,e=this.getService(ga.eventManager),t=this.container.getService(ga.environment);e.addSingleCustomListener(this.container,Mo.BC_READY,function(){"json"!==s.container.view.element.getAttribute(Ce.EXT_RECOMMENDATIONS_TYPE)&&s.container.view.wrapper.appendChild(s.view.element)}),e.addSingleCustomListener(this.container,Ce.EXT_RECOMMENDATIONS_MOBILE_EVENT,function(){var e=s.container.getPluginInstance(he.pluginName).view.recommendations.items.map(function(t){return t.capiVideo});e&&s.setRecommendations(e)}),e.addCustomListener(this.container,ce.NO_RECOMMENDATIONS_FOUND,function(){var e=s.container.getPluginInstance(le.pluginName);ma.addClass(e.view.element,"hidden-node")}),this.view.element.onscroll=function(){e.trigger(s.container,ge.CHECK_ITEM_VISIBILITY)},e.addCustomListener(this.container,ge.MOBILE_PLAYLIST_SHOWN,function(){e.trigger(s.container,ge.CHECK_ITEM_VISIBILITY)}),e.addListener(this.container,"ads-ad-started",function(){var n=s.getService(ga.context);s.playlistItems.forEach(function(t){ma.removeClass(t.element,"now-playing-item"),ma.removeClass(t.element,"up-next-item"),ma.removeClass(t.element,"already-watched-item"),n.currentlyPlayingMobileItem&&n.currentlyPlayingMobileItem.id===t.id&&ma.addClass(t.element,"now-playing-item")})}),e.addMultipleListener(this.container,["ads-ad-skipped","ima3error","ima3-ad-error","ads-ad-ended","play"],function(){var t=s.getService(ga.context);s.playlistItems.forEach(function(n){t.currentlyPlayingMobileItem&&t.currentlyPlayingMobileItem.id===n.id&&e.trigger(s.container,ye.UPDATE_NOW_PLAYING_MARKER,n)})}),e.addListener(this.container,"ended",function(){if("json"!==s.container.view.element.getAttribute(Ce.EXT_RECOMMENDATIONS_TYPE)){var n=s.getService(ga.context),a=1;s.playlistItems.forEach(function(t){ma.removeClass(t.element,"now-playing-item"),n.currentlyPlayingMobileItem&&n.currentlyPlayingMobileItem.id===t.id&&ma.addClass(t.element,"already-watched-item"),t.played&&a++}),a>=s.playlistItems.length&&!t.browser.isLandscapeMode()&&s.playlistItems[0]&&s.playlistItems[0].element&&s.playlistItems[0].element.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"}),a>=s.playlistItems.length&&e.trigger(s.container,Ce.UP_NEXT_DEPLETED)}}),e.addCustomListener(this.container,Mo.PLAYER_PLAYBACK_ERROR,function(){s.playlistItems.forEach(function(t){ma.removeClass(t.element,"now-playing-item"),ma.removeClass(t.element,"up-next-item")})}),e.addCustomListener(this.container,ye.UPDATE_NOW_PLAYING_MARKER,function(a){var t=s.getService(ga.context);s.playlistItems.forEach(function(n){t.currentlyPlayingMobileItem&&t.currentlyPlayingMobileItem.id===n.id&&ma.addClass(n.element,"already-watched-item"),a.id===n.id?(ma.removeClass(a.element,"up-next-item"),ma.addClass(a.element,"now-playing-item")):(ma.removeClass(n.element,"now-playing-item"),ma.removeClass(n.element,"up-next-item"))})}),e.addCustomListener(this.container,ge.SHUFFLE_PLAYLIST_ITEMS,function(e){var t=s.getService(ga.context);if(t&&t.mobilePlaylistItems&&0<t.mobilePlaylistItems.length)for(var n=0,a;n<t.mobilePlaylistItems.length&&t.mobilePlaylistItems[n]&&t.mobilePlaylistItems[n]!==e;n++)a=t.mobilePlaylistItems.shift(),t.mobilePlaylistItems.push(a),n--}),e.addCustomListener(this.container,ge.PLAYLIST_SKIP_VIDEO_EVENT,function(){var t=s.getService(ga.context),n=s.container.getPluginInstance(ge.pluginName).events.playlistItems,i=1;if(s.playlistItems.forEach(function(t){ma.removeClass(t.element,"now-playing-item"),ma.removeClass(t.element,"up-next-item"),t.played&&i++}),i>=s.playlistItems.length&&(e.trigger(s.container,Ce.UP_NEXT_DEPLETED),e.addSingleEventListener(s.container,"ended",function(){ma.addClass(s.playlistItems[0].element,"up-next-item")})),t&&t.mobilePlaylistItems&&0<t.mobilePlaylistItems.length)for(var r=function(a){var i=n.find(function(n){return!n.played&&n.capiVideo&&n.capiVideo.id===t.mobilePlaylistItems[a]});if(i)return s.playlistItems[i.index-1]&&ma.addClass(s.playlistItems[i.index-1].element,"already-watched-item"),ma.removeClass(i.element,"up-next-item"),ma.addClass(i.element,"now-playing-item"),e.trigger(s.container,ye.ITEM_PLAYED_THROUGH_SKIP_BUTTON,i.id),"break"},o=0;o<t.mobilePlaylistItems.length&&!("break"===r(o));o++);})},e.prototype.setRecommendations=function(a){var o=this,t=this.getService(ga.context);a.forEach(function(n,e){var a=new ye(n,o.container,e);o.view.element.appendChild(a.element),o.playlistItems[e]=a,t.mobilePlaylistItems[e]=a.capiVideo.id}),this.container.getPluginInstance(le.pluginName).setContent(this.view.element)},e}(m),ue=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ge=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable()&&(n.playlistContainer=t.getPluginInstance(le.pluginName),n.view=new Q,n.events=new me(t,n.view),n.playlistContainer.attach(n.view.getElement())),n}return ue(e,a),e.pluginName="MOBILE_PLAYLIST",e.CHECK_ITEM_VISIBILITY="CHECK_ITEM_VISIBILITY",e.MOBILE_PLAYLIST_SHOWN="MOBILE_PLAYLIST_SHOWN",e.SHUFFLE_PLAYLIST_ITEMS="SHUFFLE_PLAYLIST_ITEMS",e.PLAYLIST_SKIP_VIDEO_EVENT="PLAYLIST_SKIP_VIDEO_EVENT",e.PLAYLIST_ENDED="PLAYLIST_ENDED",e}(re),_e=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ee=function(a){function e(){var e=a.call(this,document.createElement("button"))||this;e.element.className="skeleton-item-container";var s=document.createElement("picture");s.className="skeleton-image loader";var n=document.createElement("h2");n.className="skeleton-metadata-container";var i=document.createElement("span");i.className="skeleton-metadata-title loader",n.appendChild(i);var r=document.createElement("span");return r.className="skeleton-metadata-title loader",n.appendChild(r),e.element.appendChild(s),e.element.appendChild(n),e}return _e(e,a),e}(T),Ae=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ye=function(a){function o(e,o,n){var i=a.call(this,document.createElement("li"))||this;return i.loaded=!1,i.type="related",i.index=0,i.played=!1,i.visible=!1,i.element.className="playlist-list-item",i.capiVideo=e,i.container=o,i.index=n,i.displayItem(),i.setEvents(),i}return Ae(o,a),o.prototype.onItemVisibilityCheck=function(){var n=this;this.isVisible()&&this.capiVideo&&!this.capiVideo.fetched&&this.isVisible()&&(this.capiVideo.fetched=!0,this.container.getService(ga.capi).getVideosWhenReady(this.container,this.capiVideo,function(e){n.capiVideo=e[0],n.attachItem(),n.bindClick()},function(){n.container.getService(ga.eventManager).trigger(n.container,Mo.CAPI_VIDEO_FETCH_ERROR),n.element.parentNode.removeChild(n.element)}))},o.prototype.setEvents=function(){var a=this,e=this.container.getService(ga.eventManager);e.addCustomListener(this.container,ge.CHECK_ITEM_VISIBILITY,function(){a.onItemVisibilityCheck()}),e.addCustomListener(this.container,ge.MOBILE_PLAYLIST_SHOWN,function(){D.truncateDescription(a.titleContainer,o.TITLE_LENGTH_HEIGHT)}),e.addCustomListener(this.container,"play",function(){D.truncateDescription(a.titleContainer,o.TITLE_LENGTH_HEIGHT)}),e.addCustomListener(this.container,o.ITEM_PLAYED_THROUGH_AUTOPLAY,function(e){e&&e===a.id&&(a.playVideo(),a.container.getService(ga.context).clickToPlay=!1)}),e.addCustomListener(this.container,o.ITEM_PLAYED_THROUGH_SKIP_BUTTON,function(e){e&&e===a.id&&a.playVideo()}),e.addCustomListener(this.container,o.ITEM_PLAYED_THROUGH_REPLAY_BUTTON,function(e){e&&e===a.id&&a.playVideo()}),e.addCustomListener(this.container,o.UPDATE_UP_NEXT_MARKER,function(e){e&&e===a.id&&(ma.removeClass(a.element,"now-playing-item"),ma.addClass(a.element,"up-next-item"),a.scrollIntoView(1))})},o.prototype.scrollIntoView=function(n){if(!this.container.getService(ga.environment).browser.isLandscapeMode()){var e="end";this.index+n<ce.PAGE_SIZE&&(e="center"),this.element.scrollIntoView({behavior:"smooth",block:"nearest",inline:e})}},o.prototype.playVideo=function(){var t=this;this.container.getService(ga.analytics).omniture.track([f.SELECT_PLAYLIST]);var e=this.container.getService(ga.context);e.playOrder++,e.recommendationsOrigin=this.type,this.container.player.load(this.id).then(function(){e.withCapiData(t.capiVideo);var n=t.container.getService(ga.capiDecorate);n.set(e.capiVideo,t.container),n.decorateContainer(),t.container.bcPlayer().play(),t.played=!0,e.currentlyPlayingMobileItem=t;var a=t.container.getService(ga.eventManager);a.trigger(t.container,o.PLAYLIST_ITEM_VISIBLE,t),a.trigger(t.container,o.PLAYLIST_ITEM_PLAYED,t),t.scrollIntoView(2)})},o.prototype.bindClick=function(){var n=this;this.buttonContainer.onclick=function(){var e=n.container.getService(ga.eventManager);e.trigger(n.container,Ce.UP_NEXT_CLICK),e.trigger(n.container,ge.SHUFFLE_PLAYLIST_ITEMS,n.capiVideo.id),n.playVideo(),n.container.getService(ga.context).clickToPlay=!0}},o.prototype.attachSkeleton=function(){this.element.appendChild(new Ee().element)},o.prototype.attachItem=function(){if(this.capiVideo){this.element.innerHTML="",this.element.setAttribute("data-title",this.capiVideo.title),this.element.setAttribute("data-description",this.capiVideo.caption),this.element.setAttribute("data-platformid",this.capiVideo.platformId),this.element.setAttribute("data-capi-id",this.capiVideo.id),this.id=this.capiVideo.platformId,this.element.setAttribute("id",this.capiVideo.platformId),this.buttonContainer=document.createElement("button"),this.buttonContainer.className="item-container",this.posterContainer=document.createElement("figure"),this.posterContainer.className="poster-container",this.posterImage=document.createElement("img"),this.posterImage.className="poster-image",this.posterImage.src=this.capiVideo.thumbnail,this.posterContainer.appendChild(this.posterImage),this.playButtonContainer=document.createElement("div");var t=document.createElement("span"),e=document.createElement("span");if(0===this.capiVideo.duration?(this.playButtonContainer.className="live-marker-container",t.className="live-marker-icon",e.className="live-marker-duration",e.innerHTML=o.LIVE_MARKER_LABEL):(this.playButtonContainer.className="play-button-container",t.className="play-button",e.className="play-duration",e.innerHTML=D.formatDuration(this.capiVideo.duration/1e3)),this.playButtonContainer.appendChild(t),this.playButtonContainer.appendChild(e),this.posterContainer.appendChild(this.playButtonContainer),this.buttonContainer.appendChild(this.posterContainer),this.metadataContainer=document.createElement("div"),this.metadataContainer.className="metadata-container",this.titleContainer=document.createElement("span"),this.titleContainer.className="item-title",(this.titleContainer.innerHTML=this.capiVideo.title.replace(/ /g," "),D.truncateDescription(this.titleContainer,o.TITLE_LENGTH_HEIGHT),this.capiVideo.accessType==l.ACCESS_TYPE_PREMIUM)){var n=this.container.getService(ga.environment);-1<pa.PREMIUM_VIDEO_SITES.indexOf(n.getDomain())&&(this.premium=document.createElement("div"),this.premium.className="vms-premium-tag",this.premium.innerText="PREMIUM",this.metadataContainer.appendChild(this.premium))}this.metadataContainer.appendChild(this.titleContainer),this.buttonContainer.appendChild(this.metadataContainer),this.nowPlayingMarker=document.createElement("div"),this.nowPlayingMarker.className="now-playing-marker",this.nowPlayingMarker.innerHTML=o.NOW_PLAYING_LABEL,this.upNextMarker=document.createElement("div"),this.upNextMarker.className="up-next-marker",this.upNextMarker.innerHTML=o.UP_NEXT_LABEL,this.buttonContainer.appendChild(this.nowPlayingMarker),this.buttonContainer.appendChild(this.upNextMarker),this.element.appendChild(this.buttonContainer),this.bindClick()}},o.prototype.isVisible=function(){this.visible=!1;var t=this.container.getPluginInstance(le.pluginName);return Y.isVisibleInHorizontalViewport(this.element,t.view.body)&&(this.visible=!0),this.visible},o.prototype.displayItem=function(){this.capiVideo.fetched?this.attachItem():this.attachSkeleton()},o.TITLE_LENGTH_HEIGHT=40,o.NOW_PLAYING_LABEL="Now Playing",o.UP_NEXT_LABEL="Up Next",o.LIVE_MARKER_LABEL="LIVE",o.UPDATE_UP_NEXT_MARKER="update-upnext-marker",o.UPDATE_NOW_PLAYING_MARKER="update-now-playing-marker",o.ITEM_PLAYED_THROUGH_AUTOPLAY="item-played-through-autoplay",o.PLAYLIST_ITEM_VISIBLE="playlist-item-visible",o.ITEM_PLAYED_THROUGH_SKIP_BUTTON="item-played-through-skip-button",o.ITEM_PLAYED_THROUGH_REPLAY_BUTTON="item-played-through-replay-button",o.PLAYLIST_ITEM_PLAYED="playlist-item-played",o}(U),ve=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ce=function(a){function d(t,n){var i=a.call(this,n)||this;i.upNext=t;var e=t.view;e.playlistControls.element.onclick=function(){i.getService(ga.analytics).omniture.track([f.SHOW_PLAYLIST]),i.container.bcPlayer().pause()};var r=i.container.serviceProvider.get(ga.eventManager),s=i.getService(ga.environment);return r.addCustomListener(i.container,M.CAPI_RELATED_FETCHED,function(l){t.setItems(l),i.getService(ga.context).hasRecommendations=i.upNext.view.recommendations.items&&0<i.upNext.view.recommendations.items.length;var e=i.upNext.view.recommendations.items.map(function(t){return t.capiVideo});switch(n.view.element.getAttribute(d.EXT_RECOMMENDATIONS_TYPE)){case"json":var p=new CustomEvent(d.EXT_RECOMMENDATIONS_EVENT,{detail:e});if(document.body.dispatchEvent(p),s.browser.isMobile())return void r.trigger(i.container,d.EXT_RECOMMENDATIONS_MOBILE_EVENT);break;case"html":var a=document.getElementById(n.view.element.getAttribute(d.EXT_RECOMMENDATIONS_TARGET));if(a)return void a.appendChild(i.upNext.view.element);default:if(s.browser.isMobile())return void r.trigger(i.container,d.EXT_RECOMMENDATIONS_MOBILE_EVENT);i.container.bcPlayer().el().appendChild(i.upNext.view.element),i.upNext.view.hide(),i.upNext.view.showCTA();}setTimeout(function(){r.trigger(i.container,d.EXT_RECOMMENDATIONS_LOADED_EVENT)},0)}),document.body&&document.body.addEventListener("vms-external-click",function(n){try{var e=n.detail;e.id&&e.platformId&&i.container.player.load(e.platformId).then(function(){i.container.player.getBCPlayer().play()})}catch(t){}}),r.addCustomListener(i.container,M.CAPI_TRENDING_FETCHED,function(n){0<n.length&&t.setTrendingItems(n)}),r.addListener(i.container,"error",function(){e.showList()}),r.addListener(i.container,"ended",function(){i.getService(ga.environment).browser.isMobile()||(e.showList(),0!==i.upNext.view.recommendations.items.length&&r.trigger(i.container,d.ON_UP_NEXT,function(){i.container.getService(ga.context).clickToPlay=!1,i.next()}))}),r.addListener(i.container,"loadedmetadata",function(){if(i.getService(ga.environment).browser.isMobile()){var r=i.container.getPluginInstance(Pe.pluginName),e=i.getService(ga.context);if(r.view.hide(),null!=e.currentlyPlayingMobileItem){l=i.container.getPluginInstance(ge.pluginName).events.playlistItems;for(var d=0,a;d<l.length;d++)if(l[d].capiVideo.id==e.currentlyPlayingMobileItem.capiVideo.id){a=l[d+1];break}if(!1===(null==a?void 0:a.capiVideo.fetched)){i.container.getService(ga.capi).getVideosWhenReady(i.container,a.capiVideo,function(t){a.capiVideo=t[0],o.view.refresh(a.capiVideo),a.displayItem(),i.bindItemEvent(a,a)},function(){i.container.getService(ga.eventManager).trigger(i.container,Mo.CAPI_VIDEO_FETCH_ERROR),a.element.parentNode.removeChild(a.element)});var o=i.container.getPluginInstance(Pe.pluginName);o.view.refresh(a.capiVideo)}}}else{var s=(l=t.view.recommendations.items)[0],l;!1===s.capiVideo.fetched&&i.getService(ga.capi).getVideosWhenReady(n,s.capiVideo,function(t){s.capiVideo=t[0],s.capiVideo.fetched=!0,i.container.getPluginInstance(Pe.pluginName).view.refresh(s.capiVideo),s.displayItem(),i.bindItemEvent(s.recommendationsContainer,s)},function(){i.getService(ga.eventManager).trigger(i.container,Mo.CAPI_VIDEO_FETCH_ERROR),s.element.parentNode.removeChild(s.element)})}}),r.addListener(i.container,"play",function(){var t=i.container.getService(ga.context);t.currentRecommendationItem&&ma.addClass(t.currentRecommendationItem.element,"hidden-node"),t.previousRecommendationItem&&(ma.removeClass(t.previousRecommendationItem.element,"hidden-node"),ma.addClass(t.previousRecommendationItem.element,"item-watched"),t.previousRecommendationItem=null),r.addSingleEventListener(i.container,"playing",function(){var t=i.upNext.view;t.recommendations.element&&(ma.removeClass(t.recommendations.labelContainer,"hidden-node"),ma.removeClass(t.recommendations.element,"hidden-node"),ma.removeClass(t.trending.element,"hidden-node"))})}),r.addCustomListener(i.container,W.EVENT_ITEM_VIEWPORT_VISIBLE,function(a){var e=a.capiVideo;e&&!1===e.fetched&&(e.fetched=!0,a.setLoading(),i.getService(ga.capi).getVideosWhenReady(n,e,function(e){a.capiVideo=e[0];var t=i.getService(ga.environment).getDomain();-1!==pa.PREMIUM_VIDEO_SITES.indexOf(t)||a.capiVideo.accessType!==l.ACCESS_TYPE_PREMIUM?(a.displayItem(),i.bindItemEvent(a.recommendationsContainer,a)):a.element.style.display="none"},function(){i.getService(ga.eventManager).trigger(i.container,Mo.CAPI_VIDEO_FETCH_ERROR),a.element.parentNode.removeChild(a.element)}))}),i}return ve(d,a),d.prototype.mobileNext=function(t){t&&this.container.serviceProvider.get(ga.eventManager).trigger(this.container,ye.ITEM_PLAYED_THROUGH_AUTOPLAY,t.id)},d.prototype.next=function(){var a=this;ma.removeClass(this.container.view.element,"vms-ready");var e=this.upNext.view,t=(this.getService(ga.context),e.recommendations.items.shift());(this.container.related.getMoreRelated||0!==e.recommendations.items.length||this.onRecommendationsEnded(),t)&&(this.decorate(t),e.recommendations.toggleCurrent(t),this.container.player.load(t.id).then(function(){a.getService(ga.context).playOrder++,a.getService(ga.context).withCapiData(t.capiVideo),a.container.bcPlayer().play(),e.hideList(),ma.addClass(a.container.view.element,"vms-ready")},function(){ma.addClass(a.container.view.element,"vms-ready")}))},d.prototype.onRecommendationsEnded=function(){this.getService(ga.eventManager).trigger(this.container,d.UP_NEXT_DEPLETED)},d.prototype.decorate=function(n){var e=this.container.getService(ga.capiDecorate);e.set(n.capiVideo,this.container),e.decorateContainer()},d.prototype.itemHandler=function(t,e){var n=this;if(e.capiVideo===this.getService(ga.context).capiVideo)return this.container.bcPlayer().currentTime(0),void this.container.bcPlayer().controlBar.playToggle.trigger("click");this.decorate(e),this.getService(ga.analytics).omniture.track([f.SELECT_PLAYLIST]);var a=this.container.getService(ga.context);a.playOrder++,a.recommendationsOrigin=e.type,this.container.player.load(e.id).then(function(){a.withCapiData(e.capiVideo),n.container.bcPlayer().play()}),0<t.list.children.length&&(t.toggleCurrent(e),t.items.splice(t.items.indexOf(e),1)),ma.addClass(document.getElementById("vms-upnext-label-container"),"hidden-node"),ma.addClass(t.element,"hidden-node"),t.element.className=t.element.className.replace(" active",""),this.getService(ga.eventManager).trigger(this.container,d.UP_NEXT_CLICK),a.clickToPlay=!0},d.prototype.bindItemEvent=function(a,e){var t=this;e.capiVideo&&e.capiVideo.fetched&&(e.img&&(e.img.onclick=function(){t.itemHandler(a,e)}),e.play&&(e.play.onclick=function(){t.itemHandler(a,e)}),e.title&&(e.title.onclick=function(){t.itemHandler(a,e)}))},d.prototype.setItemEvents=function(n){for(var e in n.items)this.bindItemEvent(n,n.items[e])},d.ON_UP_NEXT="ON_UP_NEXT",d.UP_NEXT_CLICK="ON_UP_NEXT_CLICK",d.UP_NEXT_DEPLETED="ON_UP_NEXT_DEPLETED",d.EXT_RECOMMENDATIONS_TARGET="vms-recommendations-target",d.EXT_RECOMMENDATIONS_TYPE="vms-recommendations-type",d.EXT_RECOMMENDATIONS_EVENT="vms-recommendations",d.EXT_RECOMMENDATIONS_MOBILE_EVENT="vms-recommendations-mobile",d.EXT_RECOMMENDATIONS_LOADED_EVENT="vms-ext-recommendations-loaded",d}(m),Se=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),he=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=new X(t),n.events=new Ce(n,n.container),n}return Se(e,a),e.prototype.setItems=function(t){this.view.recommendations.setItems(t),this.events.setItemEvents(this.view.recommendations)},e.prototype.setTrendingItems=function(t){this.view.trending.view=this.view,this.view.trending.setItems(t),this.view.trending.setViewElements(),this.view.trending.setViewEvents(),this.events.setItemEvents(this.view.trending)},e.pluginName="PLUGIN_UP_NEXT",e}(y),Te=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ie=function(a){function n(e){var o=a.call(this,document.createElement("button"))||this;o.container=e,o.element.className="vjs-control vjs-button hidden-node "+Pe.CSS_CLASS_NAME,o.element["aria-disabled"]=!1,o.hoverContainer=document.createElement("div"),o.hoverContainer.className="hover-container",o.hover=document.createElement("div"),o.hover.className="hover";var n=document.createElement("h4");n.innerHTML="UP NEXT",o.image=document.createElement("img"),o.image.onerror=function(){o.image.getAttribute("data-errored")||(o.image.setAttribute("data-errored","errored"),o.image.src=B.get()+"img/fallback.jpg",o.image.width=100,o.image.height=50)},o.description=document.createElement("div"),o.description.className="description",o.duration=document.createElement("div"),o.duration.className="duration",o.hover.appendChild(n),o.hover.appendChild(o.image),o.hover.appendChild(o.description),o.hover.appendChild(o.duration),o.hoverContainer.appendChild(o.hover),o.element.appendChild(o.hoverContainer);var i=document.createElement("div");return i.className="arrow",o.hoverContainer.appendChild(i),o.hide(),o}return Te(n,a),n.prototype.refresh=function(t){this.video=t,t&&(this.image.src=t.thumbnail||t.poster,this.description.innerHTML=D.truncate(t.title,n.TEXT_LIMIT),this.hasDurationMarker||this.appendDurationMarker(this.duration,t.duration)),this.container.player.getBCPlayer().ads.isInAdMode()||this.show()},n.TEXT_LIMIT=55,n}(U),Ne=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),be=function(a){function o(e,o){var n=a.call(this,e,o)||this;return n.container=e,n.playerReadyEvents(),n}return Ne(o,a),o.prototype.getName=function(){return""},o.prototype.getIndex=function(){return 0},o.prototype.registerComponent=function(){},o.prototype.canAddComponent=function(t){for(var e=!1,a=0,i=t.children(),r;a<i.length;a++)r=i[a],r.name_===this.getName()&&r.el_.parentNode===t.el_&&(e=!0);return!e},o.prototype.playerReadyEvents=function(){var t=this,e=this.container.getService(ga.eventManager);e.addListener(this.container,"ready",function(){t.registerComponent();var n=t.container.bcPlayer().controlBar;t.canAddComponent(n,t.getName())&&n.addChild(t.getName(),{},t.getIndex()),e.trigger(t.container,o.EVENT_COMPONENT_ADDED,{controlBar:"default",component:t.getName()})})},o.EVENT_COMPONENT_ADDED="COMPONENT_ADDED",o}(y),we=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pe=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.view=new Ie(e),t.setEvents(),t}return we(o,a),o.prototype.getName=function(){return o.COMPONENT_NAME},o.prototype.getIndex=function(){return o.COMPONENT_INDEX},o.prototype.setEvents=function(){var a=this,e=this.container.getPluginInstance(he.pluginName),n=this.getService(ga.eventManager);n.addCustomListener(this.container,M.CAPI_RELATED_FETCHED,function(){a.view.show();var t=e.view.recommendations.items[0];t&&t.capiVideo.title?(a.view.refresh(t.capiVideo),setTimeout(function(){ma.removeClass(a.view.element,"hidden-node")},0)):a.getService(ga.capi).getVideosWhenReady(a.container,t.capiVideo,function(e){a.view.refresh(e[0]),setTimeout(function(){ma.removeClass(a.view.element,"hidden-node")},0)},function(){a.view.hide(),ma.addClass(a.view.element,"hidden-node"),a.getService(ga.eventManager).trigger(a.container,Mo.CAPI_VIDEO_FETCH_ERROR)}),n.addListener(a.container,"play",function(){var n=e.view.recommendations.items[0];n&&a.view.refresh(n.capiVideo)})}),n.addCustomListener(this.container,Ce.UP_NEXT_CLICK,function(){var n=e.view.recommendations.items[0];n&&a.view.refresh(n.capiVideo)}),n.addCustomListener(this.container,Ce.EXT_RECOMMENDATIONS_LOADED_EVENT,function(){var n=e.view.recommendations.items[0];n&&a.view.refresh(n.capiVideo)}),n.addCustomListener(this.container,o.ON_SKIP_EVENT,function(){if(a.container.getService(ga.environment).browser.isMobile()&&"json"!==a.container.view.element.getAttribute(Ce.EXT_RECOMMENDATIONS_TYPE))n.trigger(a.container,ge.PLAYLIST_SKIP_VIDEO_EVENT);else{e.events.next();var i=e.view.recommendations.items[0];i&&a.view.refresh(i.capiVideo)}}),n.addCustomListener(this.container,ye.PLAYLIST_ITEM_PLAYED,function(e){e&&e.capiVideo&&a.view.refresh(e.capiVideo)}),n.addCustomListener(this.container,Ce.UP_NEXT_DEPLETED,function(){a.container.bcPlayer().controlBar.removeChild("SkipToNext")}),n.addListener(this.container,"timeupdate",function(){!1!==a.view.video.fetched&&a.view.video.sectionId?a.view.show():a.view.hide()})},o.prototype.registerComponent=function(){var t=this,e=videojs.extend(videojs.getComponent("Button"),{createEl:function(){return t.view.element},handleClick:function(){t.container.getService(ga.context).clickToPlay=!0;var e=t.container;e.getService(ga.eventManager).trigger(e,o.ON_SKIP_EVENT)}});videojs.registerComponent(o.COMPONENT_NAME,e)},o.CSS_CLASS_NAME="rp-skip-button",o.ON_SKIP_EVENT="EVENT_ON_SKIP",o.pluginName="PLUGIN_SKIP_BUTTON",o.COMPONENT_NAME="SkipToNext",o.COMPONENT_INDEX=1,o}(be),Le=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oe=function(a){function e(e){var o=a.call(this,document.createElement("div"))||this;o.container=e;var n=o.container.getService(ga.environment);return o.element.className="vjs-control vjs-button rp-hidden-control "+Me.CSS_CLASS_NAME,n.browser.isMobile()&&ma.addClass(o.element,Me.CSS_CLASS_NAME_MOBILE),n.browser.isIpad()&&ma.addClass(o.element,Me.CSS_CLASS_NAME_IPAD),o.handle=document.createElement("button"),o.handle.className="disabled",o.element.appendChild(o.handle),o.element["aria-disabled"]=!1,o}return Le(e,a),e}(T),fe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Re=function(a){function e(e,o){var n=a.call(this,e)||this;return n.display=!0,n.view=o,n.setEvents(),n}return fe(e,a),e.prototype.clickHandler=function(){if(this.getService(ga.context).hasSubtitles()){this.display=!this.display,window.sessionStorage.setItem(Me.STORAGE_NAME,""+this.display),this.refreshCss(),this.getService(ga.analytics).omniture.track([this.display?f.CC_ON:f.CC_OFF]);var t=this.container.getPluginInstance(Me.pluginName);this.display?t.displayTracks():t.hideTracks()}},e.prototype.setEvents=function(){var n=this,e=this.getService(ga.eventManager);e.addListener(this.container,"ready",function(){n.display="true"===window.sessionStorage.getItem(Me.STORAGE_NAME)||!0===n.container.bcPlayer().muted()}),e.addListener(this.container,"playing",function(){var e=n.container.getPluginInstance(Me.pluginName);n.display?e.displayTracks():e.hideTracks(),ma.hasClass(n.view.element,"rp-hidden-control")&&ma.removeClass(n.view.element,"rp-hidden-control"),e.refreshCaptionState()}),e.addMultipleListener(this.container,["ads-ad-ended","ads-ad-skipped","ima3error","ima3-ad-error"],function(){var e=n.container.getPluginInstance(Me.pluginName);ma.removeClass(e.view.element,"rp-hidden-control")}),ma.onClick(this.view.element,function(){n.clickHandler()})},e.prototype.refreshCss=function(){"true"!==window.sessionStorage.getItem(Me.STORAGE_NAME)&&!0!==this.container.bcPlayer().muted()?ma.addClass(this.container.bcPlayer().el(),"vms-cc-hidden"):ma.removeClass(this.container.bcPlayer().el(),"vms-cc-hidden")},e}(m),De=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Me=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.view=new Oe(e),t.events=new Re(t.container,t.view),t}return De(o,a),o.prototype.getName=function(){return o.COMPONENT_NAME},o.prototype.getIndex=function(){return o.COMPONENT_INDEX},o.prototype.registerComponent=function(){var t=this,e=videojs.getComponent("button");videojs.registerComponent(o.COMPONENT_NAME,videojs.extend(e,{createEl:function(){return t.view.element},handleClick:function(){}}))},o.prototype.displayTracks=function(){for(var t=0,e=this.container.bcPlayer().textTracks().tracks_,n;t<e.length;t++)if(n=e[t],"subtitles"===n.kind){n.mode="showing";break}var a=this.container.getPluginInstance(o.pluginName);ma.removeClass(a.view.handle,"disabled"),ma.removeClass(a.view.handle,"inactive"),ma.addClass(a.view.handle,"active")},o.prototype.hideTracks=function(){for(var t=0,e=this.container.bcPlayer().textTracks().tracks_;t<e.length;t++)e[t].mode="disabled";var n=this.container.getPluginInstance(o.pluginName);ma.removeClass(n.view.handle,"disabled"),ma.removeClass(n.view.handle,"active"),ma.addClass(n.view.handle,"inactive")},o.prototype.refreshCaptionState=function(){var t=this.getService(ga.context),e=this.container.getPluginInstance(o.pluginName);(ma.addClass(e.view.handle,"disabled"),t.hasSubtitles())&&(this.hideTracks(),"true"!==(window.sessionStorage.getItem(o.STORAGE_NAME)||"false")&&!0!==this.container.bcPlayer().muted()||this.displayTracks())},o.CSS_CLASS_NAME="rp-cc-button",o.CSS_CLASS_NAME_MOBILE="rp-cc-button-mobile",o.CSS_CLASS_NAME_IPAD="rp-cc-button-ipad",o.pluginName="PLUGIN_CC",o.STORAGE_NAME="vms.cc.display",o.COMPONENT_NAME="CCButton",o.COMPONENT_INDEX=10,o}(be),ke=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Be=function(a){function o(e,o){var n=a.call(this,e)||this;return n.onClickEvents=[],n.view=o,n.setEvents(),n}return ke(o,a),o.prototype.setAutoplayEvents=function(){var n=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,Ke.EVENT_USER_STATUS,function(e){e===Ke.USER_REGISTERED?n.view.videoAutoplay.onRegistered():e===Ke.USER_SUBSCRIBER?n.view.videoAutoplay.onSubscribed():n.view.videoAutoplay.onLoggedOut()}),e.addCustomListener(this.container,Mo.BC_READY,function(){n.view.videoAutoplay.onLoggedOut(),e.trigger(n.container,Ke.EVENT_CHECK_LOGIN)}),e.addListener(this.container,"timeupdate",function(){e.trigger(n.container,Ke.EVENT_CHECK_LOGIN)}),e.addListener(this.container,"play",function(){ma.onClick(n.view.videoAutoplay.switchContainer,function(){n.toggleAutoplay()}),ma.onClick(n.view.videoAutoplay.autoplayOff,function(){n.view.showPremium()}),ma.onClick(n.view.videoAutoplay.premiumContainer,function(){n.view.hidePremium()})})},o.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager),t=this.getService(ga.environment);this.container.getService(ga.environment).browser.isDesktop()||t.isSky()?this.setAutoplayEvents():e.addCustomListener(this.container,Mo.BC_READY,function(){e.trigger(a.container,Ke.EVENT_CHECK_LOGIN)}),e.addCustomListener(this.container,o.EVENT_TOGGLE_MENU,function(){ma.toggleClass(a.view.settingsContainer,"hidden")}),e.addMultipleListener(this.container,["ads-ad-ended","ads-ad-skipped","ima3error","ima3-ad-error"],function(){ma.removeClass(a.view.element,"rp-hidden-control")}),e.addListener(this.container,"play",function(){a.container.bcPlayer().one("playing",function(){ma.hasClass(a.view.element,"rp-hidden-control")&&ma.removeClass(a.view.element,"rp-hidden-control")}),a.refreshCss(),ma.onClick(a.view.handle,function(){var n=a.getService(ga.environment);if(n.browser.isMobile()&&!n.isSky())ma.toggleClass(a.view.videoQuality.view.resolutionContainer,"active");else{a.view.hidePremium(),e.trigger(a.container,Ke.EVENT_CHECK_LOGIN),ma.toggleClass(a.view.settingsContainer,"hidden"),ma.removeClass(a.view.videoQuality.view.resolutionContainer,"active");for(var t=0,i=a.onClickEvents;t<i.length;t++)(0,i[t])()}})}),e.addCustomListener(this.container,Pe.ON_SKIP_EVENT,function(){-1===a.view.settingsContainer.className.indexOf("hidden")&&ma.addClass(a.view.settingsContainer,"hidden")}),e.addCustomListener(this.container,Ve.EVENT_HLS_PLUGIN_ACTIVE,function(){ma.addClass(a.view.settingsContainer,"video-quality-active"),a.view.addVideoQuality(a.container)})},o.prototype.toggleAutoplay=function(){var a=We.get(this.container);if(this.view.videoAutoplay.currentStatus!==Ke.USER_ANONYMOUS){var e=this.view.videoAutoplay.switch,t=e.checked;if(e.checked=!t,a.autoplayEnabled=!t,this.view.videoAutoplay.currentStatus===Ke.USER_REGISTERED){var o=new Date;o.setMonth(o.getMonth()+1),a.autoplayDisabledExpiry=o}this.view.videoAutoplay.switch.checked&&(this.view.videoAutoplay.manuallySwitchedOn=!0),a.save(),this.trackAutoplay()}},o.prototype.trackAutoplay=function(){var n=this.getService(ga.analytics).omniture,e=this.view.videoAutoplay.switch.checked?f.AUTOPLAY_TURNED_ON:f.AUTOPLAY_TURNED_OFF;n.track([e])},o.prototype.refreshCss=function(){"true"!==window.sessionStorage.getItem(Me.STORAGE_NAME)&&!0!==this.container.bcPlayer().muted()?ma.addClass(this.container.bcPlayer().el(),"vms-cc-hidden"):ma.removeClass(this.container.bcPlayer().el(),"vms-cc-hidden")},o.EVENT_TOGGLE_MENU="EVENT_TOGGLE_MENU",o}(m),Ve=function(){function n(n,a){this.container=n,this.plugin=a,this.eventManager=this.container.getService(ga.eventManager),this.enableLowPlaylist(),this.initPluginEvents(),this.container.getService(ga.context).videoQuality=L.get()}return n.prototype.enableLowPlaylist=function(){this.eventManager.addListener(this.container,"ready",function(){videojs&&videojs.Hls&&videojs.xhr&&(videojs.Hls.xhr.beforeRequest=function(t){t.enableLowInitialPlaylist=!0})})},n.prototype.initPluginEvents=function(){var t=this;this.eventManager.addListener(this.container,"loadedmetadata",function(){t.plugin.isApplicable().then(function(){t.onPluginActive(),ma.addClass(t.plugin.settingsView.settingsContainer,"video-quality-enabled")},function(){t.container.log("[VideoQuality]","Plugin disabled")})})},n.prototype.onPluginActive=function(){var e=this;this.fetchPlaylists(),this.container.bcPlayer().tech(!0).hls.selectPlaylist=function(){return e.plugin.selectPlaylist()},this.eventManager.trigger(this.container,n.EVENT_HLS_PLUGIN_ACTIVE),this.bindEvents()},n.prototype.bindEvents=function(){var n=this,e=this.container.getService(ga.eventManager);this.plugin.view.attachResolutions(this.plugin.settingsView.element),ma.onClick(this.plugin.view.currentQuality,function(){ma.addClass(n.plugin.view.resolutionContainer,"active"),n.plugin.view.resolutionContainer.offsetHeight+n.container.bcPlayer().controlBar.el().offsetHeight>n.container.view.element.offsetHeight?ma.addClass(n.plugin.view.resolutionContainer,"small"):ma.removeClass(n.plugin.view.resolutionContainer,"small"),e.trigger(n.container,Be.EVENT_TOGGLE_MENU)}),ma.onClick(this.plugin.view.highButton,function(){n.onClick("high")}),ma.onClick(this.plugin.view.mediumButton,function(){n.onClick("medium")}),ma.onClick(this.plugin.view.lowButton,function(){n.onClick("low")}),ma.onClick(this.plugin.view.backButton,function(){n.container.getService(ga.environment).browser.isMobile()?ma.removeClass(n.plugin.view.resolutionContainer,"active"):(ma.removeClass(n.plugin.view.resolutionContainer,"active"),e.trigger(n.container,Be.EVENT_TOGGLE_MENU))})},n.prototype.onClick=function(a){var e=this.container.getService(ga.analytics),t=this.container.getService(ga.context);this.plugin.low.selected=this.plugin.medium.selected=this.plugin.high.selected=!1,this.plugin[a].selected=!0,this.plugin.selectedPlaylistIndex=this.plugin[a].select(),ma.removeClass(this.plugin.view.resolutionContainer,"active"),this.plugin.view.refreshQualityLabel(),t.videoQuality=a,e.omniture.track([f.VIDEO_QUALITY_CHANGED],{eVar137:t.videoQuality})},n.prototype.fetchPlaylists=function(){var a=this.container.bcPlayer().hls.playlists.master.playlists,i=[];if(1<a.length){var t=0;a.forEach(function(n){n.attributes&&n.attributes.RESOLUTION&&i.push(new O(t++,n.attributes.RESOLUTION.width,n.attributes.RESOLUTION.height,n.attributes.BANDWIDTH.bandwidth))}),i.sort(function(n,e){return n.compare(e)}),this.plugin.high=i.pop(),this.plugin.high.label="high",this.plugin.medium=i.pop(),this.plugin.medium.label="medium",this.plugin.low=i.shift(),this.plugin.low.label="low",this.plugin.selectedPlaylistIndex=this.plugin.getDefaultResolution(),this.plugin.view.refreshQualityLabel()}},n.EVENT_HLS_PLUGIN_ACTIVE="EVENT_HLS_PLUGIN_ACTIVE",n}(),Ue=function(){function n(n,a){this.selectedPlaylistIndex=0,this.view=new P(n,this),this.settingsView=a,this.container=n,this.events=new Ve(this.container,this)}return n.prototype.isApplicable=function(){var a=this;return new Promise(function(e,t){var n=a.container.bcPlayer().hls;if(n){var i=n.playlists;if(i){var r=i.master;r&&1<r.playlists.length&&e({})}}t({})})},n.prototype.getDefaultResolution=function(e){switch(e=e||L.get()||n.DEFAULT_QUALITY){case"low":return this.low?this.low.select():this.getDefaultResolution("medium");case"medium":return this.medium?this.medium.select():this.getDefaultResolution("high");case"high":return this.high?this.high.select():0;default:return 0;}},n.prototype.selectPlaylist=function(){return this.container.bcPlayer().tech(!0).hls.playlists.master.playlists[this.selectedPlaylistIndex||0]},n.DEFAULT_QUALITY="medium",n}(),He=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xe=function(a){function e(e){var o=a.call(this,document.createElement("div"))||this;o.container=e,o.element.className="vjs-control vjs-button rp-hidden-control "+Ge.CSS_CLASS_NAME,o.handle=document.createElement("button"),o.element.appendChild(o.handle),o.element["aria-disabled"]=!1;var n=document.createElement("div");return n.className="arrow",o.settingsContainer=document.createElement("div"),o.settingsContainer.className="rp-settings-container hidden no-cc",o.element.appendChild(o.settingsContainer),o.container.getService(ga.environment).browser.isIpad()&&ma.addClass(o.element,Ge.CSS_CLASS_NAME_IPAD),o.videoAutoplay=new b(o,e),o.settingsContainer.appendChild(o.videoAutoplay.element),o.settingsContainer.appendChild(n),o.videoQuality=new Ue(e,o),o}return He(e,a),e.prototype.onReady=function(t){this.container.ready?t():this.container.getService(ga.eventManager).addSingleCustomListener(this.container,Mo.BC_READY,t)},e.prototype.showPremium=function(){var a=this;this.onReady(function(){ma.addClass(a.settingsContainer,"rp-show-premium");var e=a.container.getService(ga.environment),t=e.browser.isDesktop(),n=e.browser.isMobile();(t||n&&e.isSky())&&(a.videoAutoplay.premiumContainer.style.display="block",a.videoAutoplay.autoplayOff.style.display="none",a.videoAutoplay.label.style.display="none",a.videoAutoplay.switch.style.display="none")})},e.prototype.hidePremium=function(){var a=this;this.onReady(function(){ma.removeClass(a.settingsContainer,"rp-show-premium");var e=a.container.getService(ga.environment),t=e.isSky(),n=e.browser.isDesktop(),i=e.browser.isMobile();(n||i&&t)&&(a.videoAutoplay.premiumContainer.style.display="none",a.videoAutoplay.autoplayOff.style.display="block",a.videoAutoplay.label.style.display="block",a.videoAutoplay.switch.style.display="block")})},e.prototype.addVideoQuality=function(){this.settingsContainer.insertBefore(this.videoQuality.view.element,this.settingsContainer.children[0])},e}(T),Ye=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ge=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.view=new xe(e),t.events=new Be(t.container,t.view),t}return Ye(o,a),o.prototype.getName=function(){return o.COMPONENT_NAME},o.prototype.getIndex=function(){return o.COMPONENT_INDEX},o.prototype.registerComponent=function(){var a=this,e=videojs.getComponent("button");videojs.registerComponent(o.COMPONENT_NAME,videojs.extend(e,{createEl:function(){var e=a.getService(ga.environment);if(!e.browser.isIOS()||e.isSky()||!e.browser.isMobile())return a.view.element},handleClick:function(){}}))},o.CSS_CLASS_NAME="rp-settings-button",o.CSS_CLASS_NAME_IPAD="rp-settings-button-ipad",o.pluginName="PLUGIN_SETTINGS",o.COMPONENT_NAME="SettingsButton",o.COMPONENT_INDEX=11,o}(be),We=function(){function s(){this.autoplayEnabled=!0}return s.get=function(e){var t=localStorage.getItem(s.STORAGE_NAME),n=new s,i=s.getDefaultSubscriberBehavior(e);if(!1===i&&(n.autoplayEnabled=i),t)try{var r=JSON.parse(atob(t)),o=e.getService(ga.context).auth;void 0!==o&&o.currentRole===Ke.USER_ANONYMOUS||(void 0!==typeof r.autoplayEnabled&&(n.autoplayEnabled=r.autoplayEnabled),void 0!==typeof r.autoplayDisabledExpiry&&r.autoplayDisabledExpiry&&(n.autoplayDisabledExpiry=new Date(r.autoplayDisabledExpiry)))}catch(t){}return n},s.getDefaultSubscriberBehavior=function(a){var e=[];e.push(pa.THE_AUSTRALIAN),e.push(pa.NEWS),e=e.concat(pa.PLNN_SITES);for(var t=ca.getIFrameURL(),n=!1,i=0,o=e,r;i<o.length;i++)if(r=o[i],-1<t.indexOf(r)){n=!0;break}var s=!0,l=a.getService(ga.context).auth,c=l?l.currentRole:Ke.USER_ANONYMOUS;n&&c===Ke.USER_SUBSCRIBER&&a.getService(ga.context).autoPlay&&(s=!1);var d=a.getPluginInstance(Ge.pluginName),p=null;return d&&(p=d.view.videoAutoplay.manuallySwitchedOn),p||s},s.set=function(e,a){var n={autoplayEnabled:e,autoplayDisabledExpiry:""};a&&(n.autoplayDisabledExpiry=a.toDateString()),localStorage.setItem(s.STORAGE_NAME,btoa(JSON.stringify(n)))},s.prototype.save=function(){s.set(this.autoplayEnabled,this.autoplayDisabledExpiry)},s.STORAGE_NAME="vms.rp.settings",s}(),Fe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ke=function(a){function d(e){var i=a.call(this,e)||this;return i.currentRole="USER_ANONYMOUS",i.eventManager=i.getService(ga.eventManager),i.utagData=i.container.getService(ga.utag),i.provider=i.getAuthProvider(),i.setEvents(),i}return Fe(d,a),d.prototype.authDisabled=function(){return!this.utagData||-1<ca.getDomain().indexOf("escape")},d.prototype.getAuthProvider=function(){var t=null;return this.authDisabled()||(void 0!==this.utagData.get("pc_memtype")||h.getCookie("subscriber_token")?t=d.PROVIDER_IDP:window.gigya&&(t=d.PROVIDER_GIGYA)),t},d.prototype.setEvents=function(){var t=this;this.eventManager.addCustomListener(this.container,d.EVENT_CHECK_LOGIN,function(){switch(t.provider){case d.PROVIDER_IDP:t.checkIdpLoginStatus();break;case d.PROVIDER_GIGYA:t.checkGigyaLoginStatus();break;default:t.currentRole=d.USER_REGISTERED,t.eventManager.trigger(t.container,d.EVENT_USER_STATUS,d.USER_REGISTERED);}})},d.prototype.checkIdpLoginStatus=function(){var t=d.USER_ANONYMOUS;switch(this.utagData.get("pc_memtype")){case"subscriber":t=d.USER_SUBSCRIBER;break;case"registered":t=d.USER_REGISTERED;break;default:t=d.getStatusFromCookie();}this.currentRole=t,this.eventManager.trigger(this.container,d.EVENT_USER_STATUS,t)},d.prototype.isSubscriberOrRegisteredUser=function(){return this.currentRole===d.USER_REGISTERED||this.currentRole===d.USER_SUBSCRIBER},d.getStatusFromCookie=function(){var t=h.getCookie("subscriber_token"),e=d.USER_ANONYMOUS;if(t)try{var n=JSON.parse(t);n.hasOwnProperty("entitlements")&&(e=!0===n.entitlements?d.USER_SUBSCRIBER:d.USER_REGISTERED)}catch(t){}return e},d.prototype.checkGigyaLoginStatus=function(){var t=this,e=d.USER_ANONYMOUS;window.gigya&&window.gigya.accounts&&window.gigya.accounts.getAccountInfo&&window.gigya.accounts.getAccountInfo({extraProfileFields:"address,phones",callback:function(n){n.status===d.GIGYA_FAILED?(t.eventManager.trigger(t.container,d.EVENT_USER_STATUS,e),t.currentRole=e):(t.eventManager.trigger(t.container,d.EVENT_USER_STATUS,d.USER_REGISTERED),t.currentRole=d.USER_REGISTERED)}})},d.prototype.getAuthTokenValues=function(){if(this.provider!==d.PROVIDER_IDP)return"";var t={pcMemType:"",subscriberToken:"undefined",expiry:"",autoplay:"no"};t.pcMemType=this.utagData.get("pc_memtype")||void 0!==typeof this.utagData.get("pc_memtype")?this.utagData.get("pc_memtype")||""!==this.utagData.get("pc_memtype")?this.utagData.get("pc_memtype"):"null":"undefined";var e=h.getCookie("subscriber_token");if(e)try{var n=JSON.parse(e);n.hasOwnProperty("entitlements")&&(t.subscriberToken=!0===n.entitlements?"yes":"no")}catch(e){t.subscriberToken="error"}try{var i=localStorage.getItem(We.STORAGE_NAME),r=JSON.parse(atob(i)),o=Date.parse(r.autoplayDisabledExpiry);if(""===r||""===r.autoplayDisabledExpiry||"Invalid Date"==r.autoplayDisabledExpiry||isNaN(o))t.expiry="invalid";else{var a=new Date(r.autoplayDisabledExpiry),s=new Date;t.expiry=a instanceof Date&&a<s?"expired":"valid"}}catch(e){t.expiry="error"}var c=We.get(this.container);return t.autoplay=!0===c.autoplayEnabled?"yes":"no",t.pcMemType+"|"+t.subscriberToken+"|"+t.expiry+"|"+t.autoplay},d.PROVIDER_GIGYA="GIGYA",d.PROVIDER_IDP="IDP",d.PROVIDER_AUTH0="AUTH0",d.EVENT_CHECK_LOGIN="EVENT_CHECK_LOGIN",d.EVENT_USER_STATUS="EVENT_USER_STATUS",d.USER_ANONYMOUS="USER_ANONYMOUS",d.USER_REGISTERED="USER_REGISTERED",d.USER_SUBSCRIBER="USER_SUBSCRIBER",d.GIGYA_FAILED="FAIL",d}(m),je={dev:{adConfigId:"",enabled:!1},sit:{adConfigId:"84c37b83-011c-46d9-ba0e-5cbd53520f44",enabled:!0},uat:{adConfigId:"f05768f2-3c74-469e-b53a-4ad3931b0561",enabled:!0},beta:{adConfigId:"2cb8109a-39f2-4e4f-a4ce-ec3941116954",enabled:!0},prod:{adConfigId:"2cb8109a-39f2-4e4f-a4ce-ec3941116954",enabled:!0}},Xe=function(){function t(){}return t.get=function(a){var e=je[a.name],t=ca.getSearchParams();return"enabled"===t.ssai&&(e.enabled=!0),t.adConfigId&&(e.adConfigId=t.adConfigId),Ke.getStatusFromCookie()===Ke.USER_SUBSCRIBER&&-1<pa.PROJECT0_SITES.indexOf(a.getDomain())&&(e.enabled=!1),e},t}(),ze=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qe=function(a){function e(e){var i=a.call(this,e)||this;return i.noAdBlocker="00000",i}return ze(e,a),e.prototype.isUsingAdBlocker=function(){var t=this.getService(ga.utag);return this.container.log("[Ad Block Detection]",t.get("cbd"),void 0!==t.get("cbd")&&t.get("cbd")!==this.noAdBlocker),void 0!==t.get("cbd")&&t.get("cbd")!==this.noAdBlocker},e}(m),$e=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ze=function(a){function e(e){var i=a.call(this,e)||this;return i.ap="on",i.vsite="news",i.prod="video",i.kw="",i.pltype="other",i.ph=0,i.pw=0,i.plo=1,i.source="",i.muted="no",i.pos=1,i.uuid="{{system.unique_user_id}}",i.addedValues=[],i.admiralEngaged=!1,i}return $e(e,a),e.prototype.setValues=function(){var n=this.getService(ga.context),e=this.getService(ga.environment);this.advancedTargeting=window.ads_api&&window.ads_api.targeting||{},this.vsite=e.domain,this.ap=!1===n.autoPlay||n.isHubPage?"off":"on",this.kw=e.pageKeywords,this.pltype=n.playerType,this.plo=n.playOrder,this.source=n.capiVideo.source,this.admiralEngaged=n.admiralEngaged},e.prototype.setBCPlayer=function(t){this.ph=t.height(),this.pw=t.width(),this.muted=t.muted()?"yes":"no"},e.prototype.parseAdvanceTargeting=function(){for(var a=0,e=Object.keys(this.advancedTargeting);a<e.length;a++){var t=e[a],n=this.advancedTargeting[t];switch(t){case"kw":continue;case"ksgmnt":n=n.toString();break;default:this[t]=n;}}},e.prototype.addValues=function(n){for(var e in n)this.addedValues.push(e),this[e]=n[e]},e.prototype.clearAdditionalValues=function(){for(;0<this.addedValues.length;)delete this[this.addedValues.pop()]},e.prototype.getVsec=function(){for(var a="",e=0,t=0,n=this.getService(ga.context).capiVideo.categoriesExtended()||["News"];t<n.length&&!(a+="vsec"+ ++e+"="+n[t]+"&",4===e);t++);return a.replace(/\&+$/,"")},e.prototype.get=function(){this.setValues(),this.parseAdvanceTargeting();for(var a="",e=0,t=Object.getOwnPropertyNames(this),n;e<t.length;e++)switch(n=t[e],n){case"uuid":this.getService(ga.context).ssai&&(a+=n+"="+this[n]+"&");break;case"context":case"container":case"serviceProvider":case"advancedTargeting":case"addedValues":continue;case"admiralEngaged":this.admiralEngaged&&(a+="admiral-engaged="+this.admiralEngaged+"&");break;default:a+=n+"="+this[n]+"&";}return a+=this.getVsec(),encodeURIComponent(a.replace(/\&+$/,""))},e}(m),qe=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Je=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.environment=n.container.getService(ga.environment),n.config=Xe.get(n.environment),n}return qe(e,a),e.prototype.augmentSources=function(a){var e=new Ze(this.container);for(var t in a.sources){var n=a.sources[t];if(void 0!==n.vmap){var i="?";n.src.indexOf("?")&&(i="&"),n.vmap+=i+"cust_params="+encodeURIComponent(e.get()),n.vmap+="&iu="+encodeURIComponent(window.ads_api&&window.ads_api.uname||"")+"&ppid=",a.sources[t]=n}}return a},e.prototype.getAdConfigId=function(){var a=this;return new Promise(function(e,t){a.container.getService(ga.context).checkUserTypeParameter();var n=a.config.adConfigId;a.config.enabled?a.container.bcPlayer().usingAdBlocker().then(function(i){(a.container.log("[SSAI]","isUsingAdBlocker",i),new Qe(a.container).isUsingAdBlocker()!==i)&&a.getService(ga.analytics).omniture.delay([f.ADBLOCK_DETECTION_MISMATCH]),i&&!a.container.getService(ga.context).adsDisabled?(a.getService(ga.context).ssai=!0,e(n)):t()}).catch(function(){t()}):t()})},e.pluginName="PLUGIN_SSAI",e}(y),et=function(){function t(){}return t.VIDEO_CLOUD_ERR_NOT_PLAYABLE={type:"VIDEO_CLOUD_ERR_NOT_PLAYABLE",headline:"The Video Cloud video is not playable.",message:"Please try again",canRetry:!1},t.MEDIA_ERR_ABORTED={type:"MEDIA_ERR_ABORTED",headline:"The video connection was lost",message:"Please check your internet connection and try again",canRetry:!0},t.MEDIA_ERR_NETWORK={type:"MEDIA_ERR_NETWORK",headline:"The video connection was lost",message:"Please check your internet connection and try again",canRetry:!0},t.MEDIA_ERR_DECODE={type:"MEDIA_ERR_DECODE",headline:"Unable to playback video",message:"The video you're trying to watch is not supported by this device or browser",canRetry:!1},t.MEDIA_ERR_SRC_NOT_SUPPORTED={type:"MEDIA_ERR_SRC_NOT_SUPPORTED",headline:"Unable to playback video",message:"The video you're trying to watch is not supported by this device or browser",canRetry:!1},t.MEDIA_ERR_ENCRYPTED={type:"MEDIA_ERR_ENCRYPTED",headline:"Unable to playback video",message:"The video you're trying to watch is not supported by this device or browser",canRetry:!1},t.MEDIA_ERR_UNKNOWN={type:"MEDIA_ERR_UNKNOWN",headline:"Unable to playback video",message:"An unknown error has occurred. Please reload the page and try again",canRetry:!1},t.PLAYER_ERR_NO_SRC={type:"PLAYER_ERR_NO_SRC",headline:"Unable to playback video",message:"Unfortunately we were not able to play the video you requested",canRetry:!1},t.PLAYER_ERR_TIMEOUT={type:"PLAYER_ERR_TIMEOUT",headline:"The video connection was lost",message:"Please check your internet connection and try again",canRetry:!0},t.VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND={type:"VIDEO_CLOUD_ERR_VIDEO_NOT_FOUND",headline:"The video was not found",message:"This video does not exist. Please select another video.",canRetry:!0},t.VMS_ERROR={type:"VMS_ERROR",headline:"The video could not be played.",message:"This video could not be played. Please select another video.",canRetry:!0},t}(),tt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nt=function(a){function e(t){return a.call(this,t,e.pluginName)||this}return tt(e,a),e.prototype.getError=function(a){var e=et[a.error_code],t=e&&e.headline||"The video cannot be played",o=e&&e.message||"Please select another video from the recommendations list";return{code:a.error_code,headline:t,message:o,dismiss:!0}},e.pluginName="PLUGIN_FRIENDLY_ERRORS",e}(y),at=function(){function n(){}return n.getHiddenProp=function(){var n=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var e=0;e<n.length;e++)if(n[e]+"Hidden"in document)return n[e]+"Hidden";return null},n.isHidden=function(){var e=n.getHiddenProp();return!!e&&document[e]},n.changeEventName=function(){return n.getHiddenProp().replace(/[H|h]idden/,"")+"visibilitychange"},n}(),it=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ot=function(s){function a(e){var l=s.call(this,e)||this,n=l.getService(ga.eventManager);if(l.tabContainer=l.findTabContainer(),null!==l.tabContainer)for(var i=l.tabContainer.getElementsByClassName("tab"),r=0,o;r<i.length;r++)o=i.item(r),ma.onClick(o,function(){n.trigger(l.container,"CHECK_VISIBILITY")});return l}return it(a,s),a.prototype.findTabContainer=function(){for(var t=this.container.view.wrapper,e=1;e<=a.TAB_MAX_LEVELS&&t&&t.className&&!t.className.match(a.TAB_CSS_CLASSNAME);)t=t.parentElement,e++;return null===t?null:t.className.match(a.TAB_CSS_CLASSNAME)&&t},a.TAB_CSS_CLASSNAME="tabbed",a.TAB_MAX_LEVELS=4,a}(m),rt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),st=function(a){function o(e){var i=a.call(this,e)||this;return i.isVisible=!0,i.tabVisibility=new ot(e),i}return rt(o,a),o.prototype.getVisibilityRate=function(t){return Y.getVisibilityRate(t)},o.prototype.setEvents=function(){var t=this,e=this.getService(ga.eventManager),n=function(){var n=t.getVisibilityRate(t.container.view.element);(t.container.log("visibility",n,o.visibilityThreshold),n<o.visibilityThreshold)?(t.isVisible&&(t.isVisible=t.getVisibilityRate(t.container.view.element)>o.visibilityThreshold,e.trigger(t.container,o.EVENT_SCROLL_HIDDEN)),0===n&&e.trigger(t.container,o.EVENT_SCROLL_FULLY_HIDDEN)):t.isVisible||(t.isVisible=t.getVisibilityRate(t.container.view.element)>o.visibilityThreshold,t.getService(ga.context).hasBeenVisible=!0,e.trigger(t.container,o.EVENT_SCROLL_VISIBLE))};e.addCustomListener(this.container,"CHECK_VISIBILITY",function(){n()}),window.addEventListener("scroll",function(){t.container.bcPlayer()&&n()}),window.addEventListener(at.changeEventName(),function(){at.isHidden()?t.isVisible&&(t.isVisible=!1,e.trigger(t.container,o.EVENT_PAGE_HIDDEN)):!1===t.isVisible&&(t.isVisible=t.getVisibilityRate(t.container.view.element)>o.visibilityThreshold,e.trigger(t.container,o.EVENT_PAGE_VISIBLE))})},o.EVENT_SCROLL_HIDDEN="ON_SCROLL_HIDDEN",o.EVENT_SCROLL_FULLY_HIDDEN="ON_SCROLL_FULLY_HIDDEN",o.EVENT_SCROLL_VISIBLE="ON_SCROLL_VISIBLE",o.EVENT_PAGE_VISIBLE="ON_PAGE_HIDDEN",o.EVENT_PAGE_HIDDEN="ON_PAGE_VISIBLE",o.visibilityThreshold=50,o}(m),lt=function(){function t(){}return t.prototype.load=function(t){this.position=t.style.position,this.top=t.style.top,this.left=t.style.left,this.width=t.style.width,this.height=t.style.height,this.zindex=t.style["z-index"]},t.prototype.apply=function(t){t.style.position=this.position,t.style.top=this.position,t.style.left=this.position,t.style.width=this.position,t.style.height=this.position,t.style["z-index"]=this.position},t}(),dt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ct=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;if(n.visible=!1,n.closed=!1,n.originStyle=new lt,n.currentDuration=5,n.parentVisibilityThreshold=15,n.createFake(),n.createTarget()){var i=n.container.view.element.parentNode;n.originStyle.load(n.container.view.element),n.stickyContainer=n.getStickyContainer(i),n.countDownPlugin=n.container.getPluginInstance(gn.pluginName),i.appendChild(n.stickyContainer),n.setEvents()}return n}return dt(e,a),e.prototype.getStickyContainer=function(n){var e=document.createElement("div");return e.className="sticky-parent",e.style.display="none",e.style.height=n.getBoundingClientRect().height+"px",e.style.width=n.getBoundingClientRect().width+"px",e},e.prototype.createFake=function(){this.fakeElement=document.createElement("div"),this.fakeElement.className="vms module vms-queued vms-player",this.fakeElement.innerHTML="<div class=\"videoWrapper\"></div><div class=\"module-header vms-header\">"+this.container.view.module.moduleHeader.innerHTML+"</div>",this.fakeElement.style.visibility="hidden"},e.prototype.checkVisibility=function(){this.visible&&this.container.bcPlayer()&&Y.getVisibilityRate(this.stickyContainer)>this.parentVisibilityThreshold&&(this.container.view.element.classList.remove("vms-sticky"),this.visible=!1,this.removeStickyCss(),this.getService(ga.eventManager).trigger(this.container,e.STICKY_HIDDEN_EVENT))},e.prototype.createTarget=function(){var t=this.container.view.element.getAttribute("vms-sticky-target");return this.target=document.getElementById(t),null!=this.target&&(this.stickyTarget=document.createElement("div"),this.stickyTarget.className="vms-sticky-close",this.stickyTarget.style.display="none",this.closeButton=document.createElement("button"),this.closeButton.className="vms-sticky-close-button",this.closeButton.innerHTML="Close &#xd7;",this.stickyTarget.appendChild(this.closeButton),this.stickyTarget.appendChild(this.fakeElement),this.target.appendChild(this.stickyTarget),!0)},e.prototype.onStickyHidden=function(){this.visible||this.closed||!(0>this.container.view.element.getBoundingClientRect().top)||(this.currentDuration=this.countDownPlugin.duration,this.stickyContainer.style.display="block",this.visible=!0,this.container.view.element.classList.add("vms-sticky"),this.refreshStickyCss(),this.getService(ga.eventManager).trigger(this.container,e.STICKY_VISIBLE_EVENT))},e.prototype.setEvents=function(){var n=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,st.EVENT_SCROLL_FULLY_HIDDEN,function(){return n.onStickyHidden()}),e.addCustomListener(this.container,"CHECK_VISIBILITY",function(){return n.checkVisibility()}),window.addEventListener("scroll",function(){return n.checkVisibility()}),window.addEventListener("resize",function(){return n.refreshStickyCss()}),this.closeButton.onclick=function(){return n.onClose()},e.addCustomListener(this.container,st.EVENT_SCROLL_VISIBLE,function(){n.persistCountdownValue()})},e.prototype.persistCountdownValue=function(){this.countDownPlugin.completed||(this.countDownPlugin.initialDuration=this.currentDuration,this.countDownPlugin.events.manuallyPaused||this.countDownPlugin.reset())},e.prototype.onClose=function(){this.removeStickyCss(),this.container.view.element.classList.remove("vms-sticky"),this.closeButton.parentNode.removeChild(this.closeButton),this.closed=!0,this.getService(ga.eventManager).trigger(this.container,st.EVENT_SCROLL_HIDDEN),this.getService(ga.analytics).omniture.track([f.STICKY_PLAYER_CLOSED])},e.prototype.removeStickyCss=function(){this.originStyle.apply(this.container.view.element),this.stickyTarget.style.display="none",this.container.view.element.setAttribute("width",""+this.originStyle.width),this.container.view.element.setAttribute("height",""+this.originStyle.height),this.container.bcPlayer().dimensions(this.originStyle.width,this.originStyle.height),this.stickyContainer.style.display="none",this.container.view.element.style["min-height"]="0",this.container.view.element.style["max-height"]="100%"},e.prototype.refreshStickyCss=function(){this.visible&&(this.stickyTarget.style.display="block",this.container.view.element.style.position="fixed",this.closeButton.style["margin-top"]="-"+2*this.closeButton.offsetHeight+"px",this.container.view.element.style.top=this.target.offsetTop-this.closeButton.offsetHeight+"px",this.container.view.element.style.left=this.target.offsetLeft+"px",this.container.view.element.style.width=this.target.offsetWidth+"px",this.container.view.element.style["min-height"]=this.target.offsetHeight+"px",this.container.view.element.style["max-height"]=this.target.offsetHeight+e.DESCRIPTION_MAX_HEIGHT+"px",this.container.view.element.style["z-index"]=1e4,this.container.bcPlayer().dimensions(this.target.offsetWidth,this.target.offsetHeight))},e.pluginName="PLUGIN_STICKY",e.DESCRIPTION_MAX_HEIGHT=100,e.STICKY_VISIBLE_EVENT="STICKY_VISIBLE",e.STICKY_HIDDEN_EVENT="STICKY_HIDDEN",e.STICKY_DESCRIPTION_HEIGHT=52,e}(y),pt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mt=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return pt(e,n),e.prototype.withCapiVideo=function(a,e){var t=this,i;void 0===e&&(e=!0),(null==a?void 0:a.platformId)!==(null===(i=this.video)||void 0===i?void 0:i.platformId)&&(this.video=a,setTimeout(function(){t.refresh(e)},500))},e.prototype.attachTo=function(t){t.appendChild(this.element)},e}(T),ut=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),gt=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_NAME,n.duration=document.createElement("div"),n.duration.className="vms-mobile-metadata-duration",n.elementsContainer=document.createElement("div"),n.spinnerContainer=document.createElement("div"),n.spinnerContainer.className="vms-spinner-container",n.title=document.createElement("div"),n.title.className="vms-mobile-metadata-title",n.element.appendChild(n.spinnerContainer),n.element.appendChild(n.elementsContainer),n.elementsContainer.appendChild(n.duration),n.elementsContainer.appendChild(n.title),n.elementsContainer.className="vms-metadata-elements",n}return ut(e,a),e.prototype.getTitle=function(){var n=this.container.getService(ga.context),e=this.container.view.element.getAttribute("vms-title")||this.video.title;return n.firstPlay?e:this.video.title},e.prototype.refresh=function(t){void 0===t&&(t=!0),this.video&&(this.title.innerText=this.getTitle(),this.setPremium(),0<this.video.duration?this.duration.innerText=""+D.formatDuration(this.video.duration/1e3):(this.duration.className="live-marker",this.duration.innerHTML="LIVE"))},e.prototype.setPremium=function(){var t=this.container.getService(ga.environment);-1<pa.PREMIUM_VIDEO_SITES.indexOf(t.getDomain())&&(this.video.accessType===l.ACCESS_TYPE_PREMIUM?(this.premium||(this.premium=document.createElement("div"),this.premium.className="vms-premium-tag",this.premium.innerText="PREMIUM",this.elementsContainer.prepend(this.premium)),ma.addClass(this.container.view.element,"vms-premium")):(ma.removeClass(this.container.view.element,"vms-premium"),this.premium&&(this.elementsContainer.removeChild(this.premium),this.premium=null)))},e.prototype.shave=function(){R(this.title,50,{character:"..."})},e.CSS_NAME="vms-mobile-metadata",e}(mt),_t=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Et=function(a){function e(e,s,n,i){var r=a.call(this,e)||this;return r.view=s,r.descriptionView=n,r.liveMarker=i,r}return _t(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,Mo.BC_READY,function(){a.view.attachTo(a.container.bcPlayer().el_),a.descriptionView.attachTo(a.container.view.wrapper),a.liveMarker.attachTo(a.container.bcPlayer().el_)}),e.addCustomListener(this.container,M.CAPI_FETCHED,function(e){a.view.withCapiVideo(e),a.descriptionView.withCapiVideo(e);var t=a.container.getService(ga.environment);("json"===a.container.view.element.getAttribute(Ce.EXT_RECOMMENDATIONS_TYPE)||t.isNewsHub())&&ma.addClass(a.container.view.element,"vms-vaafca-page")}),e.addListener(this.container,"ready",function(){a.descriptionView.shave(),a.view.shave()}),e.addCustomListener(this.container,ct.STICKY_VISIBLE_EVENT,function(){a.view.shave()}),window.addEventListener("orientationchange",function(){a.descriptionView.shave()}),e.addCustomListener(this.container,ye.PLAYLIST_ITEM_PLAYED,function(e){e&&e.capiVideo&&(a.view.withCapiVideo(e.capiVideo),a.view.title.innerText=e.capiVideo.title,a.view.setPremium(),a.view.duration.innerText=""+D.formatDuration(e.capiVideo.duration/1e3),a.descriptionView.withCapiVideo(e.capiVideo))}),e.addMultipleListener(this.container,["ads-ad-started","play"],function(){setTimeout(function(){a.container.bcPlayer().userActive(!1)},2e3)})},e}(m),At=function(){function t(){}return t.findCaption=function(a,e){var t=e.caption,n=a.getService(ga.context),i=a.view.module.moduleContent.getElementsByClassName("description"),r=0<i.length?i[0]:null;return r&&r.textContent!==t&&n.firstPlay&&(t=r.textContent),a.view.element.getAttribute("vms-caption")&&n.firstPlay&&(t=a.view.element.getAttribute("vms-caption")),t},t}(),yt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),vt=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.collapseAdded=!1,n.container=t,n.element.className=e.CSS_CLASS_NAME,n.description=document.createElement("div"),n.description.className="vms-mobile-meta-description",n.element.append(n.description),n}return yt(e,a),e.prototype.refresh=function(n){var e=this;void 0===n&&(n=!0),this.video&&(this.description.classList.remove("expanded"),this.collapseAdded=!1,this.description.innerHTML=At.findCaption(this.container,this.video),n&&document.addEventListener(this.getEventId(),function(){e.description.classList.toggle("expanded"),e.collapseAdded||(e.collapseAdded=!0,e.description.innerHTML+=" <button class=\"vms-mobile-metadata-less\" onclick=\"document.dispatchEvent(new Event('"+e.getEventId()+"'))\">less</button>",e.addEvents())}),this.shave())},e.prototype.addEvents=function(){var t=this;this.container.getService(ga.eventManager).addListener(this.container,"loadstart",function(){t.collapseAdded=!1,t.description.classList.remove("expanded")})},e.prototype.getEventId=function(){return"vms-show-more-"+this.video.platformId},e.prototype.getButton=function(){return" ... <button class=\"vms-mobile-metadata-more\" onclick=\"document.dispatchEvent(new Event('"+this.getEventId()+"'))\">more</button>"},e.prototype.shave=function(){R(this.description,80,{character:this.getButton()})},e.CSS_CLASS_NAME="vms-mobile-meta-description-container",e}(mt),Ct=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),St=function(n){function e(){var e=n.call(this,document.createElement("div"))||this;return e.element.className="vms-live-marker-playback",e.element.innerHTML="&nbsp;",e}return Ct(e,n),e.prototype.attachTo=function(t){t.appendChild(this.element)},e}(T),ht=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Tt=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.container=t,n.isApplicable(!0)&&(n.view=new gt(n.container),n.descriptionView=new vt(n.container),n.liveMarker=new St,n.events=new Et(n.container,n.view,n.descriptionView,n.liveMarker),n.events.setEvents()),n}return ht(e,a),e.pluginName="PLUGIN_MOBILE_METADATA",e}(re),It=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nt=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.getElement().className=e.MAIN_CSS_CLASS,t.playButton=document.createElement("div"),t.playButton.className="vms-play-button-play",t.getElement().appendChild(t.playButton),ma.addClass(t.element,e.CONTAINER_CSS_CLASS),t}return It(e,a),e.MAIN_CSS_CLASS="vms-mobile-play",e.CONTAINER_CSS_CLASS="vms-mobile-play-container",e}(Z),bt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wt=function(a){function e(e,o,n){var i=a.call(this,e)||this;return i.view=o,i.spinner=n,i.setEvents(),i}return bt(e,a),e.prototype.setEvents=function(){var s=this,e=this.getService(ga.eventManager),t=this.container.getService(ga.context),n=this.container.getPluginInstance(gn.pluginName),i=function(){o.isVaafca(s.container)&&t.firstPlay&&n.started&&(ma.addClass(s.view.element,"hidden-node"),ma.removeClass(s.spinner.element,"hidden-node"),s.spinner.spinner.start(n.duration))};e.addCustomListener(this.container,Ft.COUNTDOWN_STARTED,function(){i()}),e.addCustomListener(this.container,Mo.BC_READY,function(){s.container.bcPlayer().el_.appendChild(s.view.element),s.container.bcPlayer().el_.appendChild(s.spinner.element),i()}),e.addCustomListener(this.container,ct.STICKY_VISIBLE_EVENT,function(){i()});var r=function(){ma.addClass(s.view.element,"hidden-node"),ma.addClass(s.spinner.element,"hidden-node"),setTimeout(function(){s.spinner.spinner.reset()},500)},o=this.container.getService(ga.environment);o.isVaafca(this.container)&&e.addListener(this.container,"play",function(){r()}),o.isVaafca(this.container)&&ma.onClick(this.spinner.spinner.playButton,function(){r(),n&&n.view&&n.view.play&&n.view.play.element.click()}),e.addCustomListener(this.container,ct.STICKY_HIDDEN_EVENT,function(){ma.removeClass(s.view.element,"hidden-node"),ma.addClass(s.spinner.element,"hidden-node")}),e.addSingleEventListener(this.container,"play",function(){s.view.hide()}),ma.onClickOnly(this.view.element,function(){s.container.bcPlayer().play(),s.view.hide()})},e}(m),Pt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lt=function(n){function a(){return null!==n&&n.apply(this,arguments)||this}return Pt(a,n),a.prototype.resize=function(t){this.getService(ga.eventManager).trigger(this.container,a.EVENT_RESIZE,{size:t})},a.EVENT_RESIZE="EVENT_RESIZE_AUTO_CSS",a}(m),Ot=function(){function t(a,i,t){this.minWidth=a,this.maxWidth=i,this.cssClass=t}return t.prototype.isApplicable=function(t){return t>=this.minWidth&&t<this.maxWidth},t}(),ft=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rt=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;return t.setConfig(),t.events=new Lt(e),t.shouldObserve().then(function(){return t.observe()}),t}return ft(s,a),s.prototype.getPreviousSize=function(){return this.previousSize},s.prototype.shouldObserve=function(){var a=this;return new Promise(function(e,t){a.getService(ga.environment).browser.isMobile()||a.container.view.element.getAttribute("vms-sticky-target")?e():t()})},s.prototype.setConfig=function(){var t=[];t.push(new Ot(0,320,s.CSS_MINI)),t.push(new Ot(320,375,s.CSS_SMALL)),t.push(new Ot(375,414,s.CSS_MEDIUM)),t.push(new Ot(414,568,s.CSS_LARGE)),t.push(new Ot(568,2048,s.CSS_EXTRA_LARGE)),this.sizeConfig=t},s.prototype.onResized=function(s){for(var e in s){var t=s[e];if(t.contentRect)for(var n=t.contentRect.width,i=0,r=this.sizeConfig,o;i<r.length;i++)o=r[i],o.isApplicable(n)?this.previousSize!==o&&(this.previousSize=o,ma.addClass(this.container.view.element,o.cssClass),this.events.resize(o)):ma.removeClass(this.container.view.element,o.cssClass)}},s.prototype.fallback=function(){if(this.getService(ga.environment).browser.isMobile()){var t=window.matchMedia("(max-width: 320px)"),e=window.matchMedia("(min-width: 320px) and (max-width: 375px)"),n=window.matchMedia("(min-width: 375px) and (max-width: 414px)"),a=window.matchMedia("(min-width: 414px) and (max-width: 568px)"),i=window.matchMedia("(min-width: 568px) and (max-width: 2048px)");t.matches&&ma.addClass(this.container.view.element,s.CSS_MINI),e.matches&&ma.addClass(this.container.view.element,s.CSS_SMALL),n.matches&&ma.addClass(this.container.view.element,s.CSS_MEDIUM),a.matches&&ma.addClass(this.container.view.element,s.CSS_LARGE),i.matches&&ma.addClass(this.container.view.element,s.CSS_EXTRA_LARGE)}},s.prototype.observe=function(){var n=this;try{this.resizeObserver=new ne.ResizeObserver(function(e){n.onResized(e)}),this.resizeObserver.observe(this.container.view.element)}catch(t){this.fallback()}},s.pluginName="PLUGIN_AUTOMATIC_CSS_SIZE",s.CSS_MINI="mobileui-mini",s.CSS_SMALL="mobileui-small",s.CSS_MEDIUM="mobileui-medium",s.CSS_LARGE="mobileui-large",s.CSS_EXTRA_LARGE="mobileui-extra-large",s}(y),Dt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mt=function(n){function e(e){var a=n.call(this,e)||this;return a.countdown=e.getPluginInstance(gn.pluginName),a.setEvents(),a}return Dt(e,n),e.prototype.setEvents=function(){var a=this;this.getService(ga.eventManager).addCustomListener(this.container,Bt.START_COUNTDOWN,function(e){if(a.countdown){var t=e&&e.duration?e.duration:Bt.COUNTDOWN_DURATION,n=e&&e.callback?e.callback:null;a.countdown.initialDuration=t,a.countdown.duration=t,a.countdown.start(n)}})},e}(m),kt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bt=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;return t.started=!1,t.restarted=!1,t.cancelled=!1,t.isApplicable()&&(t.events=new Mt(e,t)),t}return kt(s,a),s.prototype.cancel=function(){this.cancelled=!0},s.prototype.start=function(t,e){var n=this,a=this.container.getService(ga.eventManager);e||(e=s.COUNTDOWN_DURATION),t&&(this.callback=t);var i=function(){return n.restarted||n.cancelled?(n.restarted=!1,n.cancelled=!1,!1):void(e--,n.started=!0,0===e&&(a.trigger(n.container,s.COUNTDOWN_FINISHED),n.started=!1,n.restarted=!1,n.callback&&(n.callback(),n.callback=null)),0<e&&setTimeout(i,1e3))};a.trigger(this.container,s.COUNTDOWN_STARTED,e),setTimeout(i,1e3)},s.pluginName="MOBILE_COUNT_DOWN_PLUGIN",s.COUNTDOWN_DURATION=10,s.COUNTDOWN_FINISHED="EVENT_MOBILE_CD_FINISHED",s.COUNTDOWN_STARTED="EVENT_MOBILE_CD_STARTED",s.RESTART_COUNTDOWN="EVENT_MOBILE_CD_RESTARTED",s.COUNTDOWN_CANCELLED="EVENT_MOBILE_CD_CANCELLED",s.START_COUNTDOWN="EVENT_MOBILE_CD_START",s}(re),Vt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ut=function(a){function o(e){var t=a.call(this,document.createElement("div"))||this;t.getElement().className=o.MAIN_CSS_CLASS,t.container=e,t.spinnerContainer=document.createElement("div"),t.spinnerContainer.className="es-spinner-container";var n="http://www.w3.org/2000/svg";return t.spinner=document.createElementNS(n,"svg"),t.spinner.setAttribute("class","es-spinner"),t.baseCircleContainer=document.createElementNS(n,"g"),t.baseCircleContainer.setAttribute("class","es-base-circle-container"),t.baseCircle=document.createElementNS(n,"circle"),t.baseCircle.setAttribute("class","es-base-spinner-circle"),t.baseCircleContainer.appendChild(t.baseCircle),t.circleContainer=document.createElementNS(n,"g"),t.circleContainer.setAttribute("class","es-circle-container"),t.circle=document.createElementNS(n,"circle"),t.circle.setAttribute("class","es-spinner-circle"),t.circleContainer.appendChild(t.circle),t.spinner.appendChild(t.baseCircleContainer),t.spinner.appendChild(t.circleContainer),t.spinnerContainer.appendChild(t.spinner),t.playButton=document.createElement("div"),t.playButton.className="es-play-button",t.spinnerContainer.appendChild(t.playButton),t.getElement().appendChild(t.spinnerContainer),t.setEvents(),t}return Vt(o,a),o.prototype.setEvents=function(){var a=this,e=this.container.getService(ga.eventManager);e.addCustomListener(this.container,Lt.EVENT_RESIZE,function(n){a.display(n);var t=a.container.getService(ga.environment);(t.browser.isLandscapeMode()||t.browser.isPortrait())&&(e.trigger(a.container,Bt.RESTART_COUNTDOWN),a.restart(Bt.COUNTDOWN_DURATION))}),e.addListener(this.container,"ended",function(){a.restart(Bt.COUNTDOWN_DURATION),setTimeout(function(){if(a.container.getService(ga.environment).browser.isMobile()){var t=a.getNextPlayingItem();t?e.trigger(a.container,o.START_SPINNER_EVENT,function(){a.container.serviceProvider.get(ga.eventManager).trigger(a.container,ye.ITEM_PLAYED_THROUGH_AUTOPLAY,t.id)}):e.trigger(a.container,ge.PLAYLIST_ENDED)}},500)}),e.addCustomListener(this.container,o.START_SPINNER_EVENT,function(n){e.trigger(a.container,Bt.START_COUNTDOWN,{callback:n})}),e.addCustomListener(this.container,Ft.COUNTDOWN_STARTED,function(){a.start(Bt.COUNTDOWN_DURATION)}),e.addCustomListener(this.container,ge.PLAYLIST_ENDED,function(){a.reset()})},o.prototype.getNextPlayingItem=function(){var a=this.container.getService(ga.context),e=this.container.getPluginInstance(ge.pluginName).events.playlistItems,t=null;if(e&&0<e.length&&a.mobilePlaylistItems&&0<a.mobilePlaylistItems.length)for(var n=function(n){if(t=e.find(function(e){return!e.played&&e.capiVideo&&e.capiVideo.id===a.mobilePlaylistItems[n]}))return"break"},i=0;i<a.mobilePlaylistItems.length&&!("break"===n(i));i++);return t},o.prototype.display=function(a){a&&a.size&&(a=a.size);var e=[Rt.CSS_MINI,Rt.CSS_SMALL,Rt.CSS_MEDIUM],t=[Rt.CSS_LARGE,Rt.CSS_EXTRA_LARGE];a&&a.cssClass&&-1!==e.indexOf(a.cssClass)?this.smallSpinner():a&&a.cssClass&&-1!==t.indexOf(a.cssClass)&&this.largeSpinner()},o.prototype.smallSpinner=function(){this.circle.setAttribute("r",""+o.SPINNER_SMALL_RADIUS),this.circle.setAttribute("cy",""+o.SPINNER_SMALL_DIMENSION),this.circle.setAttribute("cx",""+o.SPINNER_SMALL_DIMENSION),this.circle.setAttribute("stroke-width","2"),this.baseCircle.setAttribute("r",""+o.SPINNER_SMALL_RADIUS),this.baseCircle.setAttribute("cy",""+o.SPINNER_SMALL_DIMENSION),this.baseCircle.setAttribute("cx",""+o.SPINNER_SMALL_DIMENSION),this.baseCircle.setAttribute("stroke-width","2"),this.initialOffset=2*o.SPINNER_SMALL_RADIUS*oa,this.reset()},o.prototype.largeSpinner=function(){this.circle.setAttribute("r",""+o.SPINNER_LARGE_RADIUS),this.circle.setAttribute("cy",""+o.SPINNER_LARGE_DIMENSION),this.circle.setAttribute("cx",""+o.SPINNER_LARGE_DIMENSION),this.circle.setAttribute("stroke-width","2"),this.baseCircle.setAttribute("r",""+o.SPINNER_LARGE_RADIUS),this.baseCircle.setAttribute("cy",""+o.SPINNER_LARGE_DIMENSION),this.baseCircle.setAttribute("cx",""+o.SPINNER_LARGE_DIMENSION),this.baseCircle.setAttribute("stroke-width","2"),this.initialOffset=2*o.SPINNER_LARGE_RADIUS*oa,this.reset()},o.prototype.start=function(n){var e=this;this.circle.style.transition="all "+(n-.5)+"s linear",this.circle.style.strokeDashoffset=this.initialOffset,setTimeout(function(){e.circle.style.strokeDashoffset=0},500)},o.prototype.restart=function(){this.circle.style.transition=null,this.circle.style.transition="transition: none",this.circle.style.strokeDashoffset=this.initialOffset,this.circle.style.strokeDasharray=""+this.initialOffset},o.prototype.reset=function(){this.circle.style.strokeDashoffset=this.initialOffset,this.circle.style.strokeDasharray=""+this.initialOffset},o.MAIN_CSS_CLASS="es-mobile-spinner-container",o.SPINNER_SMALL_RADIUS=23.97,o.SPINNER_SMALL_DIMENSION=26.5,o.SPINNER_LARGE_RADIUS=31.46,o.SPINNER_LARGE_DIMENSION=34.78,o.START_SPINNER_EVENT="start-spinner-event",o}(T),Ht=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xt=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.getElement().className=e.MAIN_CSS_CLASS,n.container.getService(ga.environment).isVaafca(n.container)&&(n.spinner=new Ut(n.container),n.getElement().appendChild(n.spinner.element)),ma.addClass(n.element,e.CONTAINER_CSS_CLASS),n}return Ht(e,a),e.MAIN_CSS_CLASS="vms-mobile-spinner",e.CONTAINER_CSS_CLASS="vms-mobile-spinner-container hidden-node",e}(Z),Yt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gt=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable(!0)&&(n.spinner=new xt(n.container),n.view=new Nt,n.events=new wt(t,n.view,n.spinner)),n}return Yt(e,a),e.prototype.isApplicable=function(e){var t=a.prototype.isApplicable.call(this,e),n=this.getService(ga.environment),i=this.getService(ga.context);return!(n.isSky()&&!n.isVaafca(this.container)&&i.canAutoplay())&&t},e.pluginName="PLUGIN_MOBILE_PLAY_BUTTON",e}(re),Wt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ft=function(a){function e(e){var o=a.call(this,e.container)||this;o.manuallyPaused=!1,o.wasAutoplayed=!0,o.firstPlay=!0,o.event39Tracked=!1,o.countdown=e,o.view=o.countdown.view;var n=o.getService(ga.eventManager);e.mode===gn.MODE_REGULAR&&(o.view.getElement().onmouseover=function(){o.showPause()},o.view.getElement().onmouseleave=function(){o.restart()}),o.getService(ga.context).canAutoplay()&&ma.onClick(o.view.element,function(){o.manuallyPaused=!0,o.pause()}),o.bindClick();var i=o.getService(ga.context);return n.addListener(o.countdown.container,"ready",function(){var a=o.container.bcPlayer(),e=function(){o.wasAutoplayed=!1,o.manuallyPaused=!!a.paused()};ma.onClick(a.controlBar.playToggle.el_,e),ma.onClick(a.tech_.el_,e),ma.onFutureClick(o.countdown.view.element,e),a.adControlBar&&a.adControlBar.playToggle&&ma.onClick(a.adControlBar.playToggle.el_,e),n.addListener(o.container,"play",function(){o.manuallyPaused=!1}),o.countdown&&o.countdown.display(),n.trigger(o.container,"CHECK_VISIBILITY")}),n.addListener(o.countdown.container,"play",function(){o.countdown=null,o.view.hide()}),n.addCustomListener(o.countdown.container,st.EVENT_SCROLL_HIDDEN,function(){o.pause();var t=o.getService(ga.context);o.countdown&&o.countdown.started&&!o.event39Tracked&&t.hasBeenVisible&&(o.event39Tracked=!0,o.getService(ga.analytics).omniture.track([f.ONSCROLL_HIDDEN]))}),n.addCustomListener(o.countdown.container,st.EVENT_SCROLL_VISIBLE,function(){var t=o.container.getService(ga.pageManager);t.currentlyPlaying&&t.currentlyPlaying!==o.container?o.pause():i.errored||o.manuallyPaused||(o.paused=!1,ma.removeClass(o.container.view.wrapper,"vms-autoplay-paused"),o.countdown&&o.countdown.reset())}),n.addCustomListener(o.countdown.container,st.EVENT_PAGE_HIDDEN,function(){o.pause()}),n.addCustomListener(o.countdown.container,st.EVENT_PAGE_VISIBLE,function(){i.errored||o.manuallyPaused||!i.visibility.isVisible||(o.paused=!1,ma.removeClass(o.container.view.wrapper,"vms-autoplay-paused"),o.countdown&&o.countdown.reset())}),n.addCustomListener(o.countdown.container,Ce.ON_UP_NEXT,function(t){o.view.show(),o.firstPlay=!1,setTimeout(function(){o.getService(ga.environment).browser.isMobile()||o.countdown&&o.countdown.start(t)},100)}),n.addCustomListener(o.container,ct.STICKY_VISIBLE_EVENT,function(){var t;(!(null!==(t=o.container.bcPlayer())&&void 0!==t)||!t.hasStarted())&&i.canAutoplay()&&o.moveCountdown()}),n.addListener(o.container,"ready",function(){var t;(!(null!==(t=o.container.bcPlayer())&&void 0!==t)||!t.hasStarted())&&i.canAutoplay()&&i.isSticky()&&o.moveCountdown()}),n.addCustomListener(o.container,ct.STICKY_HIDDEN_EVENT,function(){var n;if((!(null!==(n=o.container.bcPlayer())&&void 0!==n)||!n.hasStarted())&&i.canAutoplay()){var e=o.container.getPluginInstance(Tt.pluginName).view.spinnerContainer.children[0];o.countdown.getElementContainer().appendChild(e),ma.addClass(o.countdown.view.element,"vms-mobile-autoplay")}}),o}return Wt(e,a),e.prototype.moveCountdown=function(){var a=this.container.getPluginInstance(Gt.pluginName),t;null===(t=null==a?void 0:a.view)||void 0===t||t.hide();var e=this.container.getPluginInstance(Tt.pluginName);e.view.spinnerContainer.append(this.view.getElement()),ma.addClass(e.view.element,"vms-mobile-autoplay")},e.prototype.restart=function(){!this.paused&&this.wasAutoplayed&&(this.view.pause.hide(),this.view.counter.show())},e.prototype.pause=function(){var t=this.container.getService(ga.pageManager);t.currentlyPlaying===this.container&&(t.currentlyPlaying=null,this.manuallyPaused&&this.countdown&&this.getService(ga.analytics).omniture.track([f.COUNTDOWN_PAUSED])),ma.addClass(this.container.view.wrapper,"vms-autoplay-paused"),this.paused=!0,this.countdown&&clearInterval(this.countdown.interval),this.view.play.show(),this.view.pause.hide(),this.view.spinner.hide(),this.view.counter.hide()},e.prototype.bindClick=function(){var t=this;ma.onClick(this.view.play.element,function(){(t.pause(),t.firstPlay)?t.container.bcPlayer().play():t.container.getPluginInstance(he.pluginName).events.next()}),ma.onClick(this.view.spinner.element,function(){(t.manuallyPaused=!0,t.getService(ga.context).clickToPlay=!0,t.pause(),t.firstPlay)||t.container.getPluginInstance(he.pluginName).events.next()})},e.prototype.showPause=function(){!this.paused&&this.wasAutoplayed&&(this.view.pause.show(),this.view.counter.hide())},e.EVENT_DECREASED="countdown-decreased",e.COUNTDOWN_STARTED="countdown-started",e}(m),Kt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),jt=function(n){function e(){var e=n.call(this,document.createElement("span"))||this;return e.getElement().className="vms-autoplay-pause",e.hide(),e}return Kt(e,n),e}(T),Xt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),zt=function(a){function e(e){var i=a.call(this,document.createElement("span"))||this;return i.getElement().className="vms-autoplay-counter",i.getElement().innerHTML=""+e,i}return Xt(e,a),e}(T),Qt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$t=function(n){function e(){var e=n.call(this,document.createElement("span"))||this;return document.createElement("span"),e.getElement().className="vms-autoplay-play",e.hide(),e}return Qt(e,n),e}(T),Zt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qt=function(a){function s(e){var t=this,n="http://www.w3.org/2000/svg";(t=a.call(this,document.createElementNS(n,"svg"))||this).initialOffset=""+2*oa*s.RADIUS,t.element.setAttribute("class","vms-spinner-svg"),t.element.setAttribute("width","100"),t.element.setAttribute("height","100"),t.circleContainer=document.createElementNS(n,"g"),t.circle=document.createElementNS(n,"circle"),t.circle.setAttribute("class","circle_animation"),t.circle.style.strokeDashoffset=t.initialOffset,t.applyRegularStyle(),t.circle.setAttribute("stroke","#19acf0"),t.circle.setAttribute("fill","none"),t.circle.setAttribute("display","block"),t.circleContainer.appendChild(t.circle),t.element.appendChild(t.circleContainer),t.container=e,e.getService(ga.environment).browser.isMobile()&&t.applyMobile();var i=e.getService(ga.eventManager);return i.addCustomListener(e,s.EVENT_COUNTDOWN_REGULAR_STYLE,function(){t.applyRegularStyle()}),i.addCustomListener(t.container,ct.STICKY_VISIBLE_EVENT,function(){t.applyStickyStyle()}),i.addCustomListener(t.container,ct.STICKY_HIDDEN_EVENT,function(){t.applyRegularStyle()}),t}return Zt(s,a),s.prototype.applyRegularStyle=function(){this.circle.setAttribute("r",""+s.RADIUS),this.circle.setAttribute("cy","21"),this.circle.setAttribute("cx","21"),this.circle.setAttribute("stroke-width","2.8")},s.prototype.applyStickyStyle=function(){this.element.setAttribute("class","vms-spinner-svg vms-spinner-svg-sticky"),this.circle.setAttribute("r",""+s.STICKY_RADIUS),this.circle.setAttribute("cy","17"),this.circle.setAttribute("cx","17"),this.circle.setAttribute("stroke-width","2.8")},s.prototype.applyMobile=function(){var t=this.container.getService(ga.environment),e=t.getDomain();-1!==pa.AB_TEST_DISABLED_SITES.indexOf(e)&&t.browser.isMobile()&&(this.element.setAttribute("class","vms-spinner-svg vms-spinner-svg-mobile"),this.circle.setAttribute("r",""+s.MOBILE_RADIUS),this.circle.setAttribute("cy","17"),this.circle.setAttribute("cx","17"),this.circle.setAttribute("stroke-width","2"))},s.prototype.reset=function(){this.circle.style.strokeDasharray=this.initialOffset,this.circle.style.strokeDashoffset=this.initialOffset},s.prototype.start=function(){this.circle.style.strokeDashoffset="0"},s.RADIUS=19.8,s.MOBILE_RADIUS=16.2,s.STICKY_RADIUS=16,s.EVENT_COUNTDOWN_REGULAR_STYLE="EVENT_COUNTDOWN_REGULAR",s}(T),Jt=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),en=function(a){function e(e,o){var n=a.call(this,document.createElement("div"))||this;n.mainClass="vms-spinner",n.element.className=n.mainClass;var i=document.createElement("span");return i.className="vms-autoplay-bg",n.pause=new jt,n.counter=new zt(e),n.play=new $t,n.spinner=new qt(o),n.element.appendChild(i),n.element.appendChild(n.pause.getElement()),n.element.appendChild(n.counter.getElement()),n.element.appendChild(n.play.getElement()),n.element.appendChild(n.spinner.getElement()),n}return Jt(e,a),e.prototype.removefromDom=function(){this.element.parentNode&&this.element.parentNode.removeChild(this.element)},e}(T),tn=function(){function t(){}return t.VIEW="rp-default-state",t.METADATA_CONTAINER="rp-default-state-metadata",t.METADATA_DOMAIN="rp-default-state-domain",t.TITLE_CONTAINER="rp-default-state-title",t.DESCRIPTION_CONTAINER="rp-default-state-description",t.PLAYER_STATE="rp-default-state-display",t.DURATION_CONTAINER="rp-default-state-duration",t}(),nn=t(0),an=t(4),on=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),rn=function(a){function o(e){var i=a.call(this,document.createElement("div"))||this;return i.container=e,i.createElements(),i}return on(o,a),o.prototype.createElements=function(){var n=document.createElement("table"),e=document.createElement("tr");this.spinnerColumn=document.createElement("td"),this.metadataColumn=document.createElement("td"),n.appendChild(e),e.appendChild(this.spinnerColumn),e.appendChild(this.metadataColumn),this.metadataContainer=document.createElement("div"),this.domain=document.createElement("span"),this.duration=document.createElement("span"),this.metadataContainer.appendChild(this.domain),this.metadataContainer.appendChild(this.duration),this.titleContainer=document.createElement("div"),this.title=document.createElement("h4"),this.titleContainer.appendChild(this.title),this.metadataColumn.appendChild(this.metadataContainer),this.metadataColumn.appendChild(this.titleContainer),this.element.appendChild(n),this.descriptionContainer=document.createElement("div"),this.description=document.createElement("div"),this.descriptionContainer.appendChild(this.description),this.setClassNames()},o.prototype.setClassNames=function(){this.element.className=tn.VIEW,this.metadataContainer.className=tn.METADATA_CONTAINER,this.domain.className=tn.METADATA_DOMAIN,this.titleContainer.className=tn.TITLE_CONTAINER,this.duration.className=tn.DURATION_CONTAINER,this.descriptionContainer.className=tn.DESCRIPTION_CONTAINER},o.prototype.attach=function(a){a.appendChild(this.element);var e=this.container.getService(ga.environment),t=this.container.getService(ga.context);e.isHubPage||e.isNewsHub()||t.forceHubStyle()||(this.container.view.module.moduleHeader.innerHTML="",this.container.view.module.moduleHeader.appendChild(this.descriptionContainer),this.container.view.module.moduleContent.innerHTML="")},o.prototype.getDomain=function(t){var e=t.source,n=ca.getDomain();return window.location!==window.parent.location&&document.referrer&&(n=ca.getDomain(document.referrer)),e=-1<o.displayedSources.indexOf(e)?I[e]||e:n&&-1!==n.indexOf(pa.THE_ADVERTISER)?I.TheAdvertiser:n},o.prototype.refresh=function(a){var e=this.container.view.element.hasAttribute("vms-title")&&this.container.view.element.getAttribute("vms-title"),t=this.container.getService(ga.context);this.title.innerHTML=t.firstPlay&&e||a.title,this.appendDurationMarker(this.duration,a.duration),this.domain.innerHTML=this.getDomain(a);var n=this.container.getService(ga.environment);if(this.description.innerHTML=At.findCaption(this.container,a),!t.firstPlay)if(n.isHubPage||n.isNewsHub()||t.forceHubStyle()){nn.extend(an);var i="<h1 "+(n.isNewsHub()||t.forceHubStyle()?"":"class=\"heading\"")+">"+a.title;n.isNewsHub()||t.forceHubStyle()||(i+="<span class=\"time\">"+D.formatDuration(a.duration/1e3)+"</span>"),i+="</h1>",this.container.view.module.moduleHeader.innerHTML=i,n.isSky()?this.container.view.module.moduleContent.innerHTML="\n                      <div class=\"byline g_font-base-s\">\n                      <div class=\"date-live\">"+nn(a.date.live).format("DD MMMM YYYY - hh:mmA")+"</div>\n                          <div class=\"byline_logo logo-skynews\"></div>\n                      </div>\n                      <div class=\"poster\"><img src=\""+a.poster+"\"></div>\n                      <div class=\"video-body\"><p>"+a.body["skynews.com.au"].web.replace("\n\n","<br /><br />")+"</p></div>":(this.container.view.module.moduleContent.innerHTML="<div class=\"poster\"><img src=\""+a.poster+"\" alt=\"\"></div>\n                          <div tabindex=\"-1\" class=\"description\"><p>"+a.caption+"</p></div>",this.container.view.module.moduleFooter.innerHTML="<ul class=\"info\">\n            <li class=\"date\">"+nn(a.date.live).format("DD MMMM YYYY")+"</li>\n            <li class=\"age\">"+nn().from(a.date.live)+"</li>\n            <li class=\"primaryCategory\">"+a.sectionPath+"</li>\n        </ul>")}else this.container.view.module.moduleHeader.innerHTML="",this.container.view.module.moduleHeader.appendChild(this.descriptionContainer),this.container.view.module.moduleContent.innerHTML=""},o.displayedSources=["AAP","AP","BlinkTV","Carsales","Carsguide","FOXSPORTS","FoxSportsPulse","Getty","OLD_FOXSPORTS","Quest","REUTERS","Rightster_barcroft_media","Rightster_celebrity_wire","Rightster_future_tv","Rightster_hollyscoop","Rightster_moda_mob","Rightster_newsy","Rightster_ruptly_tv","Rightster_splash_news","Rightster_the_savory","Rightster_unscriptd","Rightster_video_fashion","Rightster_viral_spiral","Rightster_wochit","Rightster_wochit_uk","Splash","Storyful","TEN","Wibbitz","Wochit","WSJ"],o}(U),sn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ln=function(a){function e(e,o){var n=a.call(this,e)||this;return n.metadata=o,n.setEvents(),n}return sn(e,a),e.prototype.setEvents=function(){var a=this;ma.addClass(this.container.view.wrapper,tn.PLAYER_STATE);var e=this.getService(ga.eventManager),o=this.container.getService(ga.environment);o.browser.isMobile()&&this.metadata.view.hide(),e.addSingleCustomListener(this.container,Mo.BC_READY,function(){o.browser.isMobile()||a.metadata.view.attach(a.container.view.wrapper.children[0])}),e.addSingleEventListener(this.container,"play",function(){ma.removeClass(a.container.view.wrapper,tn.PLAYER_STATE)}),e.addCustomListener(this.container,M.CAPI_FETCHED,function(e){a.metadata.view.refresh(e)}),e.addCustomListener(this.container,ct.STICKY_HIDDEN_EVENT,function(){D.truncateDescription(a.metadata.view.description,mn.DESKTOP_DESCRIPTION_HEIGHT)}),e.addCustomListener(this.container,ct.STICKY_VISIBLE_EVENT,function(){D.truncateDescription(a.metadata.view.description,ct.STICKY_DESCRIPTION_HEIGHT)});var t=function(){var e=a.container.getService(ga.utag),t=o.getPageType(e,a.container);if(t&&t!==c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE){var n=a.container.getService(ga.context);a.container.getService(ga.environment).browser.isMobile()?D.truncateDescription(a.metadata.view.description,mn.MOBILE_DESCRIPTION_HEIGHT):n.isSticky()?D.truncateDescription(a.metadata.view.description,ct.STICKY_DESCRIPTION_HEIGHT):D.truncateDescription(a.metadata.view.description,mn.DESKTOP_DESCRIPTION_HEIGHT)}};e.addCustomListener(this.container,Mo.BC_READY,function(){t()}),e.addListener(this.container,"ready",function(){!function(){var e=a.container.getService(ga.environment),t=e.getDomain();if((-1===pa.AB_TEST_DISABLED_SITES.indexOf(t)||e.browser.isMobile())&&a.metadata.view.metadataParentContainer){var n=a.container.view.wrapper.getBoundingClientRect(),i=a.metadata.view.metadataParentContainer.getBoundingClientRect(),r=a.metadata.view.spinnerContainer.getBoundingClientRect(),o=sa(r.height/2),s=sa(n.width),d=sa(n.height/2+o);d=sa(d-i.height),a.metadata.view.spinnerContainer.style.top="-"+d+"px",a.metadata.view.spinnerContainer.style.width=s+"px"}}()}),e.addListener(this.container,"play",function(){t()})},e}(m),dn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),cn=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return dn(e,n),e.prototype.createElements=function(){this.metadataParentContainer=document.createElement("table");var n=document.createElement("tr");this.spinnerColumn=document.createElement("td"),this.metadataColumn=document.createElement("td"),this.metadataParentContainer.appendChild(n),n.appendChild(this.metadataColumn),this.metadataContainer=document.createElement("div"),this.domain=document.createElement("span"),this.duration=document.createElement("span"),this.metadataContainer.appendChild(this.domain),this.metadataContainer.appendChild(this.duration),this.titleContainer=document.createElement("div"),this.title=document.createElement("h4"),this.titleContainer.appendChild(this.title),this.metadataColumn.appendChild(this.metadataContainer),this.metadataColumn.appendChild(this.titleContainer),this.spinnerContainer=document.createElement("table");var e=document.createElement("tr");e.appendChild(this.spinnerColumn),this.spinnerContainer.appendChild(e),ma.addClass(this.spinnerContainer,"countdown-ab-alternate"),this.element.appendChild(this.spinnerContainer),this.element.appendChild(this.metadataParentContainer),this.descriptionContainer=document.createElement("div"),this.description=document.createElement("div"),this.descriptionContainer.appendChild(this.description),this.setClassNames()},e}(rn),pn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mn=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this,i=n.getService(ga.environment),r=i.getDomain();return n.view=-1===pa.AB_TEST_DISABLED_SITES.indexOf(r)&&i.browser.isMobile()?new cn(t):new rn(t),n.events=new ln(t,n),n}return pn(e,a),e.pluginName="PLUGIN_METADATA",e.DESKTOP_DESCRIPTION_HEIGHT=28,e.MOBILE_DESCRIPTION_HEIGHT=52,e}(y),un=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),gn=function(a){function m(e,t,n){var i=a.call(this,e,m.pluginName)||this;return i.initialDuration=5,i.duration=5,i.completed=!1,i.mode="MODE_REGULAR",i.started=!1,i.initialDuration=i.duration=t||5,i.id=""+Math.random(),i.view=new en(i.duration,e),i.mode=n||m.MODE_REGULAR,i.events=new Ft(i),i}return un(m,a),m.prototype.isMobileAllowed=function(){var a=this.getService(ga.environment),e=a.browser.isMobile(),t=a.isSky();return e&&t&&!a.isVaafca(this.container)},m.prototype.getElementContainer=function(){var a=this.getService(ga.context);if(this.isMobileAllowed()||a.isSticky()&&a.canAutoplay()&&!this.container.bcPlayer().hasStarted()){var e=this.container.getPluginInstance(Tt.pluginName);return ma.addClass(e.view.element,"vms-mobile-autoplay"),e.view.spinnerContainer}var t=this.container.getPluginInstance(mn.pluginName);return this.element||t.view.spinnerColumn},m.prototype.display=function(){var n=this.getService(ga.context),e=this.container.getPluginInstance(he.pluginName);!n.errored&&(n.firstPlay||0<e.view.recommendations.items.length)&&(this.getElementContainer().appendChild(this.view.getElement()),this.start())},m.prototype.decrease=function(){var n=Y.getVisibilityRate(this.container.view.element),e=this.getService(ga.eventManager);e.trigger(this.container,Ke.EVENT_CHECK_LOGIN),0<this.duration&&!at.isHidden()&&n>=st.visibilityThreshold&&(this.duration--,e.trigger(this.container,Ft.EVENT_DECREASED,this.duration)),0===this.duration&&(clearInterval(this.interval),this.duration=5,this.view.spinner.reset(),this.view.hide(),this.completed=!0,this.callback?this.callback():this.container.bcPlayer()&&this.container.bcPlayer().play()),this.view.counter.html(""+this.duration)},m.prototype.reset=function(){this.events.paused=!1,this.view.pause.hide(),this.view.play.hide(),this.duration=this.initialDuration,this.view.counter.html(""+this.duration),this.view.spinner.show(),this.view.spinner.reset(),this.display()},m.prototype.forceStop=function(){clearInterval(this.interval)},m.prototype.start=function(t,e){var a=this;clearInterval(this.interval),this.interval=null,t&&(this.callback=t);var i=this.getService(ga.context),o=this.getService(ga.environment),r=!1,s=o.browser.isMobile()||o.browser.isIOS();if(s||o.isHubPage?r=i.firstPlay:(r=!We.get(this.container).autoplayEnabled||!1===i.autoPlay,"boolean"==typeof e&&(r=!e)),(i.canAutoPlayPlaylist()&&i.auth.isSubscriberOrRegisteredUser()||s&&!i.firstPlay&&-1===ca.getDomain().indexOf(pa.TASTE))&&(r=!1),o.isSky()){var l=this.container.getService(ga.utag),d=o.getPageType(l,this.container);(d&&d===c.ARTICLE_PAGE_TYPE||d===c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE)&&(r=!i.canAutoplay())}(!i.firstPlay&&-1<this.container.view.cssClasses.indexOf("vms-continuousplay-off")&&(r=!0),r)?(ma.addClass(this.container.view.element,"vms-autoplay-disabled"),ma.addClass(this.container.view.wrapper,"vms-autoplay-paused"),this.view.play.show(),this.view.spinner.hide(),this.view.counter.hide(),this.events.wasAutoplayed=!1,this.events.bindClick()):(this.started=!0,this.getService(ga.eventManager).trigger(this.container,Ft.COUNTDOWN_STARTED),ma.removeClass(this.container.view.element,"vms-autoplay-disabled"),ma.removeClass(this.container.view.wrapper,"vms-autoplay-paused"),this.mode===m.MODE_REGULAR?(this.view.play.hide(),this.view.spinner.show(),this.view.spinner.reset(),this.view.pause.hide(),this.view.counter.show()):(ma.addClass(this.container.view.element,"vms-autoplay-enhanced"),this.view.spinner.show(),this.view.spinner.reset(),this.view.play.show()),setTimeout(function(){s&&!a.isMobileAllowed()||a.view.spinner.start()},1),this.interval=setInterval(function(){a.decrease()},1e3))},m.pluginName="PLUGIN_AUTOPLAY_COUNTDOWN",m.MODE_REGULAR="MODE_REGULAR",m.MODE_ENHANCED="MODE_ENHANCED",m}(y),_n=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),En=function(a){function s(e,t,n){var i=a.call(this,e)||this;return i.lastExtractionPoint=0,i.adsEventsSet=!1,i.adsPosition=0,i.seeking=!1,i.videoTimerOn=!1,i.adTimerOn=!1,i.sendMetadataEvent=function(){i.videoTimerOn||i.seeking||(i.videoTimerOn=!0,i.nielsen.sendEvent(s.LOAD_METADATA_EVENT,i.config.getMetadata()))},i.endEvent=function(){i.videoTimerOn=!1,i.adTimerOn=!1,i.nielsen.sendEvent(s.END_EVENT,i.playHeadPosition())},i.stopEvent=function(){i.seeking||(i.nielsen.sendEvent(s.STOP_EVENT,i.adTimerOn?i.adsPosition:i.playHeadPosition()),i.videoTimerOn=!1,i.adTimerOn=!1)},i.sendAdMetadata=function(){i.adTimerOn=!0,i.nielsen.sendEvent(s.LOAD_METADATA_EVENT,i.config.getMetadata("ads"))},i.adsPlayHeadPosition=function(){var n=i.container.bcPlayer();if(n&&n.ima3&&n.ima3.adPlayer){var e=n.ima3.adPlayer.currentTime();return da(e)}},i.playHeadPosition=function(){var t=i.container.bcPlayer().currentTime();return da(t)},i.nielsen=n,i.config=t,i.setEvents(),i}return _n(s,a),s.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager),t=this.container.bcPlayer();e.addCustomListener(this.container,s.VIDEO_LOADED_EVENT,function(){var e=a.container.getService(ga.context).currentlyPlayingVideo;a.config.setVideo(e)}),e.addMultipleListener(this.container,["play","timeupdate"],function(){a.videoTimerOn||a.sendMetadataEvent()}),e.addListener(this.container,"play",function(){var e=a.container.bcPlayer();e.ads.isAdPlaying&&(a.adsEventsSet||(a.adsEventsSet=!0,e.ima3.adPlayer.on("timeupdate",function(){var e=a.adsPlayHeadPosition();0<e&&e!==a.lastExtractionPoint&&(a.adsPosition=e,a.nielsen.sendEvent(s.SET_PLAY_HEAD_POSITION,e))})))}),e.addListener(this.container,"timeupdate",function(){var e=a.playHeadPosition();0<e&&e!==a.lastExtractionPoint&&!a.seeking&&(a.lastExtractionPoint=e,a.nielsen.sendEvent(s.SET_PLAY_HEAD_POSITION,e))}),e.addListener(this.container,"ended",this.endEvent),e.addListener(this.container,"pause",this.stopEvent),e.addCustomListener(this.container,Pe.ON_SKIP_EVENT,this.endEvent),e.addCustomListener(this.container,Ce.UP_NEXT_CLICK,this.endEvent),e.addListener(this.container,"ads-pause",this.stopEvent),e.addListener(this.container,"ads-play",this.sendAdMetadata),e.addListener(this.container,"ads-ad-started",this.sendAdMetadata),e.addMultipleListener(this.container,["ads-ad-ended","ads-ad-skipped"],this.stopEvent),e.addMultipleListener(this.container,["ads-allpods-completed","ads-ad-skipped"],function(){a.sendMetadataEvent()});var n=t.error();n&&n.code&&this.endEvent(),this.container.bcPlayer().controlBar.progressControl.seekBar.on("mousedown",function(){a.seeking=!0}),this.container.bcPlayer().controlBar.progressControl.seekBar.on("mouseup",function(){setTimeout(function(){a.seeking=!1},500)})},s.LOAD_METADATA_EVENT="loadMetadata",s.SET_PLAY_HEAD_POSITION="setPlayheadPosition",s.STOP_EVENT="stop",s.END_EVENT="end",s.VIDEO_LOADED_EVENT="videoLoaded",s}(m),An=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yn=function(a){function e(e,o,n){var i=a.call(this,n)||this;return i.videoDuration=null,i.firstPlay=!0,i.autoplayEventTracked=!1,i.accountId=e,i.videoId=o,i.playerConfig=i.getService(ga.config).player,i.container=n,i.element=document.createElement("video"),i.element.setAttribute("data-account",i.accountId),i.element.id="p-"+n.bcInfo.id,i.element.setAttribute("vms-video-id",i.videoId),i.element.setAttribute("data-embed","default"),i.element.setAttribute("controls","controls"),i.element.className=" video-js",i.getService(ga.environment).browser.isIOS()&&i.element.setAttribute("playsinline","playsinline"),i.setEvents(),i}return An(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addListener(this.container,"play",function(){a.getService(ga.pageManager).pauseAll([a.container])}),e.addMultipleListener(this.container,["loadedmetadata"],function(){a.autoplayEventTracked=!1}),e.addMultipleListener(this.container,["timeupdate"],function(){if(!a.autoplayEventTracked){var e=a.getService(ga.context).clickToPlay?f.CLICK_TO_PLAY:f.AUTOPLAY;a.getService(ga.analytics).omniture.track([e]),a.autoplayEventTracked=!0}}),e.addCustomListener(this.container,Ke.EVENT_USER_STATUS,function(e){var t=a.getService(ga.context),n=a.getService(ga.environment);e===Ke.USER_SUBSCRIBER&&-1<pa.PROJECT0_SITES.indexOf(n.getDomain())&&(t.adsDisabled=!0)}),e.addSingleEventListener(this.container,"play",function(){var e=We.get(a.container),t=a.container.getPluginInstance(gn.pluginName),n=a.getService(ga.context);n.clickToPlay=!(e.autoplayEnabled&&t.completed),a.getService(ga.context).firstPlay=!1}),e.addListener(this.container,"ready",function(){var e=a.container.view.element.getElementsByClassName("vjs-play-control");e&&e[0].setAttribute("id","vjs-play-control"),a.brightcovePlayer.responsive(!1);var t=a.container.view.element.getElementsByClassName("vjs-big-play-button");t&&t[0].setAttribute("id","vjs-big-play-button");var n=a.getBCPlayer();n.controlBar.fullscreenToggle.addClass("active"),n.on("error",function(){if(a.getService(ga.environment).browser.isIOS()){var e=n.error();e&&e.code&&3===e.code&&0<=a.getService(ga.context).retryPlaybackOnError&&(n.error(null),n.pause(),n.load(),n.currentTime(0),n.play(),a.getService(ga.context).retryPlaybackOnError--)}else a.getService(ga.eventManager).trigger(a.container,Mo.PLAYER_PLAYBACK_ERROR)})}),e.addListener(this.container,"play",function(){0>=a.videoDuration?ma.addClass(a.container.view.wrapper,"vjs-live-stream"):ma.removeClass(a.container.view.wrapper,"vjs-live-stream")}),e.addListener(this.container,"ima3-ready",function(){a.getBCPlayer().ima3.adControlBar.fullscreenToggle.addClass("active")}),e.addListener(this.container,"ima3error",function(){a.getService(ga.eventManager).trigger(a.container,Mo.PLAYER_ADS_PLAYBACK_ERROR),a.getService(ga.analytics).omniture.track([f.AD_FAILED_LOADING])}),e.addListener(this.container,["adserror","ima3-ad-error"],function(){a.getService(ga.eventManager).trigger(a.container,Mo.PLAYER_ADS_PLAYBACK_ERROR),a.getService(ga.analytics).omniture.track([f.AD_FAILED])}),e.addListener(this.container,"ended",function(){var e=a.getBCPlayer(),t=function(){e.off("play",t)};e.controlBar.playToggle.on("click",t),e.one("loadstart",function(){e.off("play",t)})})},e.prototype.getElement=function(){return this.element},e.prototype.load=function(a){var l=this;return this.getService(ga.eventManager).setPlayerEvents(this.container),new Promise(function(t,n){var e=E.parseEmbedCode(a);a=1===e.length?"ref:"+a:e.pop();var i=function(o){window&&window.utag_data&&window.utag_data.ad_ppid&&l.brightcovePlayer&&l.brightcovePlayer.ima3&&l.brightcovePlayer.ima3.settings&&(l.brightcovePlayer.ima3.settings.ima3SdkSettings={},l.brightcovePlayer.ima3.settings.ima3SdkSettings.ppid=window.utag_data.ad_ppid),l.brightcovePlayer.catalog.getVideo(a,function(r,e){if(r&&r.response){if("AD_CONFIG_NOT_FOUND"===(r=JSON.parse(r.response).pop()).error_code||"VIDEO_URLS_RETRIEVE_FAILURE"===r.error_code)return i();if(r.error_code){var a=l.container.getPluginInstance(nt.pluginName);l.brightcovePlayer.error(a.getError(r))}}null===r?(l.getService(ga.context).withBCVideo(e),o&&!1===l.getService(ga.context).adsDisabled&&l.container.getPluginInstance(Je.pluginName).augmentSources(e),l.videoDuration=e.duration,window._sf_async_config&&(window._sf_async_config.autoDetect=!1),l.getService(ga.context).currentlyPlayingVideo=e,l.brightcovePlayer.catalog.load(e),new S(l.container).setTrackingEvent(),l.getService(ga.eventManager).trigger(l.container,Mo.BC_READY),l.getService(ga.eventManager).trigger(l.container,En.VIDEO_LOADED_EVENT),l.container.bcPlayer().el().getElementsByClassName("vjs-poster")[0].onmousedown=function(){l.getService(ga.context).manuallyStarted=!0},l.firstPlay&&l.getService(ga.eventManager).addSingleEventListener(l.container,"play",function(){l.getService(ga.analytics).reset().heartbeat.set(),l.firstPlay=!1}),t(e)):n(r)},o)};l.container.getPluginInstance(Je.pluginName).getAdConfigId().then(function(t){i(t)}).catch(function(){i()})})},e.prototype.render=function(a){var e=this;a||(a=bc),this.getService(ga.eventManager).addCustomListener(this.container,"utag_ready",function(){var t=e.getService(ga.eventManager);t.trigger(e.container,Ke.EVENT_CHECK_LOGIN),e.getService(ga.config).withHeartbeat(),a.usingAdBlocker().then(function(){e.brightcovePlayer=a(e.element,{controlBar:{children:["playToggle","volumePanel","progressControl","liveDisplay","remainingTimeDisplay","currentTimeDisplay","timeDivider","durationDisplay","CustomControlSpacer","fullscreenToggle","PlaybackRateMenuButton","SubsCapsButton"]}}),t.trigger(e.container,"BC_FUNC_READY");var n=function(){e.load(e.container.bcInfo.id),e.refreshEvents()};-1===e.container.view.cssClasses.indexOf("vms-iframe")?e.getService(ga.nielsen).load().then(function(){n()}).catch(function(t){console.log(t),n()}):n()})}),new _(this.container)},e.prototype.refreshEvents=function(){this.getService(ga.eventManager).setPlayerEvents(this.container)},e.prototype.getBCPlayer=function(){return this.brightcovePlayer},e}(m),vn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Cn=function(a){function e(e){var i=a.call(this,e)||this;return i.fullscreen=!1,i}return vn(e,a),e.prototype.trackMuteStatus=function(n){if(n!==this.lastMuted){var e=n?f.MUTE:f.UNMUTE;this.getService(ga.analytics).omniture.track([e]),this.lastMuted=n}},e.prototype.setEvents=function(){var a=this,e=this.container,t=this.getService(ga.eventManager);t.addListener(e,"ready",function(){e.bcPlayer().controlBar.volumePanel.muteToggle.on("click",function(){a.trackMuteStatus(e.bcPlayer().muted())})}),t.addListener(e,"ima3-ready",function(){e.bcPlayer().ima3.adControlBar.volumePanel.muteToggle.on("click",function(){a.trackMuteStatus(e.bcPlayer().ima3.adPlayer.muted())})}),t.addListener(e,"fullscreenchange",function(){a.fullscreen!==e.bcPlayer().isFullscreen()&&(a.fullscreen=e.bcPlayer().isFullscreen(),!0===a.fullscreen&&a.getService(ga.analytics).omniture.track([f.FULLSCREEN_CHANGE]))})},e}(m),Sn=function(){},hn=function(){function t(){this.tracked=[]}return t.prototype.push=function(n){window.mready=window.mready||[],window.mready.push(function(e){e.ev(n)})},t.prototype.pushNpv=function(n){window.mready=window.mready||[],window.mready.push(function(e){e.npv(n)})},t.prototype.delay=function(a,e){void 0===this.delayedEvents&&(this.delayedEvents=[]);var t=new Sn;t.events=a,t.evars=e,this.delayedEvents.push(t)},t.prototype.fireDelayed=function(){if(this.delayedEvents){for(var a=[],e={},t=0,n=this.delayedEvents,i;t<n.length;t++)for(var r in i=n[t],a=a.concat(i.events),i.evars)e[r]=i.evars[r];this.delayedEvents=[],0<a.length&&this.track(a,e)}},t.prototype.track=function(a,o,t){void 0===t&&(t=!1);var n={events:a};void 0!==o&&Object.keys(o).forEach(function(t){n[t]=o[t]}),t?this.pushNpv(n):this.push(n)},t.prototype.trackOnce=function(a,e,t){void 0===t&&(t=!1),-1===this.tracked.indexOf(a.join(" "))&&(this.track(a,e,t),this.tracked.push(a.join(" ")))},t}(),Tn=function(){},In=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Nn=function(s){function n(e){var t=s.call(this,e)||this;t.watchedTime=0;var i=t.getService(ga.eventManager),r=t.getPlayer(),o=t.getService(ga.context);return r.on(o.ssai?"adtimeupdate":"timeupdate",function(){if(t.container.view.element.parentNode&&t.watchedTime<n.SKIP_THRESHOLD){var a=da(r.currentTime());t.watchedTime!=a&&(i.trigger(t.container,n.EVENT_WATCHED_INCREMENT,a),t.watchedTime=a),t.watchedTime>=n.SKIP_THRESHOLD&&i.trigger(t.container,n.EVENT_AD_SKIPPABLE)}}),t}return In(n,s),n.prototype.getPlayer=function(){return this.container.bcPlayer().ima3.adPlayer||this.container.bcPlayer()},n.EVENT_WATCHED_INCREMENT="AD_WATCHED_INCREMENT",n.EVENT_AD_SKIPPABLE="AD_SKIPPABLE",n.SKIP_THRESHOLD=4,n}(m),bn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),wn=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;n.isSkippable=!1,n.container=t,n.element.className=e.CSS_NAME,n.image=document.createElement("img"),n.image.className="rp-ad-skip-img",n.skipText=document.createElement("div"),n.skipText.innerHTML=e.afterAdLabelDesktop,n.skipText.className="rp-ad-skip-text",n.element.appendChild(n.skipText),n.element.appendChild(n.image),n.container.getService(ga.environment).browser.isMobile()&&(ma.addClass(n.element,"rp-ad-skip-mobile"),n.skipText.innerHTML=e.afterAdLabelMobile);var i=n.container.getService(ga.eventManager);return i.addCustomListener(n.container,ct.STICKY_HIDDEN_EVENT,function(){n.skipText.innerHTML=e.afterAdLabelDesktop}),i.addCustomListener(n.container,ct.STICKY_VISIBLE_EVENT,function(){n.skipText.innerHTML=e.afterAdLabelMobile}),n}return bn(e,a),e.prototype.display=function(n){Ln.skip_ad_enabled&&(this.countDown=new Nn(this.container));var e=this.container.bcPlayer();!this.container.getService(ga.context).ssai&&(!e.ima3||e.ima3.currentAd&&e.ima3.currentAd.isSkippable())||n.appendChild(this.element)},e.prototype.show=function(){var e=this.container.bcPlayer(),t=this.container.getService(ga.context);this.container.bcPlayer().ads.isAdPlaying()&&(t.ssai||e.ima3&&(!e.ima3.currentAd||!e.ima3.currentAd.isSkippable()))?a.prototype.show.call(this):this.hide()},e.prototype.reset=function(){this.isSkippable=!1,this.image.style.display="block",this.skipText.innerHTML="You can skip ad in 4s",ma.removeClass(this.element,"rp-skippable-ad")},e.prototype.skippable=function(){this.isSkippable=!0,this.countDown=null,this.image.style.display="none",this.skipText.innerHTML="Skip ad",ma.addClass(this.element,"rp-skippable-ad")},e.prototype.refreshCountdown=function(t){this.skipText.innerHTML="You can skip ad in "+(Nn.SKIP_THRESHOLD-t)+"s"},e.prototype.refresh=function(n){var e=this;this.image.src=n.thumbnail,this.image.onerror=function(){e.image.getAttribute("data-errored")||(e.image.setAttribute("data-errored","errored"),e.image.src=B.get()+"img/fallback.jpg",e.image.width=100,e.image.height=50)}},e.CSS_NAME="rp-ad-skip",e.afterAdLabelDesktop="Your video will play after the ad",e.afterAdLabelMobile="Video will play after the ad",e}(T),Pn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ln=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.view=new wn(t.container),t.setEvents(),t}return Pn(o,a),o.prototype.setEvents=function(){var a=this,e=this.getService(ga.context),t=this.getService(ga.eventManager);t.addListener(this.container,"ads-ad-started",function(){a.view.refresh(a.getService(ga.context).capiVideo),a.view.display(a.container.bcPlayer().el_),o.skip_ad_enabled&&a.view.reset(),a.view.show()}),t.addListener(this.container,"play",function(){a.view.hide()});var n=function(){a.getService(ga.environment).browser.isMobile()&&setTimeout(function(){a.container.bcPlayer().userActive(!1)},2e3)};t.addListener(this.container,"ads-ad-ended",function(){a.view.hide(),n()}),t.addListener(this.container,"ima3-complete",function(){a.container.bcPlayer().userActive(!0),n()}),t.addListener(this.container,"ads-ad-skipped",n),t.addListener(this.container,"ima3error",n),t.addListener(this.container,"ima3-ad-error",n),t.addCustomListener(this.container,Nn.EVENT_AD_SKIPPABLE,function(){a.view.skippable()}),t.addCustomListener(this.container,Nn.EVENT_WATCHED_INCREMENT,function(e){a.view.refreshCountdown(e)}),ma.onClick(this.view.element,function(){if(a.view.isSkippable){if(e.ssai){var n=a.container.bcPlayer().ssai(),t=n.currentTimelineState();n.seekInAbsoluteTime(t.linearAd.absoluteEndTime())}else a.container.bcPlayer().ima3.adsManager.skip();a.getService(ga.analytics).omniture.track([f.AD_SKIPPED]),a.view.hide()}})},o.pluginName="PLUGIN_AD_CONTROLS",o.skip_ad_enabled=!1,o}(y),On=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fn=function(a){function s(e){var i=a.call(this,e)||this;return i.playerName="NewsCorp Brightcove Video Player",i.trackPlay=!1,i.activeSession=!1,i.container=e,i}return On(s,a),s.prototype.getMetadata=function(a){var e=this.getService(ga.environment),t=a.capiVideo,n=new Tn;return n.channel=t.categoriesExtended().slice(0,4).join(", "),n.brand=e.brand(),n.site=e.site(),n.videoSource=t.source&&t.source.toLowerCase()||"NA",n.playlistIndex=a.recommendationsOrigin||null,n.advtType=a.ssai?"SSAI":"CSAI",n["a.media.network"]=e.network(),n.mediacontenttype=a.videoContentType,n.mediaautoplayanalytics=a.auth.getAuthTokenValues(),n.inactivetab=e.tabLoaded,n.videoQuality=a.videoQuality,n.playlistOrder=a.playOrder,n.abcookie=e.abCookie.getHeartbeatLabel(),n.accessType=a.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM?"restricted":"free",a.hasSubtitles()&&(n.mediacaptionstatus="has-subtitles"),a.hasSubtitles()&&!0===this.container.bcPlayer().muted()&&(n.mediacaptionstatus="has-subtitles auto enabled"),n},s.prototype.initialiseSession=function(n){this.activeSession||this.endSession();var e=ADB.va.MediaHeartbeat;this.mediaObject=e.createMediaObject(n.mediainfo.name,n.mediainfo.id,n.mediainfo.duration,e.StreamType.VOD),this.setMetadata(),this.mediaHeartbeat.trackSessionStart(this.mediaObject,{}),this.activeSession=!0},s.prototype.setMetadata=function(){var n=ADB.va.MediaHeartbeat,e=this.getMetadata(this.getService(ga.context));this.mediaObject.setValue(n.MediaObjectKey.StandardVideoMetadata,e)},s.prototype.endSession=function(){this.activeSession&&(this.mediaHeartbeat.trackSessionEnd(this.mediaObject,{}),this.activeSession=!1)},s.prototype.set=function(){this.heartbeatConfig=this.getService(ga.config).heartbeat;var l=this.container.bcPlayer(),t=ADB.va.MediaHeartbeat,n=ADB.va.MediaHeartbeatConfig,i=new(0,ADB.va.MediaHeartbeatDelegate),r;i.getCurrentPlaybackTime=function(){return l.currentTime()},i.getQoSObject=function(){return t.createQoSObject(5e3,0,24,10)},"function"==typeof Visitor.getInstance&&(r=Visitor.getInstance(this.heartbeatConfig.visitor.orgId,window.utag_data.adobe.visitorObjectConfig));var e=null;void 0===window.metrics.s?((e=new AppMeasurement(this.heartbeatConfig.appMeasurement.rsid)).visitor=r,e.trackingServer=this.heartbeatConfig.appMeasurement.trackingServer,e.account=this.heartbeatConfig.appMeasurement.rsid,e.visitorID=this.heartbeatConfig.appMeasurement.visitorId,e.pageName="",e.charSet="UTF-8"):e=window.metrics.s;var o=this.getService(ga.context),a=new n;a.trackingServer=this.heartbeatConfig.heartbeat.trackingServer,a.playerName=this.playerName,a.channel=o.capiVideo.categories.join(", "),a.debugLogging=!1,a.appVersion="",a.ssl=!0,a.ovp="",this.mediaHeartbeat=new t(i,a,e),this.initialiseSession(l),this.setEvents()},s.getScript=function(a){var e=s.scripts.filter(function(e){return e.env===a})[0];return e?e.script:""},s.prototype.setEvents=function(){var l=this,e=this.container.bcPlayer(),t=function(){e.ads.isAdPlaying()||(l.trackPlay=!0,l.mediaHeartbeat.trackPlay())};e.on("playing",function(){l.trackPlay?e.off("playing",t):t()});var n=this.getService(ga.eventManager);n.addListener(this.container,"seeking",function(){var n=ADB.va.MediaHeartbeat;l.mediaHeartbeat.trackEvent(n.Event.SeekStart),e.one("seeked",function(){var n=ADB.va.MediaHeartbeat;l.mediaHeartbeat.trackEvent(n.Event.SeekComplete),e.off("seeked")})}),n.addListener(this.container,"loadedmetadata",function(){l.setMetadata()}),n.addCustomListener(this.container,Pe.ON_SKIP_EVENT,function(){l.endSession()}),n.addCustomListener(this.container,Ce.UP_NEXT_CLICK,function(){l.endSession()}),n.addListener(this.container,"play",function(){if(!l.activeSession){var e=l.container.bcPlayer();l.initialiseSession(e)}l.mediaHeartbeat.trackPlay()}),n.addListener(this.container,"pause",function(){l.container.bcPlayer().ended()||l.mediaHeartbeat.trackPause()}),n.addListener(this.container,"ended",function(){l.mediaHeartbeat.trackComplete(l.mediaObject,{}),l.endSession()}),n.addListener(this.container,"ads-play",function(){l.mediaHeartbeat.trackPlay()}),n.addListener(this.container,"ads-pause",function(){l.mediaHeartbeat.trackPause()}),n.addListener(this.container,"ads-ad-started",function(){if(!l.activeSession){var t=l.container.bcPlayer();l.initialiseSession(t)}var n=ADB.va.MediaHeartbeat;if(e.ads.ad&&e.ads&&e.ads.ad.duration&&e.ads.ad.duration>s.AD_DURATION_TRACKING_THRESHOLD){var i=n.createAdBreakObject("Ad break name",0,0);l.mediaHeartbeat.trackEvent(n.Event.AdBreakStart,i);var o=n.createAdObject("Ad title",e.ads.ad.id+"",e.ads.ad.index,e.ads.ad.duration);l.mediaHeartbeat.trackEvent(n.Event.AdStart,o,{})}});var a=function(){var e=ADB.va.MediaHeartbeat;l.mediaHeartbeat.trackEvent(e.Event.AdSkip),l.mediaHeartbeat.trackEvent(e.Event.AdBreakComplete),l.mediaHeartbeat.trackPlay(),l.container.getPluginInstance(Ln.pluginName).view.hide()};n.addListener(this.container,"ads-ad-skipped",a),n.addListener(this.container,"ima3error",a),n.addListener(this.container,"ima3-ad-error",a),n.addListener(this.container,"ads-ad-ended",function(){if(e.ads.ad){var n=ADB.va.MediaHeartbeat;l.mediaHeartbeat.trackEvent(n.Event.AdComplete),l.mediaHeartbeat.trackEvent(n.Event.AdBreakComplete)}})},s.scripts=[{env:"dev",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"sit",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"pat",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"uat",script:"//tags.news.com.au/sit/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"beta",script:"//tags.news.com.au/prod/heartbeat/v2.2.0/MediaSDK.min.js"},{env:"prod",script:"//tags.news.com.au/prod/heartbeat/v2.2.0/MediaSDK.min.js"}],s.AD_DURATION_TRACKING_THRESHOLD=3,s}(m),Rn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dn=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.omniture=new hn,n.heartbeat=new fn(t),n}return Rn(e,a),e.prototype.reset=function(){return this.heartbeat&&this.heartbeat.mediaHeartbeat&&this.heartbeat.endSession(),this.heartbeat=new fn(this.container),this},e.pluginName="PLUGIN_ANALYTICS",e}(y),Mn={sdk:{apn:"NewsCorpAU Brightcove Player",sfcode:"",nsdkv:"600",apid:"",nol_sdkDebug:""},video:{type:"content",assetid:"",program:"",title:"",length:0,segB:"",segC:"",isfullepisode:"n",adloadtype:2,hasAds:2,dataSrc:"cms"},ads:{type:"preroll",assetid:"defaultAdId"}},kn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bn=function(){return(Bn=Object.assign||function(a){for(var e=1,n=arguments.length,i;e<n;e++)for(var t in i=arguments[e])Object.prototype.hasOwnProperty.call(i,t)&&(a[t]=i[t]);return a}).apply(this,arguments)},Vn=function(a){function e(e){var i=a.call(this,e)||this;return i.environment=i.getService(ga.environment),i.config=Mn,i}return kn(e,a),e.prototype.initSDKConfig=function(){var r=this.getService(ga.utag),e=r.get("net_site"),t=r.get("net_sec1"),n="",i="",o=this.environment.isProd()?"P":"T";this.config.sdk.sfcode=this.environment.isProd()?"dcr":"dcr-cert",this.config.sdk.apn=[e,t,"videos"].join(" "),ca.getSearchParams().dbnielsen&&(this.config.sdk.nol_sdkDebug="DEBUG"),window.nn&&window.nn.PAGEAPPID?this.config.sdk.apid=window.nn.PAGEAPPID:(window.nn&&window.nn.APPID&&(n=window.nn.APPID[e]&&window.nn.APPID[e].all||"",i=window.nn.APPID[e]&&window.nn.APPID[e][t]||n),this.config.sdk.apid=""+o+i)},e.prototype.getSDKConfig=function(){return this.config.sdk},e.prototype.getVideoMetadata=function(){return this.config.video},e.prototype.getAdsMetadata=function(){return this.config.ads},e.prototype.getMetadata=function(t){return t&&"ads"===t?(this.setAdsMetadata(),Bn(Bn({},this.getSDKConfig()),this.getAdsMetadata())):Bn(Bn({},this.getSDKConfig()),this.getVideoMetadata())},e.prototype.setVideo=function(t){this.video=t,this.setVideoMetadata()},e.prototype.setAdsMetadata=function(){var a=this.container.bcPlayer(),t;if(a.ads&&a.ads.ad&&a.ads.ad.id?t=a.ads.ad:a.ads&&a.ads.pod&&a.ads.pod.id&&(t=a.ads.pod),t&&t.id&&(this.config.ads.assetid=t.id),t&&t.type&&"string"==typeof t.type){var e=t.type;0<=["preroll","midroll","postroll"].indexOf(e.toLocaleString())&&(this.config.ads.type=e.toLocaleString())}},e.prototype.setVideoMetadata=function(){this.video&&(this.config.video.assetid=this.video.id,this.config.video.title=0===this.video.duration?e.LIVE_LABEL+this.video.name:this.video.name,this.config.video.hasAds="AD_SUPPORTED"===this.video.economics?"1":"0",this.config.video.length=0===this.video.duration?e.LIVE_DURATION:this.video.duration,this.config.video.program=this.config.sdk.apn)},e.LIVE_DURATION=86400,e.LIVE_LABEL="Live - ",e}(m),Un=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Hn=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.sdk={},n}return Un(e,a),e.prototype.load=function(){var n=this;return new Promise(function(e,t){var a=100,i=setInterval(function(){if(!(0!=--a||window.nn&&window.nn.APPID))return clearInterval(i),t({error:"NIELSEN FAILED TO LOAD"});if(window.nn&&void 0!==window.NOLBUNDLE&&"function"==typeof window.NOLBUNDLE.nlsQ){var r=new Vn(n.container);return n.initSDK(r),clearInterval(i),e()}},100)})},e.prototype.log=function(t){ca.getSearchParams().dbnielsen&&console.log("%c [Replayer][Nielsen] "+t,"background: #222; color: #bada55")},e.prototype.initSDK=function(t){t.initSDKConfig(),this.sdk=window.NOLBUNDLE.nlsQ(t.config.sdk.apid,this.container.bcInfo.videoId,{apn:t.config.sdk.apn,sfcode:t.config.sdk.sfcode,nol_sdkDebug:t.config.sdk.nol_sdkDebug}),this.log("@@@@@@@@@@@@@@@@@@@@@@@@@@@ - setting events"),this.events=new En(this.container,t,this)},e.prototype.sendEvent=function(n,e){this.sdk&&(this.log("["+n+"] "+JSON.stringify(e)),this.sdk.ggPM(n,e))},e.pluginName="PLUGIN_NIELSEN",e}(y),xn=function(){},Yn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gn=function(a){function d(e,t){var n=a.call(this,t)||this;n.module=new xn,n.element=e,n.cssClasses=n.element.className.split(" "),n.wrapper=document.createElement("div"),n.wrapper.className=d.containerClassName;var i=n.element.children[0];i?n.setHeaderAndContent(i):(n.element.appendChild(n.wrapper),n.createHeader(),n.createFooter(),n.createContent());var o=n.findExistingChapters();o&&(n.module.moduleChapters=o);var r=n.getService(ga.environment),s=r.getDomain();return-1===pa.AB_TEST_DISABLED_SITES.indexOf(s)&&r.browser.isMobile()&&ma.addClass(n.element,"ab-test-play-icon-center"),r.browser.isMobile()&&ma.addClass(n.element,"vms-mobile"),n}return Yn(d,a),d.prototype.getDefaultClasses=function(){var t=d.defaultCssClasses;return this.getService(ga.environment).browser.isDesktop()||t.push("mobile"),this.container.log(t),t},d.prototype.setHeaderAndContent=function(a){this.element.insertBefore(this.wrapper,a);var e=this.findExistingHeader();e?this.module.moduleHeader=e:this.createHeader();var t=this.findExistingContent();t?this.module.moduleContent=t:this.createContent();var n=this.findExistingFooter();n?this.module.moduleFooter=n:this.createFooter()},d.prototype.findExistingHeader=function(){var n=this.element.getElementsByClassName("module-header vms-header"),e=null;return 0<n.length&&(e=n[0]),e},d.prototype.findExistingContent=function(){var n=this.element.getElementsByClassName("module-content"),e=null;return 0<n.length&&(e=n[0]),e},d.prototype.findExistingChapters=function(){var n=null,e=this.element.getAttribute(M.CHAPTERS_CONTAINER_ATTRIBUTE);return e&&(n=document.getElementById(e)),n},d.prototype.findExistingFooter=function(){var n=this.element.getElementsByClassName("module-footer"),e=null;return 0<n.length&&(e=n[0]),e},d.prototype.createHeader=function(){this.module.moduleHeader=document.createElement("div"),this.module.moduleHeader.className="module-header vms-header",this.element.appendChild(this.module.moduleHeader)},d.prototype.createContent=function(){this.module.moduleContent=document.createElement("div"),this.module.moduleContent.className="module-content",this.element.appendChild(this.module.moduleContent)},d.prototype.createFooter=function(){this.module.moduleFooter=document.createElement("div"),this.module.moduleFooter.className="module-footer",this.element.appendChild(this.module.moduleFooter)},d.prototype.showBigPlayButton=function(){0<this.wrapper.getElementsByClassName("vjs-big-play-button").length&&(this.wrapper.getElementsByClassName("vjs-big-play-button")[0].style.display="block")},d.defaultCssClasses=["vms","vms-player","vms-ready"],d.containerClassName="videoWrapper",d.embedCodeAttributeName="vms-embedcode",d}(m),Wn=function(){function t(a,i){this.id=a.getAttribute(Gn.embedCodeAttributeName);var t=E.parseEmbedCode(this.id);2===t.length?(this.reference=!1,this.accountId=t[0],this.videoId=t[1]):(this.reference=!0,this.accountId=i.player.getAccountId(),this.videoId=t[0])}return t.prototype.getVideoId=function(){var t=this.videoId;return!0===this.reference&&(t="ref:"+t),t},t}(),Fn=function(){function t(){}return t.get=function(n){var e;return e=0<document.querySelectorAll("body.story, body.article, #articlecontainer, #articlestory, #article-comments").length?"single player":n.view.element.className.match(/archive/i)?"hub player":document.querySelectorAll(".vms-standalone").length?"embed":"other",e},t}(),Kn=function(){function t(){}return t.getCode=function(a,e){void 0===e&&(e=!1);var t="";try{for(var n=ca.getSearchParams().referrer||window.document.referrer,i={facebook:"_FBK",google:"_GGL",twitter:"_TWT",linkedin:"_LIN",reddit:"_RED"},o=new URL(n).hostname,r=0,s=Object.keys(i),l;r<s.length;r++)l=s[r],-1<o.indexOf(l)&&(t=i[l])}catch(t){}if(e){var c="WEB_REG821";return(d={})[pa.THE_ADVERTISER]="AAWEB_MRE170_a",d[pa.COURIER_MAIL]="CMWEB_MRE170_a",d[pa.DAILY_TELEGRAPH]="DTWEB_MRE170_a",d[pa.HERALD_SUN]="HSWEB_MRE170_a",d[pa.CAIRNS_POST]="CPWEB_MRE170_a",d[pa.GEELONG_ADVERTISER]="GAWEB_MRE170_a",d[pa.GOLDCOAST_BULLETIN]="GCWEB_MRE170_a",d[pa.NT_NEWS]="NTWEB_MRE170_a",d[pa.THE_CHRONICLE]="TCWEB_MRE170_a",d[pa.TOWNSVILLE_BULLETIN]="TBWEB_MRE170_a",d[pa.WEEKLY_TIMES_NOW]="WTWEB_MRE170_a",d[pa.THE_MERCURY]="TMWEB_MRE170_a",d[pa.THE_AUSTRALIAN]="TAWEB_MRE170_a",d[pa.CODESPORTS]="CSWEB_MRE170_a",(d[a]||c)+t}var d;return c="WEB_REG821",(d={})[pa.THE_ADVERTISER]="AAWEB_WRE170_a",d[pa.COURIER_MAIL]="CMWEB_WRE170_a",d[pa.DAILY_TELEGRAPH]="DTWEB_WRE170_a",d[pa.HERALD_SUN]="HSWEB_WRE170_a",d[pa.CAIRNS_POST]="CPWEB_WRE170_a",d[pa.GEELONG_ADVERTISER]="GAWEB_WRE170_a",d[pa.GOLDCOAST_BULLETIN]="GCWEB_WRE170_a",d[pa.NT_NEWS]="NTWEB_WRE170_a",d[pa.THE_CHRONICLE]="TCWEB_WRE170_a",d[pa.TOWNSVILLE_BULLETIN]="TBWEB_WRE170_a",d[pa.WEEKLY_TIMES_NOW]="WTWEB_WRE170_a",d[pa.THE_MERCURY]="TMWEB_WRE170_a",d[pa.THE_AUSTRALIAN]="TAWEB_WRE170_a",d[pa.CODESPORTS]="CSWEB_WRE170_a",(d[a]||c)+t},t}(),jn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xn=function(a){function e(e,o){var n=a.call(this,e)||this;return n.view=o,n.setEvents(),n}return jn(e,a),e.prototype.setEvents=function(){var a=this,e=this.container.getService(ga.context),t=this.getService(ga.eventManager),d=this.getService(ga.environment),p=this.getService(ga.analytics);t.addCustomListener(this.container,Ea.EVENT_CAPI_LOADED,function(){a.view.title.innerHTML=e.capiVideo.title,a.view.duration.innerHTML=D.formatDuration(e.capiVideo.duration/1e3)}),t.addCustomListener(this.container,Mo.BC_READY,function(){t.addCustomListener(a.container,Ke.EVENT_USER_STATUS,function(){a.container.view.wrapper.appendChild(a.view.element),a.view.hide();var n=a.container.getPluginInstance(Jn.pluginName);n.shouldDisplay()&&e.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM&&(a.view.show(),ma.addClass(a.container.view.element,Jn.VMS_CLASS),e.forceAutoplay(!1)),t.addMultipleListener(a.container,["play","timeupdate","loadedmetadata"],function(){n.shouldDisplay()?(a.view.show(),a.container.bcPlayer().pause(),t.trigger(a.container,Ke.EVENT_CHECK_LOGIN)):a.view.hide()})})}),ma.onClick(this.view.loginButton,function(){var e=a.getService(ga.utag),t=a.container.getPluginInstance(Jn.pluginName);p.omniture.trackOnce(["event10"],{eVar23:e.get("net_site")+"|"+e.get("net_sec1")+"|global-sign-in|login-video-player|1|"+e.get("net_content_type")+"|"+e.get("net_pn")},!0);try{t.setPremiumAdsSession(),newscorpau.rampart.login(window.location.href)}catch(e){var n=a.getService(ga.environment);if(pa.THE_AUSTRALIAN===n.getDomain()){var i=document.querySelector(".header__user-status .header__user-login");i&&(t.setPremiumAdsSession(),i.click())}}}),ma.onClick(this.view.subscribeButton,function(){var e=a.getService(ga.utag),t=a.container.getPluginInstance(Jn.pluginName);p.omniture.trackOnce(["event10"],{eVar23:e.get("net_site")+"|"+e.get("net_sec1")+"|global-sign-in|register-video-player|2|"+e.get("net_content_type")+"|"+e.get("net_pn")},!0);try{t.setPremiumAdsSession();var n="video",i=a.getService(ga.context);i.capiVideo.source===l.SOURCE_KTV&&(n="KTV"),window.location.href="/subscribe/news/1/?sourceCode="+Kn.getCode(d.getDomain(),d.browser.isMobile())+"&dest="+encodeURIComponent(window.location.href)+"&memtype="+(i.auth.currentRole===Ke.USER_ANONYMOUS?"anonymous":"registered")+"&mode=premium&BT="+n+"&AssetId="+i.capiVideo.id}catch(e){var o=a.getService(ga.environment);if(pa.THE_AUSTRALIAN===o.getDomain()){var r=document.querySelector(".header__user-status .header__user-subscribe");r&&(t.setPremiumAdsSession(),r.click())}}})},e}(m),zn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qn=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_PREMIUM_VIDEO,n.headerContainer=document.createElement("div"),ma.addClass(n.headerContainer,e.CSS_HEADER),n.premiumLabel=document.createElement("div"),n.premiumLabel.innerHTML=e.PREMIUM_CONTENT_LABEL,n.premiumLabel.className="premium-content-label",n.duration=document.createElement("div"),n.duration.innerHTML="00:00",n.duration.className=e.CSS_DURATION,n.headerContainer.appendChild(n.premiumLabel),n.headerContainer.appendChild(n.duration),n.premiumvideoContainer=document.createElement("div"),n.premiumvideoContainer.className="premiumvideo-container",n.title=document.createElement("div"),n.title.className="title-container",n.premiumvideoContainer.appendChild(n.headerContainer),n.premiumvideoContainer.appendChild(n.title),n.element.appendChild(n.premiumvideoContainer),n.subscribeButtonContainer=document.createElement("div"),n.subscribeButtonContainer.className="subscribe-button-container",n.subscribeButton=document.createElement("button"),n.subscribeButton.className="subscribe-button",n.subscribeButton.innerHTML=e.SUBSCRIBE_BUTTON_LABEL,n.loginButton=document.createElement("button"),n.loginButton.className="login-button",n.loginButton.innerHTML=e.LOGIN_BUTTON_LABEL,n.watchLabel=document.createElement("div"),n.watchLabel.innerHTML=e.WATCH_PREMIUM_VIDEO_LABEL,n.watchLabel.className="watch-video-label",n.subscribeButtonContainer.appendChild(n.subscribeButton),n.subscribeButtonContainer.appendChild(n.loginButton),n.subscribeButtonContainer.appendChild(n.watchLabel),n.premiumvideoContainer.appendChild(n.subscribeButtonContainer),n.element.appendChild(n.premiumvideoContainer),n}return zn(e,a),e.prototype.show=function(){a.prototype.show.call(this),this.container.getService(ga.analytics).omniture.trackOnce([f.BREACH_DISPLAYED],{eVar176:"standard"})},e.CSS_PREMIUM_VIDEO="vms-premium-video",e.CSS_HEADER="premium-header",e.CSS_DURATION="premium-duration",e.PREMIUM_CONTENT_LABEL="PREMIUM",e.WATCH_PREMIUM_VIDEO_LABEL="to watch the premium video",e.SUBSCRIBE_BUTTON_LABEL="Subscribe",e.LOGIN_BUTTON_LABEL="Log in",e}(T),$n=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zn=function(a){function e(e){var i=a.call(this,document.createElement("div"))||this;return i.container=e,i.element.className=Qn.CSS_PREMIUM_VIDEO,i.headerContainer=document.createElement("div"),ma.addClass(i.headerContainer,Qn.CSS_HEADER),i.premiumLabel=document.createElement("div"),i.premiumLabel.innerHTML=Qn.PREMIUM_CONTENT_LABEL,i.premiumLabel.className="premium-content-label",i.duration=document.createElement("div"),i.duration.innerHTML="00:00",i.duration.className=Qn.CSS_DURATION,i.headerContainer.appendChild(i.premiumLabel),i.headerContainer.appendChild(i.duration),i.premiumvideoContainer=document.createElement("div"),i.premiumvideoContainer.className="premiumvideo-container",i.title=document.createElement("div"),i.title.className="title-container",i.premiumvideoContainer.appendChild(i.headerContainer),i.premiumvideoContainer.appendChild(i.title),i.element.appendChild(i.premiumvideoContainer),i.subscribeButtonContainer=document.createElement("div"),i.subscribeButtonContainer.className="subscribe-button-container",i.subscribeButton=document.createElement("button"),i.subscribeButton.className="subscribe-button",i.subscribeButton.innerHTML=Qn.SUBSCRIBE_BUTTON_LABEL,i.loginButton=document.createElement("button"),i.loginButton.className="login-button",i.loginButton.innerHTML=Qn.LOGIN_BUTTON_LABEL,i.watchLabel=document.createElement("div"),i.watchLabel.innerHTML=Qn.WATCH_PREMIUM_VIDEO_LABEL,i.watchLabel.className="watch-video-label",i.subscribeButtonContainer.appendChild(i.subscribeButton),i.subscribeButtonContainer.appendChild(i.loginButton),i.subscribeButtonContainer.appendChild(i.watchLabel),i.element.appendChild(i.premiumvideoContainer),i.ampTextContainer=document.createElement("div"),i.ampTextContainer.className="vms-premium-amp",i.ampTextContainer.innerHTML="<div>Become a member to access our premium video content</div>",i.premiumvideoContainer.appendChild(i.ampTextContainer),i}return $n(e,a),e.prototype.show=function(){a.prototype.show.call(this),this.container.getService(ga.analytics).omniture.trackOnce([f.BREACH_DISPLAYED],{eVar176:"standard"})},e.CSS_PREMIUM_VIDEO="vms-premium-video",e.CSS_HEADER="premium-header",e.CSS_DURATION="premium-duration",e.PREMIUM_CONTENT_LABEL="PREMIUM",e.WATCH_PREMIUM_VIDEO_LABEL="to watch the premium video",e.SUBSCRIBE_BUTTON_LABEL="Subscribe",e.LOGIN_BUTTON_LABEL="Log in",e}(T),qn=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Jn=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=e.AMP_ENABLED?ca.isAmp()?new Zn(t):new Qn(t):new Qn(t),n.events=new Xn(t,n.view),n}return qn(e,a),e.prototype.shouldDisplay=function(){var n=this.container.getService(ga.context),e=!1;return n.capiVideo.accessType===l.ACCESS_TYPE_PREMIUM&&(Ke.getStatusFromCookie()!==Ke.USER_ANONYMOUS&&n.auth.currentRole!==Ke.USER_ANONYMOUS||(e=!0)),ca.getSearchParams().forcePremium&&(e=!0),e},e.prototype.getPremiumAdsSessionId=function(){var t=this.getService(ga.context);return window.btoa("vms-premium-login-"+t.capiVideo)},e.prototype.setPremiumAdsSession=function(){var t=this.getService(ga.context);sessionStorage.setItem(this.getPremiumAdsSessionId(),window.btoa("vms-premium-login-"+t.capiVideo))},e.prototype.shouldAdsBeDisabled=function(){var t=!1;return sessionStorage.getItem(this.getPremiumAdsSessionId())&&Ke.getStatusFromCookie()===Ke.USER_SUBSCRIBER&&(t=!0,sessionStorage.removeItem(this.getPremiumAdsSessionId())),t},e.pluginName="PLUGIN_PREMIUM_VIDEO",e.VMS_CLASS="vms-show-premium",e.AMP_ENABLED=!1,e}(y),_a=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ea=function(a){function s(e){var t=a.call(this,e)||this;t.autoPlay=!0,t.currentlyPlayingVideo=null,t.firstPlay=!0,t.playerType="single player",t.playOrder=1,t.recommendationsOrigin="",t.ssai=!1,t.admiralEngaged=!1,t.adsDisabled=!1,t.errored=!1,t.retryPlaybackOnError=5,t.sticky=!1,t.manuallyStarted=!1,t.clickToPlay=!1,t.hasClosedCaptions=!1,t.recommendationsStartIndex=0,t.recommendationsType="",t.videoQuality="auto",t.hasBeenVisible=!1,t.mobilePlaylistItems=[],t.currentlyPlayingMobileItem=null,t.hasRecommendations=!1,t.videoContentType=s.CT_STANDARD;var n=e.getService(ga.environment);(-1<e.view.cssClasses.indexOf("vms-autoplay-off")||-1<e.view.cssClasses.indexOf("autoplay-off")||!n.browser.isDesktop()||n.isHubPage||t.isShowcase())&&(n.isSky()?t.autoPlay=!0:t.autoPlay=!1),n.isSky()&&(t.autoPlay=!0),(-1<e.view.cssClasses.indexOf("vms-autoplay-off")||-1<e.view.cssClasses.indexOf("autoplay-off"))&&ma.addClass(e.view.element,"vms-autoplay-disabled"),e.view.element.hasAttribute("vms-sticky-target")&&(t.sticky=!0);var i=t.getService(ga.pageManager);return i&&i.currentlyPlaying&&i.currentlyPlaying!==e&&i.currentlyPlaying.view.element.parentNode&&(t.autoPlay=!1),t.playerType=Fn.get(e),t.container=e,t.visibility=new st(e),t.visibility.setEvents(),t.fetchedRecommendationsAmount=parseInt(e.view.element.getAttribute("vms-recs-limit")),t}return _a(s,a),s.prototype.withCapiData=function(t){this.capiVideo=t,this.initClosedCaptions(t),this.getService(ga.eventManager).trigger(this.container,s.EVENT_CAPI_LOADED)},s.prototype.initClosedCaptions=function(t){this.hasClosedCaptions=t&&t.extendedMetadata&&t.extendedMetadata.hasCaptions},s.prototype.hasSubtitles=function(){return this.hasClosedCaptions},s.prototype.forceHubStyle=function(){return this.container.view.element.hasAttribute("vms-hub-style")},s.prototype.withBCVideo=function(t){this.bcVideo=t,this.hasClosedCaptions=this.hasClosedCaptions||t&&t.tags&&-1<t.tags.indexOf(s.CC_TAG),t.custom_fields&&t.custom_fields.ad_control&&t.custom_fields.ad_control===s.AC_SENSITIVE?(this.adControl=s.AC_SENSITIVE,this.autoPlay=!1,this.adsDisabled=!0,this.videoContentType=s.CT_SENSITIVE):t.custom_fields&&t.custom_fields.ad_control&&t.custom_fields.ad_control===s.AC_SPONSORED?(this.adControl=s.AC_SPONSORED,this.adsDisabled=!0,this.videoContentType=s.CT_SPONSORED):(this.videoContentType=s.CT_STANDARD,this.adsDisabled=this.getService(ga.environment).adsDisabled),-1<this.container.view.cssClasses.indexOf(s.SPONSORED_CSS)&&(this.adControl=s.AC_SPONSORED,this.adsDisabled=!0,this.videoContentType=s.CT_SPONSORED);var e=this.container.getPluginInstance(Jn.pluginName);e&&e.shouldAdsBeDisabled()&&(this.adsDisabled=!0)},s.prototype.isShowcase=function(){var t=!1;return-1<ca.getDomain().indexOf(pa.THE_AUSTRALIAN)&&this.container.view.element.closest(".module-content")&&this.container.view.element.closest(".module-content").closest(".module.video-showcase")&&(t=!0),t},s.prototype.checkUserTypeParameter=function(){var n=this.container.view.element.getAttribute("vms-userType"),e=this.getService(ga.environment);n&&"s"===n&&-1<pa.PROJECT0_SITES.indexOf(e.getDomain())&&(this.adsDisabled=!0)},s.prototype.checkAdsDomainDisabled=function(){-1!==pa.ADS_DISABLED_SITES.indexOf(ca.getDomain())&&(this.adsDisabled=!0)},s.prototype.isSticky=function(){return ma.hasClass(this.container.view.element,"vms-sticky")},s.prototype.canAutoplay=function(){var t=this.autoPlay;return t=We.get(this.container).autoplayEnabled,this.isShowcase()&&(t=!this.firstPlay),this.adControl!==s.AC_SENSITIVE&&t},s.prototype.canAutoPlayPlaylist=function(){var a=this.container.getService(ga.environment),e=this.container.getService(ga.utag),t=a.browser.isMobile()||a.browser.isIOS(),n=a.getPageType(e,this.container);return!(this.firstPlay||n!==c.ARTICLE_PAGE_TYPE&&n!==c.VIDEO_AS_FIRST_CLASS_ASSETS_PAGE&&n!==c.INDEX_PAGE_TYPE||t||-1!==ca.getDomain().indexOf(pa.TASTE))},s.prototype.forceAutoplay=function(t){this.autoPlay=t},s.CC_TAG="cc-enabled",s.AC_SENSITIVE="Sensitive Content",s.AC_SPONSORED="Sponsored Content",s.SPONSORED_CSS="vms-sponsored",s.CT_SPONSORED="Sponsored",s.CT_SENSITIVE="Sensitive",s.CT_STANDARD="Standard",s.EVENT_CAPI_LOADED="EVENT_CAPI_LOADED",s}(m),Aa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ya=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Aa(e,n),e.prototype.log=function(t){"true"===ca.getSearchParams().debug&&console.log("replayer %c"+this.container.bcInfo.getVideoId(),"color: #8eb533",t)},e}(m),va=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ca=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.createComponent(),n}return va(e,a),e.prototype.createComponent=function(){if(this.loader=document.createElement("div"),this.loader.className="vms-controls",this.container.getService(ga.environment).browser.isMobile()){var t=new J;this.loader.appendChild(t.element)}else this.loader.innerHTML="<div class=\"vms-center\">\n                                <a class=\"vms-btn-loading\"></a>\n                            </div>";this.container.view.element.appendChild(this.loader)},e.pluginName="PLUGIN_LOADER",e}(y),Sa=function(){function t(){}return t.disabled="VIDORA_DISABLED",t.beacon="VIDORA_BEACON",t.enabled="VIDORA_ENABLED",t}(),ha=function(){function t(a,o,t,n){this.apiKey="",this.secret="",this.enabled="",this.apiKey=a,this.secret=o,this.enabled=t,this.container=n}return t.prototype.getApiKey=function(){return this.apiKey},t.prototype.beaconEnabled=function(){return-1<[Sa.beacon,Sa.enabled].indexOf(this.enabled)},t.prototype.isEnabled=function(){var t=this.container.getService(ga.environment).getDomain();return-1===pa.VIDORA_DISABLED_SITES.indexOf(t)&&!ma.hasClass(this.container.view.element,"vms-legacy-recommendations")&&this.enabled===Sa.enabled},t}(),Ta={beta:{key:"newsau_video.93DFAEA2BB0A788E1466709DFF2B086C",secret:"17157905A52B991CBB7EA45FF1206F0F29B2B44CC622FAA663",enabled:Sa.enabled},prod:{key:"newsau_video.93DFAEA2BB0A788E1466709DFF2B086C",secret:"17157905A52B991CBB7EA45FF1206F0F29B2B44CC622FAA663",enabled:Sa.enabled}},Ia=function(){function t(){}return t.get=function(r,e){var t=Ta[r.getEnvName()],n=new ha("","","disabled",e);if(t){var i=ca.getSearchParams(),o=i.vidora&&i.vidora||t.enabled;n=new ha(t.key,t.secret,o,e)}return n},t}(),Na=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ba=function(n){function e(e){return n.call(this,e)||this}return Na(e,n),e.prototype.augment=function(){return new Promise(function(n,e){return e([])})},e}(m),wa=function(){function n(a,o,t,n){this.key=a,this.recommendationsKey=n||a,this.contentUrl=o,this.baseUrl=t}return n.prototype.getContentKey=function(e){return e&&e===n.RECOMMENDATION_KEY?this.recommendationsKey:this.key},n.prototype.getContentUrl=function(){return this.contentUrl},n.prototype.getBaseUrl=function(){return this.baseUrl},n.RECOMMENDATION_KEY="CAPI_RECOMMENDATIONS_KEY",n.CONTENT_KEY="CAPI_CONTENT_KEY",n}(),Pa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),La=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Pa(e,n),e.prototype.withVidora=function(t){this.vidora=t},e.prototype.augment=function(){var s=this,n=this.container.getService(ga.context).fetchedRecommendationsAmount||e.DEFAULT_PAGE_SIZE;return new Promise(function(d,e){var t=s.getService(ga.environment),i=function(e){if(!(0<e.length))return d([]);var t=[],i=s.getService(ga.capi),o=e.slice(0,n);e=e.slice(n,e.length),i.getVideosById(o,s.container,wa.RECOMMENDATION_KEY).then(function(r){t=t.concat(r);for(var n=0,i=e;n<i.length;n++){var o=i[n],a=new l;a.id=o,a.fetched=!1,t.push(a)}return d(t)})},o=s.getService(ga.context);o.recommendationsType&&"similars"===o.recommendationsType?s.vidora.getSimilarities(ua.getDomain(t)).then(i).catch(function(){return e([])}):s.vidora.getRecommendations(ua.getDomain(t),o.recommendationsStartIndex).then(i).catch(function(){return e([])})})},e.DEFAULT_PAGE_SIZE=3,e}(ba),Oa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fa=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Oa(e,n),e.prototype.withVidora=function(t){this.vidora=t},e.prototype.augment=function(t){var s=this;return new Promise(function(d,n){var a=s.getService(ga.environment);s.vidora.getTrending(ua.getDomain(a)).then(function(i){if(0<i.length){var o=i.slice(0,e.DEFAULT_PAGE_SIZE);return i=i.slice(e.DEFAULT_PAGE_SIZE,i.length),s.getService(ga.capi).getVideosById(o,s.container,wa.RECOMMENDATION_KEY).then(function(o){for(var e=0,t=i;e<t.length;e++){var n=t[e],r=new l;r.id=n,r.fetched=!1,o.push(r)}return d(o)}).catch(function(){return n([])})}return d(t)}).catch(function(){return n([])})})},e.DEFAULT_PAGE_SIZE=4,e}(ba),Ra=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Da=function(a){function e(e,o){var n=a.call(this,e)||this;return n.trackedItems=[],n.vidora=o,n.setEvents(),n}return Ra(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addSingleCustomListener(this.container,Mo.BC_READY,function(){if(a.vidora.addVidoraScript(),a.vidora.config.isEnabled()){var e=a.getService(ga.capi),t=new La(a.container,e);t.withVidora(a.vidora),e.registerAugmenter(t);var n=new fa(a.container,e);n.withVidora(a.vidora),e.registerAugmenter(n,ce.TYPE_TRENDING)}}),e.addSingleEventListener(this.container,"play",function(){if(a.vidora.client)a.vidora.client.trackPlay();else var e=100,t=setInterval(function(){(0==--e||a.vidora.client)&&(clearInterval(t),a.vidora.client&&a.vidora.client.trackPlay())},100)}),e.addSingleCustomListener(this.container,Ce.UP_NEXT_CLICK,function(){a.vidora.client&&a.vidora.client.trackClick()}),e.addCustomListener(this.container,W.EVENT_ITEM_VIEWPORT_VISIBLE,function(e){var t=e.capiVideo;t&&-1===a.trackedItems.indexOf(t.id)&&a.vidora.client&&(a.trackedItems.push(t.id),a.vidora.client.trackShown(t))}),e.addCustomListener(this.container,ye.PLAYLIST_ITEM_PLAYED,function(e){var t=e.capiVideo;t&&-1===a.trackedItems.indexOf(t.id)&&a.vidora.client&&(a.trackedItems.push(t.id),a.vidora.client.trackShown(t))})},e}(m),Ma=function(){function t(){}return t.getUserId=function(){return h.getCookie(t.PCSID)},t.getCookieId=function(){return h.getCookie(t.NCGID)},t.PCSID="metrics_pcsid",t.NCGID="_ncg_id_",t.NOT_SET="not set",t}(),ka=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ba=function(a){function o(e,o,n){var i=a.call(this,e)||this;return i.config=o,i.api=n,i}return ka(o,a),o.prototype.getUrl=function(t,e){var n=""+o.BASE_URL+t;return e.forEach(function(a,e){n=n.replace(new RegExp("{"+e+"}","g"),a)}),n=this.addApiKey(n)},o.prototype.addApiKey=function(n){var e="?";return-1<n.indexOf(e)&&(e="&"),n+(e+"api_key=")+this.config.getApiKey()},o.prototype.getItemSimilarities=function(t,e,n){var a=new Map;return a.set("user_id",t),a.set("item_id",e),a.set("limit",""+o.SIMILARITIES_LIMIT),a.set("domain",n||""),fetch(this.getUrl(o.SIMILARITIES_URL,a))},o.prototype.getRecommendations=function(t,e,n){var a=new Map;return a.set("user_id",t||this.api.getUserId()),a.set("limit",""+o.TRENDING_LIMIT),a.set("start_index",""+e),a.set("domain",n||""),fetch(this.getUrl(o.RECOMMENDATIONS_URL,a))},o.prototype.getTrending=function(t){var e=new Map;return e.set("limit",""+o.TRENDING_LIMIT),e.set("domain",t||""),fetch(this.getUrl(o.TRENDING_URL,e))},o.prototype.track=function(a,e){if(this.config.beaconEnabled()){var t=this.container.getService(ga.context),n=e||t.capiVideo;this.api.send(a,n.id,{params:{cookie_id:Ma.getCookieId(),group_id:ca.getDomain()}})}},o.prototype.trackPlay=function(){this.track(Ua.EVENT_PLAY)},o.prototype.trackShown=function(t){this.track(Ua.EVENT_SHOWN,t)},o.prototype.trackClick=function(){this.track(Ua.EVENT_CLICK)},o.BASE_URL="https://api.vidora.com/",o.SIMILARITIES_URL="v1/users/{user_id}/items/{item_id}/similars?limit={limit}&category={domain}",o.SIMILARITIES_LIMIT=10,o.TRENDING_URL="v1/items/trending?limit={limit}&categories={domain}",o.RECOMMENDATIONS_URL="v1/users/{user_id}/recommendations?limit={limit}&category={domain}&start_index={start_index}",o.TRENDING_LIMIT=10,o}(m),Va=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ua=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this;return(t.api=null,t.fetchedTypes=[],t.config=Ia.get(t.getService(ga.environment),e),t.config.beaconEnabled())&&(t.events=new Da(e,t),t.container.getService(ga.eventManager).addListener(t.container,"ready",function(){t.serviceProvider.register(ga.vidora,t)})),t}return Va(s,a),s.prototype.addVidoraScript=function(){var t=document.createElement("script");t.setAttribute("script-name","vidora"),t.innerHTML="(function(a,b,c,d,e){var f={_q:[]};f.ready=f.push=function(a){f._q.push(a)},c in a||(a[c]=f),a[c].ready(function(a,b){b._i(d,e)})})(window,document,\"vidora\",\""+this.config.getApiKey()+"\");",document.head.appendChild(t),this.bindEvents()},s.prototype.ready=function(){var t=this;return new Promise(function(e,n){var a=s.READY_ATTEMPTS,i=setInterval(function(){return 0!=--a||t.api?t.api?(Ma.getUserId()!==Ma.NOT_SET&&t.api.setUserId(Ma.getUserId()),t.client=new Ba(t.container,t.config,t.api),clearInterval(i),e()):void 0:(clearInterval(i),n({error:"VIDORA_NOT_READY"}))},100)})},s.prototype.getSimilarities=function(t){var a=this;return new Promise(function(n,e){a.ready().then(function(){if(a.container.log("[Vidora]",a.config.isEnabled()),!a.config.isEnabled())return e();var i=a.getService(ga.context);a.client.getItemSimilarities(a.api.getUserId(),i.capiVideo.id,t).then(function(t){t.json().then(function(t){t.items&&0<t.items.length&&a.fetchedTypes.push(s.TYPE_SIMILARITIES),n(t.items)})}).catch(function(){return e()})}).catch(function(){return e()})})},s.prototype.getTrending=function(t){var a=this;return new Promise(function(n,i){a.ready().then(function(){return a.config.isEnabled()?void a.client.getTrending(t).then(function(t){t.json().then(function(t){t?(0<t.length&&a.fetchedTypes.push(s.TYPE_TRENDING),n(t)):i([])})}).catch(function(){return i()}):i()}).catch(function(){return i()})})},s.prototype.getRecommendations=function(a,e){var l=this;return void 0===e&&(e=0),new Promise(function(n,i){l.ready().then(function(){return l.config.isEnabled()?void l.client.getRecommendations(l.api.getUserId(),e,a).then(function(t){t.json().then(function(r){if(r&&r.items&&0<r.items.length){for(var e=[],t=0,o=r.items,a;t<o.length;t++)a=o[t],e.push(a.id);var s=l.getService(ga.context);r.next_index&&0<r.next_index&&r.next_index>s.recommendationsStartIndex?s.recommendationsStartIndex=r.next_index:l.getService(ga.eventManager).trigger(l.container,Ce.UP_NEXT_DEPLETED),n(e)}else i([])})}):i()})})},s.prototype.wasContentFetched=function(){return 0<this.fetchedTypes.length},s.prototype.bindEvents=function(){var n=this;window.vidora.ready(function(e){n.api=e})},s.pluginName="PLUGIN_VIDORA",s.JS_PATH="https://assets.vidora.com/js/vidora-client.1.x.x.min.js",s.EVENT_PLAY="play",s.EVENT_SHOWN="shown",s.EVENT_CLICK="click",s.TYPE_SIMILARITIES="SIMILARITIES",s.TYPE_TRENDING="TRENDING",s.READY_ATTEMPTS=50,s.VMS_ATTR_TYPE="vms-vidora-type",s}(y),Ha=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xa=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return Ha(e,a),e.prototype.getPlayer=function(t){return t.ads.isAdPlaying()&&t.ima3&&t.ima3.adPlayer||t},e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager),i=this.getService(ga.context);e.addCustomListener(this.container,st.EVENT_SCROLL_HIDDEN,function(){var e=a.container.bcPlayer();e&&(i.wasPlaying=!!i.playing,a.getPlayer(e).pause())}),e.addCustomListener(this.container,st.EVENT_SCROLL_VISIBLE,function(){var e=a.container.bcPlayer();e&&i.wasPlaying&&a.getPlayer(e).play()}),e.addCustomListener(this.container,st.EVENT_PAGE_HIDDEN,function(){var e=a.container.bcPlayer();e&&(i.wasPlaying=!!i.playing,a.getPlayer(e).pause())}),e.addCustomListener(this.container,st.EVENT_PAGE_VISIBLE,function(){var e=a.container.bcPlayer();e&&i.wasPlaying&&a.getPlayer(e).play()})},e.pluginName="PLUGIN_VIEWABILITY",e}(y),Ya={sit:3207,uat:3207,beta:5591,prod:5591},Ga=function(){function t(){}return t.get=function(t){return Ya[t.name]},t}(),Wa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Fa=function(r){function e(e,l){var n=r.call(this,e)||this;n.baseUrl="http://pubads.g.doubleclick.net/gampad",n.gdfp_req=1,n.impl="s",n.output="xml_vast4",n.unviewed_position_start=1,n.url="",n.correlator="[timestamp]",n.hl="en",n.cmsid="3207",n.description_url="",n.ad_rule=1,n.pvid="",n.env="vp",n.path="/adx";var i=n.getService(ga.environment);l&&"ads"!==l||(n.sz="427x240",n.env="vp",n.path="/ads"),n.custom_params=new Ze(e);var o=e.getService(ga.context);"beta"===i.getEnvName()&&!0===o.sticky&&(n.sticky="true");var a=ca.getSearchParams();return n.iu=a.iu||window.ads_api&&window.ads_api.uname||"",n.cmsid=""+Ga.get(i),n.description_url=n.url=encodeURIComponent(i.pageUrl),n}return Wa(e,r),e.prototype.setBCPlayer=function(t){this.custom_params.setBCPlayer(t)},e.prototype.setVideoId=function(t){this.vid=t},e.prototype.toQueryString=function(){for(var a="",e=0,t=Object.getOwnPropertyNames(this),n;e<t.length;e++)switch(n=t[e],n){case"baseUrl":case"path":case"serviceProvider":case"container":break;case"custom_params":a+="cust_params="+this.custom_params.get()+"&";break;case"sticky":a+="pp=Desktop%20Sticky%20Player&";break;default:a+=n+"="+this[n]+"&";}return a.replace(/\&+$/,"")},e.prototype.get=function(){return""+this.baseUrl+this.path+"?"+this.toQueryString()},e}(m),Ka=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ja=function(a){function l(e,o){var n=a.call(this,e)||this;return n.enabled=!0,n.score=-1,n.tracked=!1,n.requested=!1,n.ads_api=o,n}return Ka(l,a),l.prototype.initiateBids=function(n){if(this.score=0,this.ads_api&&this.enabled&&this.ads_api.requestVideoBids){this.requested=!0;var a=n?!n:this.container.bcPlayer().muted();this.ads_api.requestVideoBids(this.container.player.element.id,a),this.score++}},l.prototype.getVideoBids=function(){if(this.ads_api&&this.enabled&&this.ads_api.getVideoBids&&this.requested)return this.requested=!1,this.score++,this.ads_api.getVideoBids(this.container.player.element.id)},l.prototype.get=function(){if(!this.requested)throw"Bid was not requested";var t=this.getVideoBids()||"",e={};if(-1===t.indexOf(l.EMPTY_BID))for(var n=t.split("&"),i=0;i<n.length;i++){var r=n[i].split("="),o=r[0],a=r[1];e[o]=a}return e},l.prototype.track=function(){if(!this.tracked&&!this.getService(ga.context).adsDisabled&&this.container.bcPlayer().hasStarted()){if(0<this.score){var t=this.container.getService(ga.utag).get(l.STATUS_FIELD);t===l.STATUS_NOT_REQUESTED&&(this.score=1.1),t===l.STATUS_SENT&&(this.score=1.2)}this.container.getService(ga.analytics).omniture.track([],{eVar145:""+this.score}),this.tracked=!0}},l.STATUS_FIELD="prebid_video_status",l.STATUS_NOT_REQUESTED="not_requested",l.STATUS_SENT="request_sent",l.EMPTY_BID="bid_response=empty",l}(m),Xa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),za=function(a){function e(){var e=a.call(this,document.createElement("video"))||this;e.data="AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAABfhtZGF0AAACrgYF//+q3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0OCByMjc5NSBhYWE5YWE4IC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNyAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTMgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MzoweDExMyBtZT1oZXggc3VibWU9NyBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0xIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MSA4eDhkY3Q9MSBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0tMiB0aHJlYWRzPTEgbG9va2FoZWFkX3RocmVhZHM9MSBzbGljZWRfdGhyZWFkcz0wIG5yPTAgZGVjaW1hdGU9MSBpbnRlcmxhY2VkPTAgYmx1cmF5X2NvbXBhdD0wIGNvbnN0cmFpbmVkX2ludHJhPTAgYmZyYW1lcz0zIGJfcHlyYW1pZD0yIGJfYWRhcHQ9MSBiX2JpYXM9MCBkaXJlY3Q9MSB3ZWlnaHRiPTEgb3Blbl9nb3A9MCB3ZWlnaHRwPTIga2V5aW50PTI1MCBrZXlpbnRfbWluPTI1IHNjZW5lY3V0PTQwIGludHJhX3JlZnJlc2g9MCByY19sb29rYWhlYWQ9NDAgcmM9Y3JmIG1idHJlZT0xIGNyZj0yMy4wIHFjb21wPTAuNjAgcXBtaW49MCBxcG1heD02OSBxcHN0ZXA9NCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAtWWIhADf1dnw3uEMYFxdkKGLFSE8V8gmBVxjgYDTpR+Y4yY1IjXPue2iMDxhChqtQNqizZpF2+2rwW2krhO2fCAoGkXHTEIo+ZBWcdm7KoicD60oIS2OgbdHyuhWlsICALRNH0V7Vj8lIlBq+uVlhMi8Hnb+g1anuos/9uAaevnkLz29NBsg9nwxYjfbjWCfyn0ByJPW5MhzcjqghFWdTr3/kNjhQHkLMeFhPWD434XLPAql/UEAAAAIQZohbE3/L6DeBABMYXZjNTcuMTA3LjEwMABCIAjBGDgAAAAZQZpCPCGTKYTf7rNbEPYyb+kR0yUbk2auASEQBGCMHCEQBGCMHAAAADRBmmNJ4Q8mUwJv7rNfgEIgjcNxb+K7lWGI2BoOt3rwTeMKqYsTgqyrwnKraagNYeofMxrMIRAEYIwcIRAEYIwcAAAANUGahEnhDyZTAm/Id9WHMnrNziFQCHZQx6q6ucN0p3bYb0CnK1qSjSl1y5nMOoj1SFC5PFUVIRAEYIwcIRAEYIwcAAAATkGapkvhCEPIfARwNUBHA3AURPEf1Y/KUVLg4tMkBqMjQOBfsEESYkEYAMjimFGm0U8oDTVsM7u1kCJhUjU5daYHd9IkQtjo9DxXRkFSByEQBGCMHCEQBGCMHAAAAAgBnsVqQl+7gSEQBGCMHCEQBGCMHAAAADlBmshL4QhDyHwEUCVARQJwFPGf+DfR5BegD+7r0RCipmFFG+s0s1Y+qwVfiaLkodcMyJ4onioM3v8hEARgjBwhEARgjBwAAAAIAZ7nakJfu4AhEARgjBwhEARgjBwAAAA4QZrqS+EIQ8hsCMC1AjAvAU8d//VvcGxKPUubRd3pPVN4+T0R39FcclnahNyFE1gsw0vns6yqE8AhEARgjBwAAAAJAZ8JakKf4pg/IRAEYIwcIRAEYIwcAAAAL0GbC0vhCEPIbAjAtQIwLwCEP+bxXnvHFz5py+e3oRxI/Cdj02OMzpOvHFzWR2BQIRAEYIwcIRAEYIwcAAAAHEGbLEvhCEPIfAQQlAQQsAhT/+dTgbX0k/KktuAhEARgjBwhEARgjBwhEARgjBwhEARgjBwhEARgjBwAAAarbW9vdgAAAGxtdmhkAAAAAAAAAAAAAAAAAAAD6AAAAhYAAQAAAQAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAvh0cmFrAAAAXHRraGQAAAADAAAAAAAAAAAAAAABAAAAAAAAAggAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAACqqqwAYAAAAAAAkZWR0cwAAABxlbHN0AAAAAAAAAAEAAAIIAAAEAAABAAAAAAJwbWRpYQAAACBtZGhkAAAAAAAAAAAAAAAAAAAyAAAAGgBVxAAAAAAALWhkbHIAAAAAAAAAAHZpZGUAAAAAAAAAAAAAAABWaWRlb0hhbmRsZXIAAAACG21pbmYAAAAUdm1oZAAAAAEAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAdtzdGJsAAAAp3N0c2QAAAAAAAAAAQAAAJdhdmMxAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAACAAGABIAAAASAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGP//AAAAMWF2Y0MBZAAK/+EAGGdkAAqs2Ul+XDhAAAADAEAAAAyDxIllgAEABmjr48siwAAAABBwYXNwAAAABAAAAAMAAAAYc3R0cwAAAAAAAAABAAAADQAAAgAAAAAUc3RzcwAAAAAAAAABAAAAAQAAAFBjdHRzAAAAAAAAAAgAAAAFAAAEAAAAAAEAAAYAAAAAAQAAAgAAAAABAAAGAAAAAAEAAAIAAAAAAQAABgAAAAABAAACAAAAAAIAAAQAAAAAKHN0c2MAAAAAAAAAAgAAAAEAAAACAAAAAQAAAAIAAAABAAAAAQAAAEhzdHN6AAAAAAAAAAAAAAANAAADawAAAAwAAAAdAAAAOAAAADkAAABSAAAADAAAAD0AAAAMAAAAPAAAAA0AAAAzAAAAIAAAAEBzdGNvAAAAAAAAAAwAAAAwAAADvwAAA+gAAAQsAAAEcQAABM8AAATnAAAFMAAABUgAAAWKAAAFowAABeIAAALddHJhawAAAFx0a2hkAAAAAwAAAAAAAAAAAAAAAgAAAAAAAAIWAAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAJGVkdHMAAAAcZWxzdAAAAAAAAAABAAACAAAABAAAAQAAAAACVW1kaWEAAAAgbWRoZAAAAAAAAAAAAAAAAAAAu4AAAGQAVcQAAAAAAC1oZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU291bmRIYW5kbGVyAAAAAgBtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAcRzdGJsAAAAanN0c2QAAAAAAAAAAQAAAFptcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAAu4AAAAAAADZlc2RzAAAAAAOAgIAlAAIABICAgBdAFQAAAAAB9AAAAAnYBYCAgAURkFblAAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAAAZAAAEAAAAAExzdHNjAAAAAAAAAAUAAAABAAAAAQAAAAEAAAACAAAAAgAAAAEAAAAJAAAAAQAAAAEAAAAKAAAAAgAAAAEAAAAMAAAABQAAAAEAAAB4c3RzegAAAAAAAAAAAAAAGQAAABgAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAAAGAAAABgAAAAYAAABAc3RjbwAAAAAAAAAMAAADpwAAA9wAAAQgAAAEZQAABMMAAATbAAAFJAAABTwAAAWEAAAFlwAABdYAAAYCAAAAGnNncGQBAAAAcm9sbAAAAAIAAAAB//8AAAAcc2JncAAAAAByb2xsAAAAAQAAABkAAAABAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ny44My4xMDA=",e.element.setAttribute("id","test"),e.element.volume=1e-9,e.element.style.visibility="hidden",e.element.style.width="0px";var i=document.createElement("source");return i.setAttribute("type","video/mp4"),i.setAttribute("src","data:video/mp4;base64,"+e.data),e.element.appendChild(i),e}return Xa(e,a),e.prototype.append=function(t){this.container=t,this.parent=this.container.parentNode.parentNode,this.parent.appendChild(this.element)},e.prototype.remove=function(){this.parent.removeChild(this.element)},e.prototype.play=function(){return this.element.play()},e}(T),Qa=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),$a=function(a){function o(e,o,n){var i=a.call(this,e)||this;return i.removed=!1,i.analytics=o,i.view=n,i}return Qa(o,a),o.prototype.unmutePlayer=function(t){t.volume(1),t.muted(!1),this.analytics.onUnmute(),t.ads.isAdPlaying()&&t.ima3&&t.ima3.adPlayer&&(t.ima3.adPlayer.muted(!1),t.ima3.adPlayer.volume(1),t.ima3.adPlayer.play()),t.el().removeAttribute("muted"),t.paused()&&t.play()},o.prototype.removeClickToUnmute=function(t){this.removed||(this.removed=!0,ma.removeClass(t.controlBar.el_,"vms-muted-autoplay-controlbar"),this.container.bcPlayer().el_.removeChild(this.view.ctaContainer))},o.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,o.clickEvent,function(){var e=a.container.bcPlayer();a.unmutePlayer(e),a.removeClickToUnmute(e)}),e.addListener(this.container,"ready",function(){a.view.cta.style.opacity="1"});var n=function(){var e=a.container.bcPlayer();ma.addClass(e.controlBar.el_,"vms-muted-autoplay-controlbar"),a.view.setPlayerComponent(),a.view.cta.style.opacity="1",a.removed=!1},t=function(){var e=a.container.bcPlayer();!1===e.muted()?a.removeClickToUnmute(e):a.removed&&n()};e.addListener(this.container,"play",function(){t()}),e.addListener(this.container,"volumechange",function(){t()}),e.addListener(this.container,"ads-volumechange",function(){var e;(e=a.container.bcPlayer()).ads.isAdPlaying()&&e.ima3&&e.ima3.adPlayer&&(!1===e.ima3.adPlayer.muted()?a.removeClickToUnmute(e):a.removed&&n())})},o.clickEvent="muted-autoplay-click-to-unmute",o}(m),Za=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),qa=function(n){function a(e){return n.call(this,e)||this}return Za(a,n),a.prototype.setPlayerComponent=function(){var t=this;this.ctaContainer=document.createElement("div"),this.ctaContainer.className=a.CSS_CLASS,this.cta=document.createElement("div"),this.cta.className="cta",this.ctaContainer.appendChild(this.cta),this.container.bcPlayer().el_.appendChild(this.ctaContainer),ma.onClickOnly(this.ctaContainer,function(){t.getService(ga.eventManager).trigger(t.container,$a.clickEvent)})},a.CSS_CLASS="rp-muted-autoplay",a}(m),Ja=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ei=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return Ja(e,n),e.prototype.track=function(t){this.getService(ga.analytics).omniture.track([t])},e.prototype.onUnmute=function(){this.track(f.UNMUTE)},e.prototype.trackIfAutoplayed=function(a){var e=this;this.getService(ga.eventManager).addSingleEventListener(this.container,"play",function(){var t=e.getService(ga.context);t.canAutoplay()&&!t.manuallyStarted&&e.track(a)})},e.prototype.onPromisePlayAllowed=function(){this.trackIfAutoplayed(f.AUTOPLAY_ALLOWED)},e.prototype.onPromisePlayBlocked=function(){this.trackIfAutoplayed(f.AUTOPLAY_BLOCKED)},e}(m),ti=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ni=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.view=new qa(t.container),t.analytics=new ei(e),t.events=new $a(t.container,t.analytics,t.view),t.load(),t}return ti(o,a),o.prototype.onAllowed=function(){this.analytics.onPromisePlayAllowed(),this.mp4.remove(),this.getService(ga.eventManager).trigger(this.container,o.MUTED_CHECKED)},o.prototype.setMutedDisplay=function(){var t=this,e=this.container.bcPlayer();e.el().setAttribute("muted",!0),e.volume(0),e.muted(!0),this.getService(ga.eventManager).trigger(this.container,o.MUTED_CHECKED),this.view.setPlayerComponent(),setTimeout(function(){t.events.setEvents()},100)},o.prototype.onBlocked=function(){var t=this;this.analytics.onPromisePlayBlocked(),this.getService(ga.eventManager).addListener(this.container,"ready",function(){console.log("Play unmuted was blocked, muting content."),t.setMutedDisplay()}),this.mp4.remove()},o.prototype.load=function(){var t=this;if(this.getService(ga.context).autoPlay){if(this.mp4=new za,this.mp4.append(this.container.view.element),!this.getService(ga.environment).browser.isDesktop())return this.onBlocked();try{if(ca.getSearchParams().mutedAutoplay)return void this.onBlocked();this.mp4.play().then(function(){t.onAllowed()}).catch(function(){t.onBlocked()})}catch(t){this.onAllowed()}}else this.getService(ga.eventManager).trigger(this.container,o.MUTED_CHECKED)},o.pluginName="PLUGIN_MUTED_AUTOPLAY",o.MUTED_CHECKED="EVENT_MUTED_CHECKED",o}(y),ai=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ii=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.slotParams={},t.globalAdRequestParams={},t.completed=!1,t.setEvents(),t}return ai(o,a),o.prototype.isEnabled=function(){return!0},o.prototype.setEvents=function(){var t=this;this.isEnabled()&&(this.getService(ga.eventManager),this.getIASPet().then(function(){return t.run()}))},o.prototype.getIASPet=function(){var l=this;return new Promise(function(e,t){var n=150,i=setInterval(function(){var r=window.__iasPET,a=l.container.getPluginInstance(ri.pluginName),s;void 0!==r&&void 0!==r.VERSION&&void 0!==(null===(s=a.adUrl)||void 0===s?void 0:s.iu)&&(clearInterval(i),e(r)),0==--n&&t()},100)})},o.prototype.run=function(){var a=this;this.completed=!1;var e=this.container.getPluginInstance(ri.pluginName);this.getIASPet().then(function(t){var n=[{adSlotId:o.slotId,size:[1,1],adUnitPath:e.adUrl.iu,type:"video"}];t.pubId=v.anId,t.queue.push({adSlots:n,dataHandler:function(e){a.iasDataHandler(e)}})})},o.prototype.iasDataHandler=function(t){var e={};try{e=JSON.parse(t)}catch(t){return void this.container.log("PET parse failed")}for(var n in this.globalAdRequestParams={fr:e.fr},e.brandSafety)this.globalAdRequestParams[n]=e.brandSafety[n];if(e.custom)for(var n in e.custom)this.globalAdRequestParams[n]=e.custom[n];var a=e.slots[o.slotId];for(var n in this.slotParams={},a)this.slotParams[n]=Array.isArray(a)?a[n].join(","):a[n];this.completed=!0,this.container.log("[IAS PET]","IAS PET COMPLETED",this.globalAdRequestParams,this.slotParams)},o.pluginName="IAS_PET_PLUGIN",o.slotId="ad-1",o.INTEGRAL_URL="https://integralads.com",o}(y),oi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ri=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.container=t,n.getService(ga.eventManager).addCustomListener(n.container,"capi_ready",function(){setTimeout(function(){n.adUrl=new Fa(t)},300)}),n.setEvents(),n}return oi(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);if(e.addListener(this.container,"ended",function(){a.headerBidding&&a.headerBidding.initiateBids(),a.container.getPluginInstance(ii.pluginName).run()}),this.getService(ga.environment).browser.isMobile())var t=100,n=setInterval(function(){void 0!==window.ads_api&&window.ads_api.requestVideoBid&&0<t--?(clearInterval(n),a.headerBidding=new ja(a.container,window.ads_api),a.headerBidding.initiateBids(!0)):0>=t&&(clearInterval(n),a.container.getService(ga.analytics).omniture.track([],{eVar145:"0"}))},100);e.addSingleCustomListener(this.container,ni.MUTED_CHECKED,function(){e.addListener(a.container,"ready",function(){a.headerBidding||a.getService(ga.context).ssai||(a.headerBidding=new ja(a.container,window.ads_api),a.container.serviceProvider.register(ga.headerBidding,a.headerBidding),a.headerBidding.initiateBids())})}),e.addSingleCustomListener(this.container,Mo.BC_READY,function(){a.container.bcPlayer().ima3.adMacroReplacement=function(){var e=a.container.getService(ga.context);if(e.checkUserTypeParameter(),e.checkAdsDomainDisabled(),!a.container.getService(ga.context).adsDisabled){a.adUrl.custom_params.clearAdditionalValues(),a.adUrl.setVideoId(a.container.bcInfo.getVideoId()),a.adUrl.setBCPlayer(a.container.bcPlayer());try{var t=a.headerBidding&&a.headerBidding.get();t&&0<Object.keys(t).length?(console.log("VJS - bid received"),a.adUrl.custom_params.addValues(t),a.headerBidding.score++):console.log("VJS - bid empty")}catch(t){}var n=a.container.getPluginInstance(ii.pluginName);return n.completed&&(a.adUrl.url=a.adUrl.description_url=ii.INTEGRAL_URL,a.adUrl.custom_params.addValues(n.globalAdRequestParams),a.adUrl.custom_params.addValues(n.slotParams)),a.container.log("[AD URL]",a.adUrl.get()),a.getService(ga.context).adsDisabled?"":a.adUrl.get()}}}),e.addMultipleListener(this.container,["progress","ima3-started"],function(){a.headerBidding&&a.headerBidding.track()})},e.pluginName="PLUGIN_IMA3",e}(y),si=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),li=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return si(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.environment),o=this.getService(ga.context),t=this.getService(ga.eventManager);t.addListener(this.container,"ready",function(){if(!e.browser.isIOS()&&!o.ssai){var t=a.container.bcPlayer(),n=t.ima3&&t.ima3.adControlBar&&t.ima3.adControlBar.fullscreenToggle;n&&n.addClass("active")}}),t.addListener(this.container,"ima3-started",function(){if(e.browser.isIOS()&&!o.ssai){var t=a.container.bcPlayer(),n=t.ima3&&t.ima3.adControlBar&&t.ima3.adControlBar.fullscreenToggle;n&&n.removeClass("active")}}),t.addListener(this.container,["adserror","ads-allpods-completed","ads-ad-skipped","adtimeout"],function(){var e=a.container.bcPlayer();o.ssai||e.ima3.adControlBar.fullscreenToggle.addClass("active"),e.controlBar.fullscreenToggle.addClass("active")})},e.pluginName="PLUGIN_IOS_FULLSCREEN_ADS",e}(y),di=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),ci=function(a){function e(){var t=a.call(this,document.createElement("div"))||this;return t.element.className=e.CSS_NAME,t.progress=document.createElement("div"),t.progress.className="rp-progress",t.element.appendChild(t.progress),t}return di(e,a),e.CSS_NAME="rp-alternate-progress-bar",e}(T),pi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mi=function(a){function e(){var t=a.call(this,document.createElement("table"))||this;t.element.className=e.CSS_CLASS;var n=document.createElement("tr");t.element.appendChild(n),t.spinnerContainer=document.createElement("td"),n.appendChild(t.spinnerContainer),t.playingIn=document.createElement("td"),t.playingIn.className="rp-plays-in",n.appendChild(t.playingIn),t.refresh(10);var i=document.createElement("td");return i.className="rp-cancel-td",t.cancel=document.createElement("div"),t.cancel.className="rp-cancel",t.cancel.innerHTML="Cancel",i.appendChild(t.cancel),n.appendChild(i),t}return pi(e,a),e.prototype.refresh=function(t){this.playingIn.innerHTML="Playing in "+t+" seconds"},e.CSS_CLASS="rp-recommendations-up-next",e}(T),ui=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),gi=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;n.container=t,n.element.className=e.CSS_CLASS;var i=document.createElement("div");i.className="rp-end-state-bg",n.element.appendChild(i),n.metaDataContainer=document.createElement("div"),n.metaDataContainer.className="rp-metadata-container";var r=document.createElement("div");r.innerHTML="<h5 class=\"rp-watched\">You just watched</h5>",n.metaDataContainer.appendChild(r);var o=document.createElement("div");o.className="currently-watching",o.innerHTML="<h5 class=\"rp-watching\">You're watching</h5>";var s=n.container.getService(ga.environment);-1<pa.PREMIUM_VIDEO_SITES.indexOf(s.getDomain())&&(n.premium=document.createElement("div"),n.premium.innerText="PREMIUM",n.premium.className="vms-premium-tag",o.appendChild(n.premium)),n.metaDataContainer.appendChild(o),n.justWatched=r,n.videoTitle=document.createElement("div"),n.videoTitle.innerHTML="video title",n.videoTitle.className="rp-end-state-title",n.metaDataContainer.appendChild(n.videoTitle),n.watchAgainContainer=document.createElement("div"),n.watchAgainContainer.className="rp-watch-again";var c=document.createElement("button");c.className="rp-watch-again-button",c.innerHTML="Watch again",n.watchAgainContainer.appendChild(c),n.watchButton=c,n.metaDataContainer.appendChild(n.watchAgainContainer);var l=document.createElement("div");l.className="rp-continue-play";var p=document.createElement("button");return p.className="rp-continue-play-button",p.innerHTML="Continue watching",l.appendChild(p),n.continueButton=p,n.metaDataContainer.appendChild(l),n.element.appendChild(n.metaDataContainer),n.upNext=new mi,n}return ui(e,a),e.prototype.attach=function(t){this.hide(),t.appendChild(this.element)},e.prototype.refresh=function(a){var e=this.container.getService(ga.context),t=this.container.view.element.hasAttribute("vms-title")&&this.container.view.element.getAttribute("vms-title");this.videoTitle.innerHTML=e.firstPlay&&t||a.title,this.premium&&(a.accessType===l.ACCESS_TYPE_PREMIUM?this.premium.style.display="inline-block":this.premium.style.display="none")},e.prototype.show=function(){this.refresh(this.container.getService(ga.context).capiVideo),a.prototype.show.call(this),ma.addClass(this.container.view.wrapper,"vms-end-state")},e.prototype.hide=function(){a.prototype.hide.call(this),ma.removeClass(this.container.view.wrapper,"vms-end-state")},e.CSS_CLASS="rp-end-state",e}(T),_i=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ei=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.progressMouseDown=!1,t.getService(ga.environment).browser.isMobile()||t.setEvents(),t}return _i(o,a),o.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addSingleEventListener(this.container,"play",function(){setTimeout(function(){e.addListener(a.container,"pause",function(){var e=a.container.getPluginInstance(Pi.pluginName);if(e.view.refresh(a.getService(ga.context).capiVideo),!a.progressMouseDown&&!a.container.bcPlayer().ended()&&a.container.bcPlayer().paused()){ma.addClass(a.container.view.wrapper,"vjs-pause-state"),ma.addClass(e.view.element,o.CSS_CLASS),e.view.show();var t=a.container.getPluginInstance(he.pluginName);t&&(t.view.showList(),ma.addClass(t.view.recommendations.list,o.CSS_CLASS),ma.addClass(t.view.trending.list,o.CSS_CLASS))}})},500)}),e.addListener(this.container,"ready",function(){for(var e=0,t=[a.container.bcPlayer().controlBar.progressControl.el_,a.container.bcPlayer().controlBar.progressControl.seekBar.el_],n;e<t.length;e++)n=t[e],n.onmousedown=function(){a.progressMouseDown=!0},n.ontouchstart=function(){a.progressMouseDown=!0},n.onmouseup=function(){a.progressMouseDown=!1},n.ontouchend=function(){a.progressMouseDown=!1}}),e.addListener(this.container,"playing",function(){ma.removeClass(a.container.view.wrapper,"vjs-pause-state");var e=a.container.getPluginInstance(he.pluginName);e&&e.view&&(e.view.hideList(),ma.removeClass(e.view.recommendations.list,o.CSS_CLASS))})},o.pluginName="PLUGIN_PAUSE_STATE",o.CSS_CLASS="rp-pause-state",o}(y),Ai=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),yi=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.getElement().className=e.MAIN_CSS_CLASS,ma.addClass(n.element,e.CONTAINER_CSS_CLASS),n.metadataContainer=document.createElement("div"),n.metadataContainer.className="es-metadata-container",n.label=document.createElement("div"),n.label.innerHTML=e.UP_NEXT_LABEL,n.label.className="es-up-next-label",n.title=document.createElement("div"),n.title.className="es-title-container",n.metadataContainer.appendChild(n.label),n.metadataContainer.appendChild(n.title),n.getElement().appendChild(n.metadataContainer),n.playButton=document.createElement("div"),n.playButton.className="es-play-button-container",n.spinner=new Ut(t),n.playButton.appendChild(n.spinner.element),n.cancelButtonContainer=document.createElement("div"),n.cancelButtonContainer.className="es-cancel-button-container",n.cancelButton=document.createElement("button"),n.cancelButton.className="es-cancel-button",n.cancelButton.innerHTML=e.CANCEL_BUTTON_LABEL,n.cancelButtonContainer.appendChild(n.cancelButton),n.playButton.appendChild(n.cancelButtonContainer),n.replayButtonContainer=document.createElement("div"),n.replayButtonContainer.className="es-replay-button-container hidden-node",n.replayButton=document.createElement("button"),n.replayButton.className="es-replay-button",n.replayButtonContainer.appendChild(n.replayButton),n.playButton.appendChild(n.replayButtonContainer),n.getElement().appendChild(n.playButton),n}return Ai(e,a),e.MAIN_CSS_CLASS="vms-mobile-end-state",e.CONTAINER_CSS_CLASS="vms-mobile-end-state-container hidden-node",e.UP_NEXT_LABEL="Up Next",e.REPLAY_LABEL="Replay",e.CANCEL_BUTTON_LABEL="Cancel",e}(Z),vi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ci=function(a){function e(e,o){var n=a.call(this,e)||this;return n.view=o,n.setEvents(),n}return vi(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager),o=this.container.getService(ga.context),n=this.container.getService(ga.environment);e.addCustomListener(this.container,Mo.BC_READY,function(){return a.container.view.wrapper.appendChild(a.view.element)}),e.addListener(this.container,"play",function(){return ma.addClass(a.view.element,"hidden-node")}),e.addCustomListener(this.container,ye.UPDATE_UP_NEXT_MARKER,function(i){a.view.getElement().parentElement.style.backgroundImage="",a.view.title.innerHTML="";var e=a.container.getPluginInstance(ge.pluginName).events.playlistItems.find(function(t){return!t.played&&t.id===i});(e&&e.capiVideo&&e.capiVideo.poster&&(a.view.getElement().parentElement.style.backgroundImage="url('"+e.capiVideo.poster+"')"),e&&e.capiVideo&&e.capiVideo.title)&&(a.view.title.innerHTML=""+e.capiVideo.title,D.truncateDescription(a.view.title,hi.MOBILE_TITLE_LENGTH_HEIGHT),a.container.getPluginInstance(Tt.pluginName).descriptionView.withCapiVideo(e.capiVideo))}),e.addCustomListener(this.container,ge.PLAYLIST_ENDED,function(){a.cancelCountdown(),a.showReplayButton()}),e.addListener(this.container,"ended",function(){if(ma.removeClass(a.view.element,"hidden-node"),o&&!o.hasRecommendations||n.isNewsHub()){var e=o.capiVideo;e&&e.poster&&(a.view.getElement().parentElement.style.backgroundImage="url('"+e.poster+"')"),e&&e.title&&(a.view.title.innerHTML=e.title,D.truncateDescription(a.view.title,hi.MOBILE_TITLE_LENGTH_HEIGHT)),a.cancelCountdown(),a.showReplayButton()}else ma.removeClass(a.view.spinner.element,"hidden-node"),ma.removeClass(a.view.cancelButtonContainer,"hidden-node"),ma.addClass(a.view.replayButtonContainer,"hidden-node"),a.view.label.innerHTML=yi.UP_NEXT_LABEL}),ma.onClickOnly(this.view.cancelButton,function(){a.cancelCountdown(),a.view.title.innerHTML=o.capiVideo.title,D.truncateDescription(a.view.title,hi.MOBILE_TITLE_LENGTH_HEIGHT,!1),a.container.getPluginInstance(Tt.pluginName).descriptionView.withCapiVideo(o.capiVideo,!1),a.showReplayButton()}),ma.onClick(this.view.spinner.playButton,function(){ma.addClass(a.view.spinner.element,"hidden-node"),ma.addClass(a.view.cancelButtonContainer,"hidden-node"),a.cancelCountdown(),e.trigger(a.container,ge.PLAYLIST_SKIP_VIDEO_EVENT)}),ma.onClick(this.view.spinner.playButton,function(){var e=a.container.getPluginInstance(gn.pluginName);e.duration=0,e.decrease()}),ma.onClick(this.view.replayButton,function(){a.getService(ga.analytics).omniture.track([f.WATCH_AGAIN]),o.currentlyPlayingMobileItem&&o.currentlyPlayingMobileItem.id?e.trigger(a.container,ye.ITEM_PLAYED_THROUGH_REPLAY_BUTTON,o.currentlyPlayingMobileItem.id):a.container.bcPlayer().play()})},e.prototype.cancelCountdown=function(){var t=this.getService(ga.eventManager);this.getService(ga.analytics).omniture.track([f.COUNTDOWN_PAUSED_IN_PLAYLIST]),t.trigger(this.container,Ii.EVENT_CANCEL),this.container.getPluginInstance(gn.pluginName).forceStop()},e.prototype.showReplayButton=function(){ma.addClass(this.view.spinner.element,"hidden-node"),ma.addClass(this.view.cancelButtonContainer,"hidden-node"),ma.removeClass(this.view.replayButtonContainer,"hidden-node"),this.view.label.innerHTML=yi.REPLAY_LABEL},e}(m),Si=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),hi=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable(!0)&&(n.view=new yi(t),n.events=new Ci(t,n.view)),n}return Si(e,a),e.pluginName="MOBILE_END_STATE_PLUGIN",e.MOBILE_TITLE_LENGTH_HEIGHT=47,e}(re),Ti=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ii=function(a){function i(e,o,n){var i=a.call(this,e)||this;return i.view=o,i.mobileView=n,i.setEvents(),i.upNext=i.container.getPluginInstance(he.pluginName),i}return Ti(i,a),i.prototype.setEvents=function(){var c=this,e=this.getService(ga.eventManager);e.addListener(this.container,"ready",function(){c.container.getService(ga.environment).browser.isMobile()||(c.view.attach(c.container.bcPlayer().el_),c.mobileView.prepend(c.upNext.view.recommendations.element)),ma.onClickOnly(c.view.metaDataContainer,function(){ma.hasClass(c.view.getElement(),"rp-pause-state")?c.container.bcPlayer().play():(c.container.bcPlayer().controlBar.playToggle.handleClick(),c.getService(ga.analytics).omniture.track([f.WATCH_AGAIN]),c.countDown.events.pause(),ma.addClass(c.view.upNext.element,"autoplay-cancelled"),c.upNext.view.hideList()),e.trigger(c.container,i.EVENT_ENDSTATE_METADATA_CLICK)})}),e.addListener(this.container,"play",function(){c.view.hide(),c.mobileView.refresh(c.getService(ga.context).capiVideo)}),e.addCustomListener(this.container,Ce.UP_NEXT_CLICK,function(){c.countDown&&(c.countDown.view.removefromDom(),c.countDown.events.pause(),c.countDown=null),ma.addClass(c.view.upNext.element,"autoplay-cancelled")}),e.addListener(this.container,"ended",function(){var t=c.getService(ga.environment);t.browser.isMobile()||(ma.removeClass(c.view.upNext.element,"autoplay-cancelled"),c.countDown&&(c.countDown.view.removefromDom(),c.countDown=null),c.countDown=new gn(c.container,10,gn.MODE_ENHANCED),ma.onClick(c.countDown.view.element,function(){c.countDown.mode===gn.MODE_REGULAR&&e.trigger(c.container,i.EVENT_CANCEL)})),c.getService(ga.context).canAutoplay()?ma.removeClass(c.container.view.element,"vms-autoplay-disabled"):ma.addClass(c.container.view.element,"vms-autoplay-disabled"),ma.removeClass(c.view.element,Ei.CSS_CLASS),ma.removeClass(c.upNext.view.recommendations.list,Ei.CSS_CLASS),ma.removeClass(c.upNext.view.trending.list,Ei.CSS_CLASS),t.browser.isMobile()&&0===c.upNext.view.recommendations.items.length&&ma.removeClass(c.container.view.wrapper.children[0],"vjs-ended"),c.view.show(),c.upNext.view.showList(),c.upNext.view.trending.view&&(ma.addClass(c.upNext.view.trending.view.getElement(),"up-next-countdown-container"),e.addListener(c.container,"play",function(){ma.removeClass(c.upNext.view.trending.view.getElement(),"up-next-countdown-container")}));var n=c.getService(ga.context);if(t.browser.isMobile()){var r=c.container.getPluginInstance(ge.pluginName).events.playlistItems,o=c.container.serviceProvider.get(ga.eventManager);if(r&&0<r.length&&n.mobilePlaylistItems&&0<n.mobilePlaylistItems.length)for(var a=function(a){var e=r.find(function(t){return!t.played&&t.capiVideo&&t.capiVideo.id===n.mobilePlaylistItems[a]});if(e)return o.trigger(c.container,ye.UPDATE_UP_NEXT_MARKER,e.id),"break"},s=0;s<n.mobilePlaylistItems.length&&!("break"===a(s));s++);}else{if(n.sticky&&n.hasRecommendations){var l=c.upNext.view.recommendations.items[0],p=c.container.getPluginInstance(hi.pluginName).view;p.getElement().parentElement.style.backgroundImage="url('"+l.capiVideo.poster+"')",p.title.innerHTML=""+l.capiVideo.title,D.truncateDescription(p.title,hi.MOBILE_TITLE_LENGTH_HEIGHT)}c.moveCountDown()}}),e.addCustomListener(this.container,Ft.EVENT_DECREASED,function(e){c.view.upNext.refresh(e)}),e.addCustomListener(this.container,W.EVENT_ITEM_NOT_VISIBLE,function(){c.countDown&&!c.countDown.events.manuallyPaused&&c.countDown.events.pause(),e.addSingleCustomListener(c.container,W.EVENT_ITEM_VISIBLE,function(){c.countDown&&!c.countDown.events.manuallyPaused&&c.countDown.reset()})}),e.addCustomListener(this.container,i.EVENT_CANCEL,function(){c.countDown&&c.countDown.events.pause(),ma.addClass(c.view.upNext.element,"autoplay-cancelled")}),ma.onClick(this.view.upNext.cancel,function(){c.container.getService(ga.analytics).omniture.track([f.COUNTDOWN_PAUSED_IN_PLAYLIST]),c.countDown.events.manuallyPaused=!0,e.trigger(c.container,i.EVENT_CANCEL),c.upNext.view.recommendations.items[0]&&c.upNext.view.recommendations.items[0].cancel&&ma.addClass(c.upNext.view.recommendations.items[0].cancel,"hidden-node")}),ma.onClick(this.mobileView.resume,function(){c.container.player.getBCPlayer().paused()&&c.container.bcPlayer().play()}),ma.onClick(this.mobileView.play,function(){c.container.player.getBCPlayer().paused()&&c.container.bcPlayer().play()})},i.prototype.moveCountDown=function(){if(this.container.getService(ga.eventManager).trigger(this.container,qt.EVENT_COUNTDOWN_REGULAR_STYLE),this.upNext.view.recommendations.items[0]){this.countDown.element=this.view.upNext.spinnerContainer,this.upNext.view.recommendations.items[0].image.insertBefore(this.view.upNext.element,this.upNext.view.recommendations.items[0].image.firstChild);var n=this.upNext.view.recommendations.items[0],e=n.element.parentNode;n.element.parentNode.removeChild(n.element),e.insertBefore(n.element,e.firstChild)}},i.EVENT_CANCEL="EVENT_CANCEL_UPNEXT",i.EVENT_ENDSTATE_METADATA_CLICK="EVENT_ENDSTATE_METADATA_CLICK",i}(m),Ni=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),bi=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;n.element.className=e.CSS_NAME,n.container=t;var i=document.createElement("div");return i.className="rp-now-playing-label",i.innerHTML="NOW PLAYING",n.element.appendChild(i),n.resume=document.createElement("div"),n.resume.className="rp-resume",n.resume.innerHTML="Resume",n.element.appendChild(n.resume),n.play=document.createElement("div"),n.play.className="rp-now-playing-play",n.element.appendChild(n.play),n.titleContainer=document.createElement("div"),n.titleContainer.className="rp-now-playing-title-container",n.title=document.createElement("div"),n.title.className="rp-now-playing-title",n.title.innerHTML="...",n.titleContainer.appendChild(n.title),n.duration=document.createElement("div"),n.duration.className="rp-now-playing-duration",n.duration.innerHTML="2:32",n.titleContainer.appendChild(n.duration),n.element.appendChild(n.titleContainer),n}return Ni(e,a),e.prototype.prepend=function(n){if(0===n.children.length)n.appendChild(this.element);else{var e=n.children[0];n.insertBefore(this.element,e)}},e.prototype.refresh=function(t){this.title.innerHTML=D.truncate(t.title,75),this.duration.innerHTML=D.formatDuration(t.duration/1e3)},e.CSS_NAME="rp-now-playing",e}(T),wi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Pi=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=new gi(t),n.mobileView=new bi(t),n.events=new Ii(t,n.view,n.mobileView),n}return wi(e,a),e.pluginName="PLUGIN_ENDSTATE",e}(y),Li=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Oi=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return Li(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager);e.addListener(this.container,"ready",function(){var e=a.container.bcPlayer();a.view=new ci,a.recommendationsBar=new ci,a.recommendationsBar.element.className+="-mobile",a.container.getPluginInstance(Pi.pluginName).mobileView.element.appendChild(a.recommendationsBar.element),e.el().appendChild(a.view.element)}),e.addListener(this.container,"timeupdate",function(){if(a.container.view.element.parentNode){var e=a.container.bcPlayer(),t=e.currentTime(),n=e.duration();a.view.progress.style.width=100*(t/n)+"%",a.recommendationsBar.progress.style.width=100*(t/n)+"%"}})},e.pluginName="PLUGIN_PROGRESS_BAR",e}(y),fi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ri=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.setEvents(),n}return fi(e,a),e.prototype.setEvents=function(){var l=this;this.getService(ga.eventManager).addListener(this.container,"ima3-started",function(){if(!l.added){var e=l.container.bcPlayer(),t=e.ima3.adControlBar.currentTimeDisplay.el(),n=e.controlBar.CustomControlSpacer.el(),i=e.ima3.adControlBar.timeDivider.el(),r=e.ima3.adControlBar.durationDisplay.el(),o=l.getService(ga.environment).browser;if(o.isIpad()&&(e.ima3.adControlBar.el_.appendChild(t),t.style.display="block",e.ima3.adControlBar.el_.appendChild(i),i.style.display="block",e.ima3.adControlBar.el_.appendChild(r),r.style.display="block"),o.isDesktop()){var a=e.ima3.adControlBar.fullscreenToggle.el_;e.ima3.adControlBar.el_.insertBefore(t,a),t.style.display="block",e.ima3.adControlBar.el_.insertBefore(i,a),i.style.display="block",e.ima3.adControlBar.el_.insertBefore(r,a),r.style.display="block",ma.addClass(n,"vms-spacer-sticky-ad"),e.ima3.adControlBar.el_.insertBefore(n,a)}l.added=!0}})},e.pluginName="PLUGIN_DURATION_DISPLAY",e}(y),Di=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mi=function(s){function e(){var t=s.call(this,document.createElement("div"))||this;t.element.className=e.CSS_NAME;var n=document.createElement("label");n.innerHTML="SHARE",t.element.appendChild(n),t.label=n;var i=document.createElement("a");i.className="rp-share-fb",t.element.appendChild(i),t.facebook=i;var r=document.createElement("a");r.className="rp-share-twitter",t.element.appendChild(r),t.twitter=r;var o=document.createElement("a");return o.className="rp-share-mail",t.element.appendChild(o),t.mail=o,t}return Di(e,s),e.prototype.attach=function(t){t.appendChild(this.element)},e.CSS_NAME="rp-share",e}(T),ki=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Bi=function(a){function e(e){var i=a.call(this,e)||this;return i.title="",i}return ki(e,a),e.prototype.set=function(a,e){this.title=e;var t=this.getService(ga.environment);return this.url="facebook"===a?"http://www.facebook.com/sharer.php?u="+encodeURIComponent(t.pageUrl)+"&t="+this.title:"http://twitter.com/share?url="+encodeURIComponent(t.pageUrl)+"&text="+this.title,this.title=e,this},e.prototype.show=function(){var a=window.innerWidth||document.documentElement.clientWidth||screen.width,e=window.innerHeight||document.documentElement.clientHeight||screen.height,t=(a-550)/2+(void 0===window.screenLeft?screen.left:window.screenLeft),n=(e-300)/2+(void 0===window.screenTop?screen.top:window.screenTop),i=window.open(this.url,"standalone"in window.navigator&&window.navigator.standalone?"_blank":"Share","width=550px,height=300px,left="+t+"px,top="+n+"px,resizeable,scrollbars");i&&i.focus&&i.focus()},e}(m),Vi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ui=function(a){function n(e,o){var n=a.call(this,e)||this;return n.view=o,n.popup=new Bi(e),n.setEvents(),n}return Vi(n,a),n.prototype.setEvents=function(){var t=this;this.getService(ga.eventManager).addSingleEventListener(this.container,"play",function(){var e=t.container.getPluginInstance(Pi.pluginName);t.view.attach(e.view.element);var a=t.getService(ga.analytics);ma.onClick(t.view.facebook,function(){a.omniture.track([f.SOCIAL_SHARING],{eVar43:n.FACEBOOK}),t.popup.set(n.FACEBOOK,t.getService(ga.context).capiVideo.title).show()}),ma.onClick(t.view.twitter,function(){a.omniture.track([f.SOCIAL_SHARING],{eVar43:n.TWITTER}),t.popup.set(n.TWITTER,t.getService(ga.context).capiVideo.title).show()});var i=t.getService(ga.environment).pageUrl,r=t.getService(ga.context).capiVideo.title;t.view.mail.setAttribute("href","mailto:?subject=Watch: "+r+"&body=I recommend you watch "+r+", watch it here "+i),ma.onClick(t.view.mail,function(){a.omniture.track([f.SOCIAL_SHARING],{eVar43:n.MAIL})})})},n.FACEBOOK="facebook",n.TWITTER="twitter",n.MAIL="email",n}(m),Hi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),xi=function(a){function e(t){var n=this;return-1===ca.getDomain().indexOf(pa.KIDSNEWS)&&((n=a.call(this,t,e.pluginName)||this).view=new Mi,n.events=new Ui(t,n.view)),n}return Hi(e,a),e.pluginName="PLUGIN_SHARING_LINKS",e}(y),Yi=function(){function t(a,i,t){void 0===t&&(t=!0),this.src=a,this.callback=i,this.createScript(t)}return t.prototype.createScript=function(n){var e=this;this.script=document.createElement("script"),this.script.setAttribute("src",this.src),this.script.onload=function(){e.callback()},n||(this.script.onerror=function(){e.callback()})},t.prototype.load=function(){document.body.appendChild(this.script)},t}(),Gi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wi=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.setEvents(),t}return Gi(o,a),o.prototype.setEvents=function(){var t=this;this.getService(ga.eventManager).addSingleCustomListener(this.container,Mo.BC_READY,function(){-1<t.container.view.cssClasses.indexOf("vms-nudge")&&new Yi(o.JS_PATH,function(){var e={account:o.NUDGE_ACCOUNT};t.container.view.cssClasses.indexOf(o.NUDGE_CAMPAIGN_ATTR_NAME)&&(e.campaign_id=t.container.view.cssClasses[t.container.view.cssClasses.indexOf(o.NUDGE_CAMPAIGN_ATTR_NAME)]),t.container.bcPlayer().Nudge(e)}).load()})},o.JS_PATH="https://cdn.ndg.io/brightcove/brightcove.1.4.min.js",o.NUDGE_ACCOUNT="6636800368",o.NUDGE_CAMPAIGN_ATTR_NAME="data-nudge-campaign",o.pluginName="Nudge",o}(y),Fi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ki=function(n){function e(){var t=n.call(this,document.createElement("div"))||this;return t.element.className=e.CSS_CLASS,t.element.style.display="none",t.message=document.createElement("div"),t.message.className="message",t.message.innerHTML="<p><strong>Video paused due to user inactivity</strong></p><p>Continue watching?</p>",t.button=document.createElement("button"),t.button.innerText="Yes",t.element.appendChild(t.message),t.message.appendChild(t.button),t}return Fi(e,n),e.prototype.attach=function(t){t.appendChild(this.element)},e.CSS_CLASS="vms-user-inactive",e}(T),ji=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Xi=function(a){function i(e,o){var n=a.call(this,e)||this;return n.watched=0,n.plugin=o,n.setEvents(),n}return ji(i,a),i.prototype.setEvents=function(){var t=this,e=this.getService(ga.eventManager);e.addListener(this.container,"ready",function(){t.plugin.view.attach(t.container.view.wrapper),t.addUserEvents()}),e.addListener(this.container,"loadedmetadata",function(){t.watched++,t.watched===i.PLAY_LIMIT&&(setTimeout(function(){t.container.bcPlayer().pause()},500),t.plugin.view.show())}),ma.onClickOnly(this.plugin.view.button,function(){t.plugin.view.hide(),t.container.bcPlayer().play(),t.reset()}),e.addCustomListener(this.container,i.EVENT_RESET_USER_INACTIVITY,function(){t.reset()})},i.prototype.reset=function(){this.watched=1},i.prototype.addUserEvents=function(){var n=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,Ce.UP_NEXT_CLICK,function(){n.reset()}),e.addCustomListener(this.container,Pe.ON_SKIP_EVENT,function(){n.reset()}),e.addCustomListener(this.container,Ii.EVENT_ENDSTATE_METADATA_CLICK,function(){n.reset()}),e.addListener(this.container,"seek",function(){n.reset()}),ma.onFutureClick(this.container.bcPlayer().controlBar.playToggle.el(),function(){n.reset()})},i.EVENT_RESET_USER_INACTIVITY="EVENT_RESET_USER_INACTIVITY",i.PLAY_LIMIT=5,i}(m),zi=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Qi=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.view=new Ki(t),n.events=new Xi(t,n),n}return zi(e,a),e.pluginName="PLUGIN_USER_INACTIVITY",e}(y),$i=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zi=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.isApplicable()&&n.setEvents(),n}return $i(e,a),e.prototype.setEvents=function(){var n=this;this.getService(ga.eventManager).addListener(this.container,"ended",function(){var e=n.container.bcPlayer();e.isFullscreen()&&e.exitFullscreen()})},e.pluginName="PLUGIN_MOBILE_FULLSCREEN",e}(re),qi=function(){function t(){}return t.positionUnderHeader=function(a){var e=0,t=document.getElementById("header-fixed");e=t?t.offsetHeight:(t=document.getElementsByTagName("header")&&document.getElementsByTagName("header")[0])&&t.offsetHeight||0,a.style.top=e+"px"},t.mimic=function(n,e){n.style.width=e.offsetWidth+"px",n.style.height=e.offsetHeight+"px"},t}(),Ji=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),er=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.CSS_NAME,n.container=t,n.container.view.element.parentElement.appendChild(n.element),n.hide(),n}return Ji(e,a),e.CSS_NAME="vms-sticky-fake",e}(T),tr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),nr=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.container=t,n.element.className=e.CSS_NAME,n.setEvents(),n.hide(),n.container.view.wrapper.appendChild(n.element),n}return tr(e,a),e.prototype.setEvents=function(){var t=this;ma.onClick(this.element,function(){t.container.getPluginInstance(or.pluginName).close()})},e.CSS_NAME="vms-close-expanded",e}(T),ar=function(){function t(){}return t.isEnabled=function(){return void 0!==ca.getSearchParams().enableMobileSticky},t}(),ir=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),or=function(a){function o(e){var t=a.call(this,e,o.pluginName)||this;return t.closed=!1,t.isSticky=!1,t.parentVisibilityThreshold=95,t.isApplicable()&&ar.isEnabled()&&(t.setEvents(),t.fake=new er(t.container),t.closeButton=new nr(t.container)),t}return ir(o,a),o.prototype.onDisplay=function(){var t=this.getService(ga.environment);this.container.bcPlayer().hasStarted()&&t.browser.isPortrait()&&(this.isSticky=!0,qi.mimic(this.fake.element,this.container.view.element),ma.addClass(this.container.view.element,o.CSS_CLASS),qi.positionUnderHeader(this.container.view.element),this.closeButton.show(),this.fake.show())},o.prototype.setEvents=function(){var t=this,e=this.getService(ga.eventManager);e.addCustomListener(this.container,st.EVENT_SCROLL_HIDDEN,function(){t.isSticky||t.closed||t.onDisplay()}),window.addEventListener("scroll",function(){return t.checkVisibility()}),window.addEventListener("resize",function(){return t.refreshStickyCss()}),e.addCustomListener(this.container,o.PLAY_EVENT,function(){ma.addClass(t.container.view.element,o.CSS_CLASS),t.container.bcPlayer().play()})},o.prototype.hideSticky=function(){ma.removeClass(this.container.view.element,o.CSS_CLASS),this.container.view.element.style.top="auto",this.fake.hide(),this.closeButton.hide()},o.prototype.checkVisibility=function(){Y.getVisibilityRate(this.fake.element)>this.parentVisibilityThreshold&&this.isSticky&&(this.isSticky=!1,this.container.bcPlayer().hasStarted()&&this.hideSticky())},o.prototype.refreshStickyCss=function(){this.getService(ga.environment).browser.isPortrait()||this.hideSticky()},o.prototype.close=function(){this.closed=!0,this.hideSticky(),this.container.getService(ga.eventManager).trigger(this.container,o.CLOSE_EVENT)},o.pluginName="MOBILE_UI_STICKY_EXPANDED",o.PLAY_EVENT="EVENT_MOBILEUI_PLAY",o.CLOSE_EVENT="EVENT_MOBILEUI_STICKY_CLOSED",o.CSS_CLASS="vms-sticky-expanded",o}(re),rr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),sr=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS,n.container=t,n.playButton=document.createElement("div"),n.playButton.className="vms-sb-thumbnail-play",n.element.appendChild(n.playButton),n.img=document.createElement("img"),n.element.appendChild(n.img),n}return rr(e,a),e.prototype.withCapiVideo=function(t){this.img.src=t.poster},e.prototype.setEvents=function(){var n=this;ma.onClick(this.playButton,function(){var e=n.container.getService(ga.eventManager);e.addSingleEventListener(n.container,"play",function(){n.container.getPluginInstance(or.pluginName).onDisplay()}),e.trigger(n.container,or.PLAY_EVENT)})},e.MAIN_CSS="vms-sb-thumbnail-container",e}(T),lr=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),dr=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS,n.container=t,n.closeButton=document.createElement("button"),n.closeButton.className="vms-sb-actions-close",n.element.appendChild(n.closeButton),n.container.getService(ga.environment).browser.isIOS()||(n.fullscreenButton=document.createElement("button"),n.fullscreenButton.className="vms-sb-actions-fullscreen",n.element.appendChild(n.fullscreenButton)),n}return lr(e,a),e.prototype.setEvents=function(){var n=this;ma.onClick(this.closeButton,function(){n.container.getPluginInstance(so.pluginName).close()}),this.fullscreenButton&&ma.onClick(this.fullscreenButton,function(){var e=n.container.bcPlayer();n.container.getService(ga.eventManager).addSingleEventListener(n.container,"play",function(){e.requestFullscreen()}),e.el_.focus(),e.play()})},e.MAIN_CSS="vms-sb-actions-container",e}(T),eo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),to=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS,n.container=t,n.title=document.createElement("div"),n.title.className="vms-sb-title-title",n.duration=document.createElement("div"),n.duration.className="vms-sb-title-duration",n.element.appendChild(n.title),n.element.appendChild(n.duration),n}return eo(e,a),e.prototype.withCapiVideo=function(t){this.title.innerHTML=t.title,this.duration.innerHTML=D.formatDuration(t.duration/1e3)},e.MAIN_CSS="vms-sb-title-container",e}(T),no=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),io=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.element.className=e.MAIN_CSS_CLASS,n.container=t,n.thumbnailContainer=new sr(t),n.element.appendChild(n.thumbnailContainer.element),n.titleContainer=new to(t),n.element.append(n.titleContainer.element),n.actionButtonContainer=new dr(t),n.element.appendChild(n.actionButtonContainer.element),n}return no(e,a),e.MAIN_CSS_CLASS="vms-sticky-banner",e}(T),ro=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),oo=function(a){function e(e,o){var n=a.call(this,e)||this;return n.view=o,n.setEvents(),n}return ro(e,a),e.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager),t=this.getService(ga.environment);window.addEventListener("resize",function(){return a.refreshStickyCss()}),e.addCustomListener(this.container,Mo.BC_READY,function(){a.container.view.element.appendChild(a.view.element),a.view.actionButtonContainer.setEvents(),a.view.hide(),qi.positionUnderHeader(a.view.element),a.view.thumbnailContainer.setEvents()}),e.addCustomListener(this.container,M.CAPI_FETCHED,function(e){a.view.thumbnailContainer.withCapiVideo(e),a.view.titleContainer.withCapiVideo(e)}),e.addCustomListener(this.container,st.EVENT_SCROLL_HIDDEN,function(){var e=a.getService(ga.environment),t=a.container.getPluginInstance(so.pluginName);a.container.bcPlayer().hasStarted()||!e.browser.isPortrait()||t.closed||0>a.container.view.element.getBoundingClientRect().top&&!e.stickyMobileDisplayed&&(a.view.show(),e.stickyMobileDisplayed=a.container)}),e.addCustomListener(this.container,st.EVENT_SCROLL_VISIBLE,function(){a.container.bcPlayer().hasStarted()||t.stickyMobileDisplayed!==a.container||(a.view.hide(),t.stickyMobileDisplayed=null)}),e.addListener(this.container,"play",function(){a.view.hide()})},e.prototype.refreshStickyCss=function(){this.view.hide()},e}(m),ao=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),so=function(a){function e(t){var n=a.call(this,t,e.pluginName)||this;return n.closed=!1,n.isApplicable()&&ar.isEnabled()&&(n.view=new io(t),n.events=new oo(t,n.view)),n}return ao(e,a),e.prototype.close=function(){this.closed=!0,this.view.hide(),this.container.getService(ga.eventManager).trigger(this.container,e.CLOSE_EVENT)},e.pluginName="MOBILE_UI_STICKY_BANNER",e.CLOSE_EVENT="EVENT_MOBILE_UI_STICKY_BANNER_CLOSE",e}(re),co=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),lo=function(a){function s(e){var t=a.call(this,e,s.pluginName)||this,n=t.container.getService(ga.eventManager),i=s.ATTEMPTS;return n.addListener(t.container,"ready",function(){var a=setInterval(function(){i--,(localStorage.getItem(s.STORAGE_ITEM_KEY)||0==i)&&(t.pushToGoogleTag(),clearInterval(a))},100),e=s.ATTEMPTS,n=setInterval(function(){e--,(-1<document.body.innerHTML.indexOf("https://getadmiral.com")||0===e)&&(t.pauseIfPopupDisplayed(),clearInterval(n))},100)}),t}return co(s,a),s.prototype.admiralEngaged=function(){var t=!1;try{var e=(localStorage.getItem(s.STORAGE_ITEM_KEY)||"").split(","),n=parseInt(e[4]);t=n&&0<n}catch(t){}return t},s.prototype.pushToGoogleTag=function(){(googletag=googletag||{cmd:[]},this.admiralEngaged())&&(this.getService(ga.context).admiralEngaged=!0)},s.prototype.pauseIfPopupDisplayed=function(){-1<document.body.innerHTML.indexOf("href=\"https://getadmiral.com")&&(this.container.bcPlayer().pause(),this.container.getPluginInstance(gn.pluginName).events.pause())},s.pluginName="PLUGIN_ADMIRAL_ENGAGED",s.STORAGE_ITEM_KEY="v4ac1eiZr0",s.ATTEMPTS=100,s}(y),uo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),po=function(a){function e(e){var o=a.call(this,document.createElement("div"))||this;o.candidate=e,ma.addClass(o.element,"vms-lw-results-candidate"),o.image=document.createElement("img"),o.image.src=e.image.src;var n=document.createElement("div");n.className="image",n.appendChild(o.image);var i=document.createElement("div");return o.name=document.createElement("div"),o.name.className="name",i.appendChild(o.name),o.scoreContainer=document.createElement("div"),o.scoreContainer.className="score",i.appendChild(o.scoreContainer),o.element.appendChild(n),o.element.appendChild(i),o.refresh(),o}return uo(e,a),e.prototype.setName=function(n,e){this.name.innerHTML=n+" <strong>"+e+"</strong>"},e.prototype.setScore=function(t){isNaN(t)&&(t=.5),this.scoreContainer.innerHTML="<strong>"+sa(100*t)+"</strong>%",.5<t?(ma.addClass(this.scoreContainer,"vms-lw-score-over50"),ma.removeClass(this.scoreContainer,"vms-lw-score-under50")):(ma.addClass(this.scoreContainer,"vms-lw-score-under50"),ma.removeClass(this.scoreContainer,"vms-lw-score-over50"))},e.prototype.refresh=function(){this.setName(this.candidate.firstname.innerText,this.candidate.lastname.innerText),this.setScore(this.candidate.finalScore),this.image.parentElement.style.border="solid 2px "+this.candidate.color,this.image.src=this.candidate.image.src},e}(T),ho=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),mo=function(a){function e(t){var n=a.call(this,document.createElement("div"))||this;return n.finalScore=.5,n.voteAllowed=!1,n.localScore=.5,n.color=t,n.element.className=e.CSS_NAME,n.pictureContainer=document.createElement("div"),n.pictureContainer.className="vms-lw-candidate-picture-container",n.image=document.createElement("img"),n.image.className="vms-lw-candidate-image",n.pictureContainer.appendChild(n.image),n.pictureContainer.style.border="solid 2px "+n.color,n.actionContainer=document.createElement("div"),n.actionContainer.className="vms-lw-candidate-action-container",n.likeContainer=document.createElement("div"),n.dislikeContainer=document.createElement("div"),n.likeContainer.className="vms-lw-action-like-container",n.dislikeContainer.className="vms-lw-action-dislike-container",n.like=document.createElement("div"),n.like.innerHTML="<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M0 0h20v20H0z\"/><path id=\"thumb\" d=\"M.833 17.5h3.334v-10H.833v10zm18.334-9.167c0-.916-.75-1.666-1.667-1.666h-5.258l.791-3.809.025-.266c0-.342-.141-.659-.366-.884l-.884-.875-5.483 5.492A1.63 1.63 0 0 0 5.833 7.5v8.333c0 .917.75 1.667 1.667 1.667H15c.692 0 1.283-.417 1.533-1.017l2.517-5.875c.075-.191.117-.391.117-.608V8.333z\" fill=\"#606669\" fill-rule=\"nonzero\"/></g></svg>",n.like.className="vms-lw-action-like",n.dislike=document.createElement("div"),n.dislike.innerHTML=n.like.innerHTML="<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M0 0h20v20H0z\"/><path id=\"thumb\" d=\"M.833 17.5h3.334v-10H.833v10zm18.334-9.167c0-.916-.75-1.666-1.667-1.666h-5.258l.791-3.809.025-.266c0-.342-.141-.659-.366-.884l-.884-.875-5.483 5.492A1.63 1.63 0 0 0 5.833 7.5v8.333c0 .917.75 1.667 1.667 1.667H15c.692 0 1.283-.417 1.533-1.017l2.517-5.875c.075-.191.117-.391.117-.608V8.333z\" fill=\"#606669\" fill-rule=\"nonzero\"/></g></svg>",n.dislike.className="vms-lw-action-dislike",n.likeContainer.appendChild(n.like),n.dislikeContainer.appendChild(n.dislike),n.actionContainer.appendChild(n.likeContainer),n.actionContainer.appendChild(n.dislikeContainer),n.nameContainer=document.createElement("div"),n.nameContainer.className="vms-lw-candidate-name-container",n.firstname=document.createElement("div"),n.firstname.className="vms-lw-candidate-firstname",n.lastname=document.createElement("div"),n.lastname.className="vms-lw-candidate-lastname",n.nameContainer.appendChild(n.firstname),n.nameContainer.appendChild(n.lastname),n.element.appendChild(n.pictureContainer),n.element.appendChild(n.nameContainer),n.element.appendChild(n.actionContainer),n.results=new po(n),n}return ho(e,a),e.prototype.increaseScore=function(){this.localScore+=Oo.SCORE_INCREMENT,1<=this.localScore&&(this.localScore=1)},e.prototype.decreaseScore=function(){this.localScore-=Oo.SCORE_INCREMENT,0>=this.localScore&&(this.localScore=0)},e.prototype.getFullName=function(){return this.firstname.innerText+" "+this.lastname.innerText},e.prototype.enableVote=function(){this.voteAllowed=!0,this.voteAllowed=!0,ma.addClass(this.like,"active"),ma.addClass(this.dislike,"active"),ma.removeClass(this.likeContainer,"vms-lw-clicked"),ma.removeClass(this.dislikeContainer,"vms-lw-clicked"),this.likeContainer.style.background="#404446",this.dislikeContainer.style.background="#404446"},e.prototype.disableVote=function(){this.voteAllowed=!1,this.voteAllowed=!1,ma.removeClass(this.like,"active"),ma.removeClass(this.dislike,"active")},e.prototype.displayLike=function(){this.likeContainer.style.background=this.color,ma.addClass(this.likeContainer,"vms-lw-clicked"),ma.removeClass(this.dislike,"active")},e.prototype.displayDislike=function(){this.dislikeContainer.style.background=this.color,ma.addClass(this.dislikeContainer,"vms-lw-clicked"),ma.removeClass(this.like,"active")},e.prototype.refresh=function(a,e,t,n){var i=this;this.image.src=a,this.image.onerror=function(){i.image.src="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHg9IjAiIHk9IjAiIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGU+LnN0MXtmaWxsOiMxOTE5MTl9PC9zdHlsZT48cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzY5IDM3MS45VjQwMEgzMXYtMjguMUMzMSAyOTguNSA5MC41IDIzOSAxNjMuOSAyMzloNzIuMmM3My40IDAgMTMyLjkgNTkuNSAxMzIuOSAxMzIuOXoiLz48Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSIyMDAiIGN5PSIxMzgiIHI9IjgwIi8+PC9zdmc+",i.image.width=32,i.image.height=32,i.image.style.background="color"},this.firstname.innerHTML=e,this.lastname.innerHTML=t,n&&(this.color=n),this.results.refresh()},e.prototype.start=function(){ma.addClass(this.like,"active"),ma.addClass(this.dislike,"active")},e.CSS_NAME="vms-lw-candidate",e}(T),vo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),fo=function(a){function o(e){var t=a.call(this,document.createElement("div"))||this;return t.candidate1Color="#d25f5f",t.candidate2Color="#5c9ad3",t.endScreenShown=!1,t.strokeWidth=3,t.paused=!1,t.container=e,t.element.className=o.CSS_NAME,t.candidateContainer=document.createElement("div"),t.candidateContainer.className="vms-candidates-container",t.candidate1Container=document.createElement("div"),t.candidate1Container.className="lw-candidate1",t.headline=document.createElement("div"),t.headline.className="vms-lw-headline",t.headline.innerHTML="Not long to go now! Voting is almost open.",t.candidate2Container=document.createElement("div"),t.candidate2Container.className="lw-candidate2",t.firstCandidate=new mo(t.candidate1Color),t.candidate1Container.appendChild(t.firstCandidate.element),t.firstCandidate.refresh("","First","Candidate"),t.secondCandidate=new mo(t.candidate2Color),t.candidate2Container.appendChild(t.secondCandidate.element),t.secondCandidate.refresh("","Second","Candidate"),t.metadataContainer=document.createElement("div"),t.metadataContainer.className="vms-lw-metadata",t.metadataContainer.appendChild(t.headline),t.candidateContainer.append(t.candidate1Container),t.candidateContainer.append(t.candidate2Container),t.metadataContainer.appendChild(t.candidateContainer),t.element.appendChild(t.metadataContainer),t.strokeWidth=2,t.hide(),t}return vo(o,a),o.prototype.hide=function(){a.prototype.hide.call(this),ma.removeClass(this.container.view.element,"vms-live-worm-enabled")},o.prototype.start=function(){this.headline.innerHTML="Voting is officially OPEN",this.firstCandidate.start(),this.secondCandidate.start()},o.prototype.createSvg=function(){this.div.innerHTML="",this.svg=document.createElement("svg");var t=this.container.view.wrapper.offsetWidth,e=o.VIEW_HEIGHT;this.svg.setAttribute("width",""+t),this.svg.setAttribute("height",""+e),this.div.appendChild(this.svg)},o.prototype.mergeData=function(a){this.savedData||(this.savedData={});for(var e=0,t=Object.keys(a),n;e<t.length;e++)n=t[e],this.savedData[n]||(this.savedData[n]=a[n]);return this.savedData},o.prototype.paint=function(t){if(!this.paused){var e=90;this.container.getService(ga.environment).browser.isMobile()&&(e=50),t=this.mergeData(t);var n=Object.keys(t);if(0<n.length){for(var i=[],r=[],l=0,a=n,s;l<a.length;l++)s=t[a[l]]||[.5,.5],i.push(s[0]),r.push(s[1]);i.length>e&&(i=i.slice(i.length-e),r=r.slice(r.length-e)),this.redraw(i.map(function(t){return o.VIEW_HEIGHT-t*o.VIEW_HEIGHT}),r.map(function(t){return o.VIEW_HEIGHT-t*o.VIEW_HEIGHT}))}else this.redraw([],[])}},o.prototype.initView=function(){var t=document.createElement("div");t.className="vms-live-worm-svg",t.style.width="100%",t.style.height=o.VIEW_HEIGHT+"px",t.style["z-index"]=1e5,t.style.top="0",this.div=t,this.createSvg(),this.element.appendChild(this.div)},o.prototype.redraw=function(p,e){for(var t=0,n="",i=p[0],r=0,o=0,a=p;o<a.length;o++){a[o];var s=m=[t,i];(s=[t+=5,i=p[++r]])[1]&&(n+="<line x1=\""+m[0]+"\" y1=\""+m[1]+"\" x2=\""+s[0]+"\" y2=\""+s[1]+"\" style=\"stroke:"+this.candidate1Color+";stroke-width:"+this.strokeWidth+"\"></line>")}i=e[0],r=0,t=0;for(var c=0,l=e;c<l.length;c++){var m;l[c],s=m=[t,i],(s=[t+=5,i=e[++r]])[1]&&(n+="<line x1=\""+m[0]+"\" y1=\""+m[1]+"\" x2=\""+s[0]+"\" y2=\""+s[1]+"\" style=\"stroke:"+this.candidate2Color+";stroke-width:"+this.strokeWidth+"\"></line>")}n=this.addDefaultLines(n),this.createSvg(),this.svg.innerHTML=n,this.svg.innerHTML+="",this.div.innerHTML+=""},o.prototype.disableButtons=function(){this.firstCandidate.disableVote(),this.secondCandidate.disableVote()},o.prototype.enableButtons=function(){this.paused||(this.firstCandidate.enableVote(),this.secondCandidate.enableVote())},o.prototype.setPlayback=function(p,e){var t;if(this.firstCandidate.actionContainer.style.display="none",this.secondCandidate.actionContainer.style.display="none",this.headline.style.display="none",null===(t=e.extendedMetadata)||void 0===t?void 0:t.cuePoints)for(var n=0,i=e.extendedMetadata.cuePoints,r;n<i.length;n++)if(r=i[n],"liveworm"===r.name){for(var o=parseInt(r.time),a={},s=0,c=Object.keys(p),l;s<c.length;s++)l=c[s],a[o+parseInt(l)]=p[l];p=a;for(var m=0;m<o;m++)p[m]=[.5,.5]}console.log("PLAYBACK DATA",p),this.playbackData=p},o.prototype.addDefaultLines=function(t){return"<line x1=\"0\" y1=\"0\" x2=\""+this.container.view.wrapper.offsetWidth+"\" y2=\"0\" \n                style=\"stroke: #404446;\"></line>\n            <text x=\"10\" y=\"30\" class=\"svg-text\">Up Votes</text>\n            <line x1=\"0\" y1=\""+.5*o.VIEW_HEIGHT+"\" x2=\""+this.container.view.wrapper.offsetWidth+"\" y2=\""+.5*o.VIEW_HEIGHT+"\" \n                  style=\"stroke: #555;stroke-width: 2;stroke-dasharray: 5,5;\"></line>\n            <line x1=\"0\" y1=\""+o.VIEW_HEIGHT+"\" x2=\""+this.container.view.wrapper.offsetWidth+"\" y2=\""+o.VIEW_HEIGHT+"\" \n                    style=\"stroke: #404446;\"></line>\n            <text x=\"10\" y=\""+(o.VIEW_HEIGHT-20)+"\" class=\"svg-text\">Down Votes</text>"+t},o.prototype.showEndScreen=function(a){if(!this.endScreenShown){this.endScreenShown=!0;var e=Object.keys(a),t=e[e.length-1];this.firstCandidate.finalScore=a[t][0],this.secondCandidate.finalScore=a[t][1],ma.addClass(this.element,"vms-lw-ended"),this.headline.innerHTML="Voting has now finished - thank you for participating.",this.candidate1Container.style.display="none",this.candidate2Container.style.display="none",this.div.style.display="none",this.resultContainer=document.createElement("div"),ma.addClass(this.resultContainer,"vms-lw-results"),this.resultContainer.appendChild(this.firstCandidate.results.element),this.resultContainer.appendChild(this.secondCandidate.results.element),this.element.appendChild(this.resultContainer),this.firstCandidate.results.refresh(),this.secondCandidate.results.refresh()}},o.prototype.attachTo=function(t){t.appendChild(this.element)},o.VIEW_HEIGHT=100,o.CSS_NAME="vms-live-worm",o}(T),yo=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),go=function(n){function e(){return null!==n&&n.apply(this,arguments)||this}return yo(e,n),e.prototype.getS3Url=function(){return"prod"===this.container.getService(ga.environment).getEnvName()?e.PROD_S3_URL:e.NON_PROD_S3_URL},e.prototype.getLambdaUrl=function(){return"prod"===this.container.getService(ga.environment).getEnvName()?e.PROD_LAMBDA_URL:e.NON_PROD_LAMBDA_URL},e.NON_PROD_LAMBDA_URL="https://kk2v1j15q2.execute-api.ap-southeast-2.amazonaws.com/default/video-live-worm",e.NON_PROD_S3_URL="https://video-live-worm.s3.ap-southeast-2.amazonaws.com",e.PROD_S3_URL="https://video-live-worm-prod.s3.ap-southeast-2.amazonaws.com",e.PROD_LAMBDA_URL="https://7cxw7l028c.execute-api.ap-southeast-2.amazonaws.com/default/video-live-worm",e}(m),Ao=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),_o=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},Eo=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,d;return d={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},Co=function(s){function r(e,l,n,i){void 0===i&&(i="live");var r=s.call(this,e)||this;r.serviceUrl="",r.s3Url="",r.debug=!1,r.readAttempts=1,r.eventsType="live",r.capiId=l,r.userId=n;var o=new go(e);return r.serviceUrl=o.getLambdaUrl(),r.s3Url=o.getS3Url(),r.eventsType=i,r}return Ao(r,s),r.prototype.getS3Url=function(t){return this.s3Url+"/"+this.capiId+"/"+this.capiId+"-"+da(t)+".json"},r.prototype.getHash=function(){return this.userId},r.prototype.sendRequest=function(a,o,t){return void 0===a&&(a="ping"),void 0===o&&(o=null),void 0===t&&(t=null),_o(this,void 0,void 0,function(){var n;return Eo(this,function(s){switch(s.label){case 0:return n={capiId:this.capiId,event:a,updatedAt:sa(Date.now()/1e3),hash:this.getHash()},o&&(n.score1=o),t&&(n.score2=t),this.log("send request",a,o,t),[4,fetch(this.serviceUrl,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:n})})];case 1:return[2,s.sent()];}})})},r.prototype.read=function(){return _o(this,void 0,void 0,function(){var t,e,n,i;return Eo(this,function(o){switch(o.label){case 0:return"live"===this.eventsType?(t=this.readTimestamp||sa(Date.now()/1e3)-r.S3_PROCESSING_DELAY,this.log("read",t),e=this.getS3Url(t),[4,fetch(e).then(function(t){return t.ok?t.json():{}},function(){return{}})]):[2];case 1:return n=o.sent(),0===Object.keys(n).length?(this.readTimestamp=t,this.readAttempts--,i=ca.getSearchParams(),0===this.readAttempts||i.liveWormAdmin?(this.readAttempts=2,this.readTimestamp=null,this.log("read - s3 / fallback read from AWS"),[4,this.readFromAws()]):[3,3]):[3,4];case 2:return[2,o.sent()];case 3:return[2,{}];case 4:return this.readTimestamp=null,this.readAttempts=2,this.log("read - s3 response",n),[2,n];}})})},r.prototype.readFromAws=function(){return _o(this,void 0,void 0,function(){var n;return Eo(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(this.log("join"),[4,this.sendRequest("read")]):[2];case 1:if((n=e.sent()).ok)return[2,n.json()];throw"Not started";}})})},r.prototype.hasStarted=function(){return _o(this,void 0,void 0,function(){var n;return Eo(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(0,this.log("has started",0),n=this.getS3Url(0)+"?t="+Date.now()+"}",[4,fetch(n).then(function(t){return t.ok},function(){return!1})]):[2];case 1:return[2,e.sent()];}})})},r.prototype.getMetadata=function(){return _o(this,void 0,void 0,function(){var n;return Eo(this,function(e){switch(e.label){case 0:return n=this.s3Url+"/"+this.capiId+"/"+this.capiId+"-00.json?t="+Date.now(),[4,fetch(n).then(function(t){return!!t.ok&&t.json()},function(){return!1})];case 1:return[2,e.sent()];}})})},r.prototype.hasEnded=function(){return _o(this,void 0,void 0,function(){var n;return Eo(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(n=this.s3Url+"/"+this.capiId+"/"+this.capiId+"-end.json?t="+Date.now(),this.log("has ended",Date.now()/1e3),[4,fetch(n).then(function(t){return!!t.ok&&t.json()},function(){return!1})]):[2];case 1:return[2,e.sent()];}})})},r.prototype.getPlayback=function(){return _o(this,void 0,void 0,function(){var n;return Eo(this,function(e){switch(e.label){case 0:return n=this.s3Url+"/"+this.capiId+"/playback-"+this.capiId+".json?t="+Date.now(),this.log("has ended",Date.now()/1e3),[4,fetch(n).then(function(t){return!!t.ok&&t.json()},function(){return!1})];case 1:return[2,e.sent()];}})})},r.prototype.join=function(){return _o(this,void 0,void 0,function(){var n;return Eo(this,function(e){switch(e.label){case 0:return"live"===this.eventsType?(this.log("join"),[4,this.sendRequest("join")]):[2];case 1:if((n=e.sent()).ok)return[2,n.json()];throw"Not started";}})})},r.prototype.voteUpC1=function(){return _o(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.vote(.9,null)];case 1:return[2,t.sent()];}})})},r.prototype.voteDownC1=function(){return _o(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.vote(.1,null)];case 1:return[2,t.sent()];}})})},r.prototype.voteUpC2=function(){return _o(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.vote(null,.9)];case 1:return[2,t.sent()];}})})},r.prototype.voteDownC2=function(){return _o(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.vote(null,.1)];case 1:return[2,t.sent()];}})})},r.prototype.vote=function(a,e){return _o(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return"live"===this.eventsType?(this.log("vote",a,e),[4,this.sendRequest("vote",a,e)]):[2];case 1:return[2,t.sent()];}})})},r.prototype.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];this.debug&&console.log("[LiveWorm]",n)},r.S3_PROCESSING_DELAY=3,r}(m),So=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},wo=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,d;return d={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},bo=function(){function l(a,i,t){void 0===t&&(t="live"),this.currentSecond=0,this.twoSecondMarker=0,this.thirtySecondMarker=0,this.hasStarted=!1,this.hasEnded=!1,this.voteTimer=0,this.track_ended=!1,this.track_open=!1,this.track_notopen=!1,this.eventsType="live",this.container=a,this.plugin=i,this.eventsType=t,this.setEvents()}return l.prototype.checkEnded=function(e){return So(this,void 0,void 0,function(){var t;return wo(this,function(n){switch(n.label){case 0:return[4,e.hasEnded()];case 1:if(t=n.sent())if(t.reason)switch(t.reason){case"paused":this.plugin.view.headline.innerHTML="Voting has now closed! Stay tuned for the results.",this.plugin.view.paused=!0,this.plugin.view.firstCandidate.disableVote(),this.plugin.view.secondCandidate.disableVote();break;case"final":this.plugin.view.hide(),this.plugin.enabled=!1,ma.removeClass(this.container.view.element,"vms-live-worm-enabled");}else this.hasEnded=!0,this.trackOnce(l.ANALYTICS_ENDED),this.plugin.view.showEndScreen(t);return[2];}})})},l.prototype.trackOnce=function(e){var t=this.container.getService(ga.analytics);e===l.ANALYTICS_ENDED?this.track_ended||(this.track_ended=!0,t.omniture.track([],{eVar178:l.ANALYTICS_ENDED})):e===l.ANALYTICS_OPEN?this.track_open||(this.track_open=!0,t.omniture.track([],{eVar178:l.ANALYTICS_OPEN})):e===l.ANALYTICS_NOTOPEN?this.track_notopen||(this.track_notopen=!0,t.omniture.track([],{eVar178:l.ANALYTICS_NOTOPEN})):void 0},l.prototype.setEvents=function(){var e=this;if(this.currentSecond=sa(Date.now()/1e3),this.plugin.enabled){var a=this.container.getService(ga.eventManager),t=this.container.getService(ga.context),d=new Co(this.container,t.capiVideo.id,this.plugin.userId,this.eventsType),n=this.container.getService(ga.analytics);this.setTimeEvents(),a.addSingleEventListener(this.container,"play",function(){return So(e,void 0,void 0,function(){var n;return wo(this,function(e){switch(e.label){case 0:return this.plugin.enabled?(ma.addClass(this.container.view.element,"vms-live-worm-enabled"),this.plugin.view.initView(),this.plugin.view.paint({}),"live"===this.eventsType&&this.checkEnded(d),[4,d.getMetadata()]):[3,2];case 1:return n=e.sent(),this.plugin.view.firstCandidate.refresh(n.candidate1.image||"",n.candidate1.firstName,n.candidate1.lastName,n.candidate1.color),this.plugin.view.secondCandidate.refresh(n.candidate2.image||"",n.candidate2.firstName,n.candidate2.lastName,n.candidate2.color),n.candidate1.color&&(this.plugin.view.candidate1Color=n.candidate1.color,this.plugin.view.firstCandidate.pictureContainer.style.border="solid 3px "+n.candidate1.color),n.candidate2.color&&(this.plugin.view.candidate2Color=n.candidate2.color,this.plugin.view.secondCandidate.pictureContainer.style.border="solid 3px "+n.candidate2.color),[3,3];case 2:ma.removeClass(this.container.view.element,"vms-live-worm-enabled"),e.label=3;case 3:return[2];}})})}),a.addCustomListener(this.container,l.EVENT_NEXT_SECOND,function(){return So(e,void 0,void 0,function(){var e,t,n,i,o;return wo(this,function(a){switch(a.label){case 0:return"live"===this.eventsType?this.plugin.enabled?this.hasStarted?[4,d.read()]:[3,2]:[2]:[3,3];case 1:e=a.sent(),this.plugin.view.paint(e),0<this.voteTimer?(this.plugin.view.disableButtons(),this.voteTimer--):this.plugin.view.enableButtons(),a.label=2;case 2:return this.hasStarted?this.hasEnded?this.trackOnce(l.ANALYTICS_ENDED):this.trackOnce(l.ANALYTICS_OPEN):this.trackOnce(l.ANALYTICS_NOTOPEN),[3,4];case 3:for(this.plugin.view.savedData={},t={},n=90,this.container.getService(ga.environment).browser.isMobile()&&(n=50),i=0;i<n;i++)0<(o=sa(this.container.bcPlayer().currentTime())+i-n)&&(t[o]=this.plugin.view.playbackData[o]);this.plugin.view.paint(t),a.label=4;case 4:return[2];}})})}),a.addCustomListener(this.container,l.EVENT_NEXT_2,function(){return So(e,void 0,void 0,function(){var e;return wo(this,function(t){switch(t.label){case 0:return this.plugin.enabled&&"live"===this.eventsType?this.hasStarted?[3,2]:(e=this,[4,d.hasStarted()]):[2];case 1:e.hasStarted=t.sent(),this.hasStarted&&a.trigger(this.container,l.EVENT_STARTED),t.label=2;case 2:return this.checkEnded(d),[2];}})})}),a.addCustomListener(this.container,l.EVENT_NEXT_30,function(){e.plugin.enabled&&"live"===e.eventsType&&e.hasStarted&&d.join()}),a.addCustomListener(this.container,l.EVENT_STARTED,function(){"live"===e.eventsType&&(d.join(),e.plugin.view.start(),ma.onClick(e.plugin.view.firstCandidate.like,function(){0===e.voteTimer&&e.plugin.view.firstCandidate.voteAllowed&&(e.plugin.view.firstCandidate.displayLike(),e.plugin.view.firstCandidate.increaseScore(),n.omniture.track([f.LIVEWORM_THUMBSUP],{eVar177:""+e.plugin.view.firstCandidate.getFullName()}),d.voteUpC1(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}),ma.onClick(e.plugin.view.firstCandidate.dislike,function(){0===e.voteTimer&&e.plugin.view.firstCandidate.voteAllowed&&(e.plugin.view.firstCandidate.displayDislike(),e.plugin.view.firstCandidate.decreaseScore(),n.omniture.track([f.LIVEWORM_THUMBSDOWN],{eVar177:""+e.plugin.view.firstCandidate.getFullName()}),d.voteDownC1(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}),ma.onClick(e.plugin.view.secondCandidate.like,function(){0===e.voteTimer&&e.plugin.view.secondCandidate.voteAllowed&&(e.plugin.view.secondCandidate.displayLike(),e.plugin.view.secondCandidate.increaseScore(),n.omniture.track([f.LIVEWORM_THUMBSUP],{eVar177:""+e.plugin.view.secondCandidate.getFullName()}),d.voteUpC2(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}),ma.onClick(e.plugin.view.secondCandidate.dislike,function(){0===e.voteTimer&&e.plugin.view.secondCandidate.voteAllowed&&(e.plugin.view.secondCandidate.displayDislike(),e.plugin.view.secondCandidate.decreaseScore(),n.omniture.track([f.LIVEWORM_THUMBSDOWN],{eVar177:""+e.plugin.view.secondCandidate.getFullName()}),d.voteDownC2(),e.voteTimer=l.VOTE_TIMER_LIMITATION)}))})}},l.prototype.setTimeEvents=function(){var e=this,t=this.container.getService(ga.eventManager);t.addListener(this.container,"timeupdate",function(){if(e.plugin.enabled&&!e.hasEnded){var n=sa(Date.now()/1e3);n>e.currentSecond&&(e.currentSecond=n,t.trigger(e.container,l.EVENT_NEXT_SECOND))}}),t.addCustomListener(this.container,l.EVENT_NEXT_SECOND,function(){e.plugin.enabled&&(0===e.thirtySecondMarker&&(t.trigger(e.container,l.EVENT_NEXT_30),e.thirtySecondMarker=31),e.thirtySecondMarker--,0===e.twoSecondMarker&&(t.trigger(e.container,l.EVENT_NEXT_2),e.twoSecondMarker=3),e.twoSecondMarker--)})},l.ANALYTICS_ENDED="Ended",l.ANALYTICS_OPEN="Open",l.ANALYTICS_NOTOPEN="Not Open",l.EVENT_NEXT_SECOND="LW_ON_NEXT_SECOND",l.EVENT_NEXT_2="LW_ON_NEXT_2",l.EVENT_NEXT_30="LW_ON_NEXT_30",l.EVENT_STARTED="LW_EVENT_STARTED",l.VOTE_TIMER_LIMITATION=5,l}(),To=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Io=function(l,e,o,t){return new(o||(o=Promise))(function(n,i){function r(n){try{s(t.next(n))}catch(t){i(t)}}function a(n){try{s(t.throw(n))}catch(t){i(t)}}function s(i){var s;i.done?n(i.value):(s=i.value,s instanceof o?s:new o(function(t){t(s)})).then(r,a)}s((t=t.apply(l,e||[])).next())})},No=function(l,e){function t(t){return function(o){return function(t){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(i=2&t[0]?n.return:t[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,t[1])).done)return i;switch(n=0,i&&(t=[2&t[0],i.value]),t[0]){case 0:case 1:i=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,n=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=0<i.length&&i[i.length-1])||6!==t[0]&&2!==t[0])){s=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){s.label=t[1];break}if(6===t[0]&&s.label<i[1]){s.label=i[1],i=t;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(t);break}i[2]&&s.ops.pop(),s.trys.pop();continue;}t=e.call(l,s)}catch(a){t=[6,a],n=0}finally{a=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}var s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a,n,i,d;return d={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},Oo=function(a){function e(e){var o=a.call(this,e)||this;o.enabled=!1,o.current=0,o.score1=.5,o.score2=.5;var n=o.getService(ga.eventManager),s=o.getService(ga.context);return n.addCustomListener(e,Mo.BC_READY,function(){return Io(o,void 0,void 0,function(){var r,e,t,n,i;return No(this,function(o){switch(o.label){case 0:return r=!1,e=s.auth,t=this.getService(ga.utag),n=t.get("pc_pcsid"),e.getAuthProvider()===Ke.PROVIDER_IDP&&Ke.getStatusFromCookie()===Ke.USER_SUBSCRIBER&&(r=!0),0<s.bcVideo.duration?"Yes"===s.bcVideo.custom_fields.live_worm?[4,new Co(this.container,s.capiVideo.id,"playback").getPlayback()]:[3,2]:[3,4];case 1:return(i=o.sent())&&(this.enabled=!0,this.events=new bo(this.container,this,"playback"),this.view.setPlayback(i,s.capiVideo)),[3,3];case 2:this.enabled=!1,this.view.hide(),o.label=3;case 3:return[3,5];case 4:"Yes"===s.bcVideo.custom_fields.live_worm&&(r?(this.userId=window.btoa(n+"-"+s.capiVideo.id),this.enabled=!0,this.events=new bo(this.container,this)):(this.enabled=!1,this.view.hide())),o.label=5;case 5:return[2];}})})}),o.view=new fo(e),n.addListener(e,"play",function(){o.enabled&&(o.view.show(),o.container.view.wrapper.appendChild(o.view.element))}),o}return To(e,a),e.pluginName="PLUGIN_LIVE_WORM",e.SCORE_INCREMENT=.1,e.STORAGE_USER_ID="vms-livew-userid",e.STORAGE_SCORE1="vms-lw-user-score1",e.STORAGE_SCORE2="vms-lw-user-score2",e}(y),Po=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Lo=function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.plugins={},e}return Po(e,n),e.prototype.get=function(t){return this.plugins[t]},e.prototype.save=function(n,e){if(this.plugins[n])throw new Error("Cannot register 2 plugins of the same name ("+n+")");this.plugins[n]=e,this.container.log("[PLUGINS]",n+" registered")},e.prototype.load=function(){var t=this.getService(ga.environment);-1<pa.PREMIUM_VIDEO_SITES.indexOf(t.getDomain())&&!ca.isAmp()&&this.save(Jn.pluginName,new Jn(this.container)),this.save(Rt.pluginName,new Rt(this.container)),this.save(Ca.pluginName,new Ca(this.container)),this.save(Ge.pluginName,new Ge(this.container)),this.save(Hn.pluginName,new Hn(this.container)),this.save(Me.pluginName,new Me(this.container)),this.save(Ua.pluginName,new Ua(this.container)),this.save(Je.pluginName,new Je(this.container)),this.save(xa.pluginName,new xa(this.container)),this.save(ri.pluginName,new ri(this.container)),this.save(ii.pluginName,new ii(this.container)),this.save(he.pluginName,new he(this.container)),this.save(ni.pluginName,new ni(this.container)),this.save(mn.pluginName,new mn(this.container)),this.save(gn.pluginName,new gn(this.container)),this.save(nt.pluginName,new nt(this.container)),this.save(li.pluginName,new li(this.container)),this.save(Pe.pluginName,new Pe(this.container)),this.save(Oi.pluginName,new Oi(this.container)),this.save(Ri.pluginName,new Ri(this.container)),this.save(Pi.pluginName,new Pi(this.container)),this.save(xi.pluginName,new xi(this.container)),this.save(Ei.pluginName,new Ei(this.container)),this.save(Ln.pluginName,new Ln(this.container)),this.save(Wi.pluginName,new Wi(this.container)),this.save(lo.pluginName,new lo(this.container)),this.getService(ga.context).sticky&&this.save(ct.pluginName,new ct(this.container)),this.save(Qi.pluginName,new Qi(this.container)),this.save(Gt.pluginName,new Gt(this.container)),this.save(Tt.pluginName,new Tt(this.container)),this.save(Zi.pluginName,new Zi(this.container)),this.save(le.pluginName,new le(this.container)),this.save(ge.pluginName,new ge(this.container)),this.save(so.pluginName,new so(this.container)),this.save(or.pluginName,new or(this.container)),this.save(hi.pluginName,new hi(this.container)),this.save(Bt.pluginName,new Bt(this.container)),this.save(Oo.pluginName,new Oo(this.container))},e}(m),Do=function(){var a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t])})(e,t)};return function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}(),Mo=function(a){function s(e,s){var n=a.call(this,s)||this;n.ready=!1,n.videoFetched=!1,n.videoError=!1,n.config=n.getService(ga.config),n.bcInfo=new Wn(e,n.config),n.view=new Gn(e,n);var i=new Ea(n);if(s.register(ga.context,i),n.plugins=new Lo(n),n.loadAnalytics(),n.plugins.load(),n.getCapiVideo(),e.getAttribute("vms-queue-id")){var r=window._vms||[];r&&r.items&&(i.vmsItem=r.items.get(e.getAttribute("vms-queue-id")))}return n.player=new yn(n.bcInfo.accountId,n.bcInfo.getVideoId(),n),n.related=new ce(n),n.setEvents(),n}return Do(s,a),s.prototype.loadAnalytics=function(){this.getProvider().register(ga.analytics,new Dn(this)),this.getProvider().register(ga.nielsen,new Hn(this))},s.prototype.getCapiVideo=function(){var t=this,e=this.getService(ga.capi),a=this.getService(ga.eventManager);e.fetchVideoDetails(this).then(function(e){t.getService(ga.context).withCapiData(e);var n=t.getService(ga.capiDecorate);n.set(e,t),n.decorateContainer(),t.videoFetched=!0,a.trigger(t,s.CAPI_MAIN_FETCHED)}).catch(function(e){t.videoFetched=!0,t.videoError=e,a.trigger(t,s.CAPI_MAIN_FETCHED)})},s.prototype.getPluginInstance=function(t){return this.plugins.get(t)},s.prototype.bcPlayer=function(){return this.player&&this.player.getBCPlayer()},s.prototype.setEvents=function(){var a=this,e=this.getService(ga.eventManager),o=this.getService(ga.context),t=this.getService(ga.pageManager);e.addMultipleListener(this,["play","ads-ad-started","ads-play"],function(){t.currentlyPlaying=t.currentlyPlaying||a,o.playing=!0,a.view.element.className=a.view.element.className.replace(" vms-paused",""),ma.addClass(a.view.element," vms-playing"),a.getService(ga.analytics).omniture.fireDelayed()}),e.addMultipleListener(this,["pause","ads-pause"],function(){t.currentlyPlaying=null,o.playing=!1,a.view.element.className=a.view.element.className.replace(" vms-playing",""),ma.addClass(a.view.element," vms-paused")}),new Cn(this).setEvents();var n=this.view.element.getAttribute(Ua.VMS_ATTR_TYPE);o.recommendationsType=n&&("similars"===n||"recommendations"===n)?n:"similars",e.addListener(this,"ready",function(){"similars"===o.recommendationsType?a.fetchRelated(o.capiVideo):(a.fetchRelated(o.capiVideo),e.addSingleCustomListener(a,M.CAPI_RELATED_FETCHED,function(){e.addListener(a,"play",function(){var e=o.capiVideo;a.fetchRelated(e)})}))})},s.prototype.processCapiData=function(t){var a=this;if(this.videoError)this.onPlayerError(this.videoError,t);else{var e=this.getService(ga.context);this.getService(ga.eventManager).trigger(this,"capi_ready"),this.player.render(t);var n=this.getService(ga.context).vmsItem;if(n&&n.callback){var i=this.bcPlayer();i.one("loadstart",function(){n.callback(i)})}e.auth=new Ke(this),this.getService(ga.eventManager).addSingleCustomListener(this,s.BC_READY,function(){a.ready=!0;for(var n=0,e=a.view.getDefaultClasses(),t;n<e.length;n++)t=e[n],ma.addClass(a.view.element,t);var i=a.getService(ga.environment);ma.addClass(a.view.element,"vms-"+i.getNewscorpauBrand())})}},s.prototype.render=function(t){var e=this;(this.view.wrapper.appendChild(this.player.getElement()),this.videoFetched)?this.processCapiData(t=t||window.bc):this.getService(ga.eventManager).addCustomListener(this,s.CAPI_MAIN_FETCHED,function(){e.processCapiData(t=t||window.bc)})},s.prototype.fetchRelated=function(t){0>=this.getPluginInstance(he.pluginName).view.recommendations.items.length&&this.related.getMoreRelated&&this.related.fetchRelated(t)},s.prototype.onPlayerError=function(a,e){this.getService(ga.context).errored=!0,this.player.brightcovePlayer=e(this.player.element),this.ready=!0,this.getService(ga.eventManager).setPlayerEvents(this),this.player.brightcovePlayer.error({code:"VMS_ERROR",message:a.message,headline:a.headline,dismiss:!1});for(var t=0,n=this.view.getDefaultClasses(),i;t<n.length;t++)i=n[t],ma.addClass(this.view.element,i)},s.prototype.log=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];new ya(this).log(n)},s.BC_READY="EVENT_ON_BC_READY",s.CAPI_MAIN_FETCHED="EVENT_ON_CAPI_MAIN_FETCHED",s.PLAYER_PLAYBACK_ERROR="PLAYER_PLAYBACK_ERROR",s.PLAYER_ADS_PLAYBACK_ERROR="PLAYER_ADS_PLAYBACK_ERROR",s.CAPI_VIDEO_FETCH_ERROR="CAPI_VIDEO_FETCH_ERROR",s}(d),Ro=function(){function t(n,a){this.accountId=n,this.playerId=a}return t.prototype.getAccountId=function(){return this.accountId},t.prototype.getPlayerId=function(){return this.playerId},t.prototype.getLink=function(){var t=ca.getSearchParams();return"https://players.brightcove.net/"+this.accountId+"/"+this.playerId+"_default/index"+(t.unminBc?"":".min")+".js"},t}(),ko={dev:{accountId:"5295890391001",playerId:"vqQWIq9vW"},sit:{accountId:"5348771526001",playerId:"72YtGscgQ"},pat:{accountId:"5400155226001",playerId:"ablGAZd1XC"},uat:{accountId:"5348771528001",playerId:"bsd62t2yu"},beta:{accountId:"5348771529001",playerId:"bAAHiDoW20"},prod:{accountId:"5348771529001",playerId:"938M1Zecs"}},Bo=function(){function t(t){this.environment=t}return t.prototype.get=function(){var t=this.environment;return this.config=new Ro(ko[t.name].accountId,ko[t.name].playerId),this.config},t}(),Vo={dev:{key:"shqpuac6pkvfcu25q49sr26u",contentUrl:"https://content-dev.api.news/v3/videos/",baseUrl:"https://content-dev.api.news/v3"},sit:{key:"shqpuac6pkvfcu25q49sr26u",recommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",skyRecommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",contentUrl:"https://content-sit.api.news/v3/videos/",baseUrl:"https://content-sit.api.news/v3"},pat:{key:"qatj4chkregt9nphqv73j7wf",recommendationsKey:"qatj4chkregt9nphqv73j7wf",skyRecommendationsKey:"qatj4chkregt9nphqv73j7wf",contentUrl:"https://content-pat.api.news/v3/videos/",baseUrl:"https://content-pat.api.news/v3"},uat:{key:"shqpuac6pkvfcu25q49sr26u",recommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",skyRecommendationsKey:"wgvss55uuq67x3xg5vxpdu7r",contentUrl:"https://content-uat.api.news/v3/videos/",baseUrl:"https://content-uat.api.news/v3"},prod:{key:"6krsj3w249nk779d8fukqx9f",recommendationsKey:"9uz93nsd4pggfwhqcjnhmafw",skyRecommendationsKey:"vyqyg5aq85wc3k9v3pruxf5k",contentUrl:"https://content.api.news/v3/videos/",baseUrl:"https://content.api.news/v3"}},Uo=function(){function t(t){this.environment=t}return t.prototype.get=function(){var a=this.environment,e="beta"===a.name?"prod":a.name,t=Vo[e].recommendationsKey;return-1<pa.SKY_SITES.indexOf(a.getDomain())&&(t=Vo[e].skyRecommendationsKey),this.config=new wa(Vo[e].key,Vo[e].contentUrl,Vo[e].baseUrl,t),this.config},t}(),Ho=function(){},xo=function(){},jo=function(){},Yo=function(){this.visitor=new Ho,this.appMeasurement=new xo,this.heartbeat=new jo},Go=function(){function r(){}return r.get=function(e){var t=ca.getDomain(),n=ca.getSearchParams(),i="newscorpau-";if(n.amp&&"1"===n.amp)return i=e.isProd()?r.REPORTINGSUITES.AMP:r.REPORTINGSUITES.AMP_DEV;for(var o=0,a=r.NLM_SITES,s;o<a.length;o++)if(s=a[o],-1<t.indexOf(s)){i+="nlm";break}return i+="global",e.isProd()||(i+="-dev"),i},r.NLM_SITES=[pa.BEST_RECIPES,pa.BODY_SOUL,pa.DELICIOUS,pa.GQ,pa.KIDSPOT,pa.VOGUE,pa.TASTE,pa.WHIMN],r.REPORTINGSUITES={NEWS:"newscorpau-global",NEWS_DEV:"newscorpau-global-dev",NLM:"newscorpau-nlmglobal",NLM_DEV:"newscorpau-nlmglobal-dev",AMP:"newscorpau-googleamp",AMP_DEV:"newscorpau-googleamp-dev"},r}(),Wo={MARKETING_CLOUD_ORG_ID:"5FE61C8B533204850A490D4D@AdobeOrg",TRACKING_SERVER:"nsmetrics.news.com.au"},Fo={RSID:"newscorpau-global-dev",TRACKING_SERVER:"nsmetrics.news.com.au",VISITOR_ID:""},Ko={TRACKING_SERVER:"newscorpau.hb.omtrdc.net",PUBLISHER:"5FE61C8B533204850A490D4D@AdobeOrg"},$o=function(){function t(t){this.environment=t}return t.prototype.get=function(){var t=new Yo;return t.visitor.orgId=Wo.MARKETING_CLOUD_ORG_ID,t.visitor.trackingServer=Wo.TRACKING_SERVER,t.appMeasurement.visitorId=this.environment.visitorId(),t.appMeasurement.rsid=Go.get(this.environment),t.appMeasurement.trackingServer=Fo.TRACKING_SERVER,t.heartbeat.trackingServer=Ko.TRACKING_SERVER,t.heartbeat.publisher=Ko.PUBLISHER,t},t}(),Xo=function(){function t(t){this.environment=t,this.capi=new Uo(t).get(),this.player=new Bo(t).get()}return t.prototype.withHeartbeat=function(){this.heartbeat=new $o(this.environment).get()},t}(),zo=function(){function a(n){this.currentRequestDelay=-1,this.augmenters=new Map,this.currentPage=0,this.config=n;var a=ca.getSearchParams();this.currentPage=a.capiPage||0}return a.prototype.registerAugmenter=function(a,e){void 0===e&&(e="default");var t=this.augmenters.get(e)||[];t.push(a),this.augmenters.set(e,t)},a.prototype.fetchVideoDetails=function(e,t,n,i){var r=this;return void 0===t&&(t=0),void 0===n&&(n=null),void 0===i&&(i=null),new Promise(function(o,p){var s=i||p,c=n||o,l="brightcove";e.bcInfo.reference&&(l="video_integrator");var m=r.config.getBaseUrl()+"/videos/"+l+"/"+e.bcInfo.id;r.sendRequest(m,function(n){return n.content?c(r.parseVideoItem(n.content,e)):0!==Object.keys(n).length||t>=a.FETCH_ATTEMPTS?s({headline:"Video not found",message:"This video was not found"}):void r.ready().then(function(){return r.fetchVideoDetails(e,++t,c,s)})})})},a.prototype.ready=function(){var e=this;return new Promise(function(t){return 0<e.currentRequestDelay?void setTimeout(function(){e.currentRequestDelay-=1,e.ready().then(function(){t()})},1):(e.currentRequestDelay=a.REQUEST_DELAY,t())})},a.prototype.getVideosWhenReady=function(a,e,t,n){var i=this;this.ready().then(function(){i.getVideosById([e.id],a,wa.RECOMMENDATION_KEY).then(function(n){t(n)}).catch(n)})},a.prototype.getVideosById=function(d,e,t){var p=this;return new Promise(function(i){for(var r=0,o=[],n=p.config.getBaseUrl()+"/videos",a=function(a){p.ready().then(function(){p.sendRequest(n+"/"+a,function(t){r++,t.content&&o.push(p.parseVideoItem(t.content,e)),r===d.length&&i(o)},null,t)})},s=0,l=d;s<l.length;s++)a(l[s])})},a.prototype.augment=function(l,e){var t=this;return void 0===e&&(e="default"),new Promise(function(n){var i=[],r=t.augmenters.get(e)||[],o=r.length;0===o&&n(l);var a=function(t){o--,i=i.concat(t),0===o&&n(i)};r.forEach(function(e){try{e.augment(l).then(function(t){a(t)}).catch(function(){a(l)})}catch(e){a(l)}})})},a.prototype.fetchRelatedVideos=function(d,e,p){var n=this;return new Promise(function(i,r){var t=n.config.getBaseUrl()+"/search/";!function(t,a){var o=/\.com\.au$/.test(e)?e:e+".com.au",s=n.getQuery(d,o,p),l=(t+=-1<t.indexOf("?")?"&":"?")+(a?"query="+s:"");n.sendRequest(l,function(o){if(o.results){for(var e=[],t=0,a=o.results,s;t<a.length;t++)s=a[t],e.push(n.parseVideoItem(s,p));return i(e)}return r([])},null,wa.RECOMMENDATION_KEY)}(t+="?sortBy=dateLive&size="+ce.PAGE_SIZE+"&page="+ ++n.currentPage,!0)})},a.prototype.fetchTrendingVideos=function(r,d){var t=this;return new Promise(function(n,i){if(d.getService(ga.environment).isProd())return n([]);if(!ca.getSearchParams().forceTrending)return n([]);var e=t.config.getBaseUrl()+"/search",a=ua.getDomain(d.getService(ga.environment)),o=/\.com\.au$/.test(a)?a:a+".com.au",s=t.getQuery(r,o,d),l=e+(-1<e.indexOf("?")?"&":"?");t.sendRequest(l+"query="+s+"&page=5",function(o){if(o.results){for(var e=[],r=0,a=o.results,s;r<a.length;r++)s=a[r],e.push(t.parseVideoItem(s,d));return n(e)}return i([])},null,wa.RECOMMENDATION_KEY)})},a.prototype.getQuery=function(e,t,n){var i="type: video ";e&&(i+=" AND target.sections.id: "+e+" "),t&&(i+=" AND target.domains: "+t+" ",-1<t.indexOf("skynews")&&(i+=" AND seoOwner.domain: "+t)),i+=a.RIGHTSTER_FD_QUERY_EXCLUSION,i+=" AND platform.id:"+n.bcInfo.accountId+"-* ";var r=n.getService(ga.environment).getDomain();return-1===pa.PREMIUM_VIDEO_SITES.indexOf(r)&&(i+=" AND accessType:free"),i},a.prototype.getImages=function(l){var e=l.related,t=l.references,n={};for(var i in t){var r=t[i];if("image"===r.type){var o=r.link.media;for(var a in e)e[a].default[0]===r.id&&(n[a]=o)}}return n},a.prototype.getSectionData=function(a){var s=/^\/section\/main\/(.*)/g,e=(a.target&&a.target.sections||[]).filter(function(t){return s.test(t.path)}),o,r,l;return 0<e.length&&(o=e[0].id,r=e[0].path.split("/").pop(),l=e[0].path),{id:o,name:r,path:l}},a.prototype.getCategories=function(a){for(var e=[],t=0,n=a.target&&a.target.sections||[],i;t<n.length;t++)i=n[t].path.match(/^\/(section)\/.*\/(.*)/),i&&e.push(i.pop());return Array.from(new Set(e))},a.prototype.getKeywords=function(a){for(var e=[],t=0,n=a.categories&&a.categories.keyword||[],i;t<n.length;t++)i=n[t].path.match(/^\/(keyword)\/(.*)/),i&&e.push(i.pop());return Array.from(new Set(e))},a.prototype.parseVideoItem=function(a,e){var t=this.getImages(a),n=new l;n.id=a.id,n.platformId=a.platform.id,n.poster=t.primary,a.extendedMetadata&&a.extendedMetadata.cuepoints&&n.setCuePoints(a.extendedMetadata.cuepoints),n.thumbnail=-1<e.view.cssClasses.indexOf("useHQThumb")?n.poster:t.thumbnail,n.source=a.rightsMetadata&&a.rightsMetadata.originatedSource;var i=this.getSectionData(a);return n.sectionId=i.id,n.sectionName=i.name,n.sectionPath=i.path,n.categories=this.getCategories(a),n.title=a.headline&&a.headline.default||"",n.duration=a.duration,n.caption=a.caption||"",n.keywords=this.getKeywords(a),n.date=a.date,n.body=a.body,n.extendedMetadata=a.extendedMetadata?a.extendedMetadata:{},n.accessType=a.accessType||l.ACCESS_TYPE_FREE,void 0!==ca.getSearchParams().debug&&(n.accessType=localStorage.getItem("accessType")||l.ACCESS_TYPE_FREE),n},a.prototype.sendRequest=function(a,r,e,t){void 0===e&&(e=null);var n=null;"enabled"===ca.getSearchParams().capiHeader?n={headers:{"X-Newsapi-Api-Key":this.config.getContentKey(t)}}:-1<a.indexOf("?")?a+="&api_key="+this.config.getContentKey(t):a+="?api_key="+this.config.getContentKey(t),fetch(a,n).then(function(t){t.json().then(function(t){r(t)})}).catch(function(){return r({})})},a.RIGHTSTER_FD_QUERY_EXCLUSION=" AND -rightsMetadata.originatedSource:(Rightster_hollyscoop  OR Rightster_the_savory OR Rightster_celebrity_wire) AND -rightsMetadata.usage:fair_dealing",a.FETCH_ATTEMPTS=5,a.REQUEST_DELAY=300,a}(),Qo=function(a,e,t,n){this.debug=!1,this.id=""+new Date().getTime(),this.container=a,this.eventType=e,this.hook=t;var i=ca.getSearchParams();this.debug=i.debug,this.debug?(ma.addClass(this.container.view.element,"debug"),this.callback=function(i){return a.log("[EVENT]",e,t,n),n(i)}):this.callback=n},Zo=function(){function t(){this.events=new Map,this.customEvents=new Map}return t.prototype.addMultipleListener=function(a,e,t){for(var n=0,i=e,r;n<i.length;n++)r=i[n],this.addListener(a,r,t)},t.prototype.addListener=function(a,e,t){return this.setListener(a,"on",e,t)},t.prototype.addSingleEventListener=function(a,e,t){return this.setListener(a,"one",e,t)},t.prototype.setListener=function(a,e,t,n){var i=new Qo(a,e,t,n),o;return"custom"===e?((o=this.customEvents.get(a)||[]).push(i),this.customEvents.set(a,o)):((o=this.events.get(a)||[]).push(i),this.events.set(a,o),this.setPlayerEvents(a)),i},t.prototype.addCustomListener=function(a,e,t){var n=new Qo(a,"custom",e,t),i=this.customEvents.get(a)||[];return i.push(n),this.customEvents.set(a,i),n},t.prototype.addSingleCustomListener=function(a,e,t){var n=new Qo(a,"custom-single",e,t),i=this.customEvents.get(a)||[];return i.push(n),this.customEvents.set(a,i),n},t.prototype.trigger=function(s,e,t){for(var n=this.customEvents.get(s)||[],i=0,r=n,o;i<r.length;i++)o=r[i],e===o.hook&&("custom-single"===o.eventType?(n.splice(n.indexOf(o),1),this.customEvents.set(s,n),o.callback(t)):o.callback(t))},t.prototype.setPlayerEvents=function(a){if(a.ready&&a.bcPlayer())for(var e=a.bcPlayer(),t=this.events.get(a)||[],n;0<t.length;)n=t.pop(),"ready"===n.hook?e.ready(n.callback):("on"===n.eventType&&e.on(n.hook,n.callback),"one"===n.eventType&&e.one(n.hook,n.callback)),this.events.set(a,t)},t}(),qo=function(){function t(){}return t.register=function(n,e){e.register(ga.config,n),e.register(ga.environment,n.environment),e.register(ga.capi,new zo(n.capi)),e.register(ga.capiDecorate,new M),e.register(ga.eventManager,new Zo)},t}(),Jo=function(){function n(t){this.collection=[],this.rendered=[],this.config=new Xo(t),this.environment=t}return n.getInstance=function(e){return n.instance||(n.instance=new n(e)),n.instance},n.prototype.getProvider=function(){var t=new s;return qo.register(this.config,t),t.register(ga.pageManager,this),t},n.prototype.decorateVms=function(){for(var a=document.getElementsByClassName("vms"),e=0,t;e<a.length;e++)t=a[e],-1===t.className.indexOf("vms-queued")&&-1===t.className.indexOf("vms-ready")&&(ma.addClass(t," vms-queued"),this.collection.push(new Mo(t,this.getProvider())))},n.prototype.getDependencies=function(){var t=[this.config.player.getLink(),fn.getScript(this.environment.name)];return this.environment.browser.isIE11()&&t.push(B.get()+"/ie.js"),this.environment.isHubPage&&t.push(B.get()+"/hub.js"),t},n.prototype.loadCss=function(){if(0===document.querySelectorAll("link[href$=\""+B.get()+"player.css\"]").length){var t=document.createElement("link");t.href=B.get()+"player.css",t.setAttribute("rel","stylesheet"),document.head.appendChild(t)}},n.prototype.loadDependencies=function(){var d=this,e=this.getDependencies(),t=[S.jsPath];void 0===window.vidora&&t.push(Ua.JS_PATH);for(var n=0,i=function(){++n===t.length+e.length&&(d.dependenciesLoaded=!0,d.ready())},r=0,o=e,a;r<o.length;r++)a=o[r],new Yi(a,function(){i()}).load();for(var s=0,c=t;s<c.length;s++)a=c[s],new Yi(a,function(){i()},!1).load()},n.prototype.ready=function(){var a=this;if(this.dependenciesLoaded){for(var e=function(){var e=i.collection.shift();i.currentlyPlaying=i.currentlyPlaying||e,-1===i.rendered.indexOf(e)&&(i.currentlyPlaying===e?(e.render(),i.rendered.push(e)):setTimeout(function(){e.render(),a.rendered.push(e)},500))},i=this;0<this.collection.length;)e();this.observer||this.observe()}},n.prototype.processJsQueue=function(){window._vms.items&&window._vms.items.forEach(function(t){if(!t.processed&&t.embedCode){var e=document.createElement("div");e.className="vms module",e.setAttribute("vms-embedcode",t.embedCode),e.setAttribute("vms-queue-id",t.key),!1===t.autoplay&&ma.addClass(e,"vms-autoplay-off"),!1===t.continuousPlay&&ma.addClass(e,"vms-continuousplay-off");var n=document.body;t.target&&"string"==typeof t.target&&(t.target=document.querySelector(t.target));var i=function(){n.appendChild(e),t.processed=!0};if(t.target){for(var r=0,o=(n=t.target).className.split(" "),a;r<o.length;r++)a=o[r],-1===a.indexOf("vms")&&ma.addClass(e,a);i=function(){n.parentNode.replaceChild(e,n),t.processed=!0}}i()}})},n.prototype.pauseAll=function(s){for(var e=0,t=this.rendered,n;e<t.length;e++)if(n=t[e],-1===s.indexOf(n)){var i=n.bcPlayer();try{i&&i.pause()}catch(t){}try{var r=i&&i.ima3&&i.ima3.adPlayer;r&&r.pause()}catch(t){}var o=n.getPluginInstance(gn.pluginName);o&&o.events.pause()}},n.prototype.observe=function(){var t=this;this.observer=new MutationObserver(function(){t.decorateVms(),t.ready()}),this.observer.observe(window.document,{childList:!0,subtree:!0})},n.prototype.run=function(){var a=this;if(this.processJsQueue(),this.loadCss(),at.isHidden()){this.environment.tabLoaded=!0;var e=setInterval(function(){at.isHidden()||(a.loadDependencies(),clearInterval(e))},100)}else this.loadDependencies();var t=setInterval(function(){"undefined"!=typeof Promise&&(clearInterval(t),a.decorateVms())},100)},n}(),ea=function(t){this.processed=!1,this.embedCode=t.embedCode,this.autoplay=t.autoplay,this.continuousPlay=t.continuousPlay,this.target=t.target,this.callback=t.callback},ta=function(){function t(t){this.pageManager=t,this.items=new Map}return t.prototype.push=function(n){"function"==typeof n&&n(function(e){n=e});var a=new ea(n);a.key=n.embedCode+"-"+this.items.size,this.items.set(a.key,a),this.pageManager.processJsQueue()},t}(),na=Jo.getInstance(new c),ia;window._vms=new ta(na);var i=setInterval(function(){var t;t=!1,document&&document.body&&(na.run(),t=!0),t&&clearInterval(i)},100);console.log("NewsCorp - RePlayer v1.6.0")}]);